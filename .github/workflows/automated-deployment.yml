name: Automated Deployment

on:
  push:
    branches: [ main, develop ]
  release:
    types: [ published ]
  workflow_dispatch:
    inputs:
      environment:
        description: 'Environment to deploy to'
        required: true
        default: 'staging'
        type: choice
        options:
        - staging
        - production
      version:
        description: 'Version to deploy'
        required: false
        type: string

env:
  REGISTRY: ghcr.io
  IMAGE_NAME: ${{ github.repository }}

jobs:
  deploy-staging:
    name: Deploy to Staging
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/develop' || (github.event_name == 'workflow_dispatch' && github.event.inputs.environment == 'staging')
    environment: staging
    
    steps:
    - name: Gate staging secrets
      id: check-staging-secrets
      run: |
        missing=""
        if [[ -z "${{ secrets.STAGING_HOST }}" ]]; then
          missing="${missing} STAGING_HOST"
        fi
        if [[ -z "${{ secrets.STAGING_USERNAME }}" ]]; then
          missing="${missing} STAGING_USERNAME"
        fi
        if [[ -z "${{ secrets.STAGING_SSH_KEY }}" ]]; then
          missing="${missing} STAGING_SSH_KEY"
        fi
        if [[ -n "$missing" ]]; then
          echo "Skipping deploy because secrets missing:$missing"
          echo "ready=false" >> "$GITHUB_OUTPUT"
        else
          echo "ready=true" >> "$GITHUB_OUTPUT"
        fi

    - name: Checkout code
      if: ${{ steps.check-staging-secrets.outputs.ready == 'true' }}
      uses: actions/checkout@v4

    - name: Set up Docker Buildx
      if: ${{ steps.check-staging-secrets.outputs.ready == 'true' }}
      uses: docker/setup-buildx-action@v3

    - name: Log in to Container Registry
      if: ${{ steps.check-staging-secrets.outputs.ready == 'true' }}
      uses: docker/login-action@v3
      with:
        registry: ${{ env.REGISTRY }}
        username: ${{ github.actor }}
        password: ${{ secrets.GITHUB_TOKEN }}

    - name: Extract metadata
      id: meta
      if: ${{ steps.check-staging-secrets.outputs.ready == 'true' }}
      uses: docker/metadata-action@v5
      with:
        images: ${{ env.REGISTRY }}/${{ env.IMAGE_NAME }}
        tags: |
          type=ref,event=branch
          type=sha,prefix=staging-

    - name: Build and push Docker images
      if: ${{ steps.check-staging-secrets.outputs.ready == 'true' }}
      uses: docker/build-push-action@v5
      with:
        context: .
        file: ./Dockerfile.prod
        push: true
        tags: ${{ steps.meta.outputs.tags }}
        labels: ${{ steps.meta.outputs.labels }}
        cache-from: type=gha
        cache-to: type=gha,mode=max

    - name: Deploy to staging server
      if: ${{ steps.check-staging-secrets.outputs.ready == 'true' }}
      uses: appleboy/ssh-action@v1.0.0
      with:
        host: ${{ secrets.STAGING_HOST }}
        username: ${{ secrets.STAGING_USERNAME }}
        key: ${{ secrets.STAGING_SSH_KEY }}
        script: |
          cd /opt/zenamanage
          git pull origin develop
          docker-compose -f docker-compose.prod.yml pull
          docker-compose -f docker-compose.prod.yml up -d
          docker-compose -f docker-compose.prod.yml exec app php artisan migrate --force
          docker-compose -f docker-compose.prod.yml exec app php artisan config:cache
          docker-compose -f docker-compose.prod.yml exec app php artisan route:cache
          docker-compose -f docker-compose.prod.yml exec app php artisan view:cache

    - name: Run health check
      if: ${{ steps.check-staging-secrets.outputs.ready == 'true' }}
      run: |
        sleep 30
        curl -f https://staging.zenamanage.com/health || exit 1

    - name: Run smoke tests
      if: ${{ steps.check-staging-secrets.outputs.ready == 'true' }}
      run: |
        # Test API endpoints
        curl -f https://staging-api.zenamanage.com/health || exit 1
        # Test WebSocket
        curl -f https://staging-ws.zenamanage.com/health || exit 1

    - name: Notify deployment success
      if: ${{ steps.check-staging-secrets.outputs.ready == 'true' && secrets.SLACK_WEBHOOK_URL != '' }}
      continue-on-error: true
      uses: 8398a7/action-slack@v3
      env:
        SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      with:
        status: success
        channel: '#deployments'
        fields: repo,message,commit,author,action,eventName,ref,workflow
        success_message: ":white_check_mark: Succeeded GitHub Actions"
        cancelled_message: ":warning: Cancelled GitHub Actions"
        failure_message: ":no_entry: Failed GitHub Actions"

  deploy-production:
    name: Deploy to Production
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main' || (github.event_name == 'workflow_dispatch' && github.event.inputs.environment == 'production')
    environment: production
    
    steps:
    - name: Gate production secrets
      id: check-production-secrets
      run: |
        missing=""
        if [[ -z "${{ secrets.PRODUCTION_HOST }}" ]]; then
          missing="${missing} PRODUCTION_HOST"
        fi
        if [[ -z "${{ secrets.PRODUCTION_USERNAME }}" ]]; then
          missing="${missing} PRODUCTION_USERNAME"
        fi
        if [[ -z "${{ secrets.PRODUCTION_SSH_KEY }}" ]]; then
          missing="${missing} PRODUCTION_SSH_KEY"
        fi
        if [[ -n "$missing" ]]; then
          echo "Skipping deploy because secrets missing:$missing"
          echo "ready=false" >> "$GITHUB_OUTPUT"
        else
          echo "ready=true" >> "$GITHUB_OUTPUT"
        fi

    - name: Checkout code
      if: ${{ steps.check-production-secrets.outputs.ready == 'true' }}
      uses: actions/checkout@v4

    - name: Set up Docker Buildx
      if: ${{ steps.check-production-secrets.outputs.ready == 'true' }}
      uses: docker/setup-buildx-action@v3

    - name: Log in to Container Registry
      if: ${{ steps.check-production-secrets.outputs.ready == 'true' }}
      uses: docker/login-action@v3
      with:
        registry: ${{ env.REGISTRY }}
        username: ${{ github.actor }}
        password: ${{ secrets.GITHUB_TOKEN }}

    - name: Extract metadata
      id: meta
      if: ${{ steps.check-production-secrets.outputs.ready == 'true' }}
      uses: docker/metadata-action@v5
      with:
        images: ${{ env.REGISTRY }}/${{ env.IMAGE_NAME }}
        tags: |
          type=ref,event=branch
          type=semver,pattern={{version}}
          type=semver,pattern={{major}}.{{minor}}
          type=sha,prefix=production-

    - name: Build and push Docker images
      if: ${{ steps.check-production-secrets.outputs.ready == 'true' }}
      uses: docker/build-push-action@v5
      with:
        context: .
        file: ./Dockerfile.prod
        push: true
        tags: ${{ steps.meta.outputs.tags }}
        labels: ${{ steps.meta.outputs.labels }}
        cache-from: type=gha
        cache-to: type=gha,mode=max

    - name: Create backup before deployment
      if: ${{ steps.check-production-secrets.outputs.ready == 'true' }}
      uses: appleboy/ssh-action@v1.0.0
      with:
        host: ${{ secrets.PRODUCTION_HOST }}
        username: ${{ secrets.PRODUCTION_USERNAME }}
        key: ${{ secrets.PRODUCTION_SSH_KEY }}
        script: |
          cd /opt/zenamanage
          ./docker-manage.sh backup

    - name: Deploy to production server
      if: ${{ steps.check-production-secrets.outputs.ready == 'true' }}
      uses: appleboy/ssh-action@v1.0.0
      with:
        host: ${{ secrets.PRODUCTION_HOST }}
        username: ${{ secrets.PRODUCTION_USERNAME }}
        key: ${{ secrets.PRODUCTION_SSH_KEY }}
        script: |
          cd /opt/zenamanage
          git pull origin main
          docker-compose -f docker-compose.prod.yml pull
          docker-compose -f docker-compose.prod.yml up -d
          docker-compose -f docker-compose.prod.yml exec app php artisan migrate --force
          docker-compose -f docker-compose.prod.yml exec app php artisan config:cache
          docker-compose -f docker-compose.prod.yml exec app php artisan route:cache
          docker-compose -f docker-compose.prod.yml exec app php artisan view:cache

    - name: Run health check
      if: ${{ steps.check-production-secrets.outputs.ready == 'true' }}
      run: |
        sleep 30
        curl -f https://dashboard.zenamanage.com/health || exit 1

    - name: Run smoke tests
      if: ${{ steps.check-production-secrets.outputs.ready == 'true' }}
      run: |
        # Test API endpoints
        curl -f https://api.zenamanage.com/health || exit 1
        # Test WebSocket
        curl -f https://ws.zenamanage.com/health || exit 1

    - name: Run performance tests
      if: ${{ steps.check-production-secrets.outputs.ready == 'true' }}
      run: |
        # Basic performance check
        curl -w "@curl-format.txt" -o /dev/null -s https://dashboard.zenamanage.com/
        curl -w "@curl-format.txt" -o /dev/null -s https://api.zenamanage.com/health

    - name: Notify deployment success
      if: ${{ steps.check-production-secrets.outputs.ready == 'true' && secrets.SLACK_WEBHOOK_URL != '' }}
      continue-on-error: true
      uses: 8398a7/action-slack@v3
      env:
        SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      with:
        status: success
        channel: '#deployments'
        fields: repo,message,commit,author,action,eventName,ref,workflow
        success_message: ":white_check_mark: Succeeded GitHub Actions"
        cancelled_message: ":warning: Cancelled GitHub Actions"
        failure_message: ":no_entry: Failed GitHub Actions"

  rollback:
    name: Rollback Deployment
    runs-on: ubuntu-latest
    if: failure() && (github.ref == 'refs/heads/main' || github.event_name == 'workflow_dispatch')
    environment: production
    
    steps:
    - name: Gate rollback secrets
      id: check-rollback-secrets
      run: |
        missing=""
        if [[ -z "${{ secrets.PRODUCTION_HOST }}" ]]; then
          missing="${missing} PRODUCTION_HOST"
        fi
        if [[ -z "${{ secrets.PRODUCTION_USERNAME }}" ]]; then
          missing="${missing} PRODUCTION_USERNAME"
        fi
        if [[ -z "${{ secrets.PRODUCTION_SSH_KEY }}" ]]; then
          missing="${missing} PRODUCTION_SSH_KEY"
        fi
        if [[ -n "$missing" ]]; then
          echo "Skipping deploy because secrets missing:$missing"
          echo "ready=false" >> "$GITHUB_OUTPUT"
        else
          echo "ready=true" >> "$GITHUB_OUTPUT"
        fi

    - name: Checkout code
      if: ${{ steps.check-rollback-secrets.outputs.ready == 'true' }}
      uses: actions/checkout@v4

    - name: Rollback to previous version
      if: ${{ steps.check-rollback-secrets.outputs.ready == 'true' }}
      uses: appleboy/ssh-action@v1.0.0
      with:
        host: ${{ secrets.PRODUCTION_HOST }}
        username: ${{ secrets.PRODUCTION_USERNAME }}
        key: ${{ secrets.PRODUCTION_SSH_KEY }}
        script: |
          cd /opt/zenamanage
          git reset --hard HEAD~1
          docker-compose -f docker-compose.prod.yml up -d
          docker-compose -f docker-compose.prod.yml exec app php artisan config:cache

    - name: Run health check after rollback
      if: ${{ steps.check-rollback-secrets.outputs.ready == 'true' }}
      run: |
        sleep 30
        curl -f https://dashboard.zenamanage.com/health || exit 1

    - name: Notify rollback
      if: ${{ steps.check-rollback-secrets.outputs.ready == 'true' && secrets.SLACK_WEBHOOK_URL != '' }}
      continue-on-error: true
      uses: 8398a7/action-slack@v3
      env:
        SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      with:
        status: failure
        channel: '#deployments'
        fields: repo,message,commit,author,action,eventName,ref,workflow
        success_message: ":white_check_mark: Succeeded GitHub Actions"
        cancelled_message: ":warning: Cancelled GitHub Actions"
        failure_message: ":no_entry: Failed GitHub Actions"

  blue-green-deployment:
    name: Blue-Green Deployment
    runs-on: ubuntu-latest
    if: github.event_name == 'workflow_dispatch' && github.event.inputs.environment == 'production'
    environment: production
    
    steps:
    - name: Gate blue-green secrets
      id: check-blue-green-secrets
      run: |
        missing=""
        if [[ -z "${{ secrets.PRODUCTION_HOST }}" ]]; then
          missing="${missing} PRODUCTION_HOST"
        fi
        if [[ -z "${{ secrets.PRODUCTION_USERNAME }}" ]]; then
          missing="${missing} PRODUCTION_USERNAME"
        fi
        if [[ -z "${{ secrets.PRODUCTION_SSH_KEY }}" ]]; then
          missing="${missing} PRODUCTION_SSH_KEY"
        fi
        if [[ -n "$missing" ]]; then
          echo "Skipping deploy because secrets missing:$missing"
          echo "ready=false" >> "$GITHUB_OUTPUT"
        else
          echo "ready=true" >> "$GITHUB_OUTPUT"
        fi

    - name: Checkout code
      if: ${{ steps.check-blue-green-secrets.outputs.ready == 'true' }}
      uses: actions/checkout@v4

    - name: Set up Docker Buildx
      if: ${{ steps.check-blue-green-secrets.outputs.ready == 'true' }}
      uses: docker/setup-buildx-action@v3

    - name: Log in to Container Registry
      if: ${{ steps.check-blue-green-secrets.outputs.ready == 'true' }}
      uses: docker/login-action@v3
      with:
        registry: ${{ env.REGISTRY }}
        username: ${{ github.actor }}
        password: ${{ secrets.GITHUB_TOKEN }}

    - name: Extract metadata
      id: meta
      if: ${{ steps.check-blue-green-secrets.outputs.ready == 'true' }}
      uses: docker/metadata-action@v5
      with:
        images: ${{ env.REGISTRY }}/${{ env.IMAGE_NAME }}
        tags: |
          type=sha,prefix=blue-green-

    - name: Build and push Docker images
      if: ${{ steps.check-blue-green-secrets.outputs.ready == 'true' }}
      uses: docker/build-push-action@v5
      with:
        context: .
        file: ./Dockerfile.prod
        push: true
        tags: ${{ steps.meta.outputs.tags }}
        labels: ${{ steps.meta.outputs.labels }}
        cache-from: type=gha
        cache-to: type=gha,mode=max

    - name: Deploy to green environment
      if: ${{ steps.check-blue-green-secrets.outputs.ready == 'true' }}
      uses: appleboy/ssh-action@v1.0.0
      with:
        host: ${{ secrets.PRODUCTION_HOST }}
        username: ${{ secrets.PRODUCTION_USERNAME }}
        key: ${{ secrets.PRODUCTION_SSH_KEY }}
        script: |
          cd /opt/zenamanage
          # Deploy to green environment
          docker-compose -f docker-compose.prod.yml -p zenamanage-green up -d
          docker-compose -f docker-compose.prod.yml -p zenamanage-green exec app php artisan migrate --force
          docker-compose -f docker-compose.prod.yml -p zenamanage-green exec app php artisan config:cache

    - name: Run health check on green environment
      if: ${{ steps.check-blue-green-secrets.outputs.ready == 'true' }}
      run: |
        sleep 30
        curl -f https://green.zenamanage.com/health || exit 1

    - name: Run comprehensive tests on green environment
      if: ${{ steps.check-blue-green-secrets.outputs.ready == 'true' }}
      run: |
        # Test API endpoints
        curl -f https://green-api.zenamanage.com/health || exit 1
        # Test WebSocket
        curl -f https://green-ws.zenamanage.com/health || exit 1
        # Test database connectivity
        curl -f https://green.zenamanage.com/api/health || exit 1

    - name: Switch traffic to green environment
      if: ${{ steps.check-blue-green-secrets.outputs.ready == 'true' }}
      uses: appleboy/ssh-action@v1.0.0
      with:
        host: ${{ secrets.PRODUCTION_HOST }}
        username: ${{ secrets.PRODUCTION_USERNAME }}
        key: ${{ secrets.PRODUCTION_SSH_KEY }}
        script: |
          cd /opt/zenamanage
          # Update load balancer configuration
          # This would typically involve updating nginx configuration
          # or updating DNS records to point to the green environment
          echo "Switching traffic to green environment..."

    - name: Run final health check
      if: ${{ steps.check-blue-green-secrets.outputs.ready == 'true' }}
      run: |
        sleep 30
        curl -f https://dashboard.zenamanage.com/health || exit 1

    - name: Clean up blue environment
      if: ${{ steps.check-blue-green-secrets.outputs.ready == 'true' }}
      uses: appleboy/ssh-action@v1.0.0
      with:
        host: ${{ secrets.PRODUCTION_HOST }}
        username: ${{ secrets.PRODUCTION_USERNAME }}
        key: ${{ secrets.PRODUCTION_SSH_KEY }}
        script: |
          cd /opt/zenamanage
          # Stop and remove blue environment
          docker-compose -f docker-compose.prod.yml -p zenamanage-blue down

    - name: Notify blue-green deployment success
      if: ${{ steps.check-blue-green-secrets.outputs.ready == 'true' && secrets.SLACK_WEBHOOK_URL != '' }}
      continue-on-error: true
      uses: 8398a7/action-slack@v3
      env:
        SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      with:
        status: success
        channel: '#deployments'
        fields: repo,message,commit,author,action,eventName,ref,workflow
        success_message: ":white_check_mark: Succeeded GitHub Actions"
        cancelled_message: ":warning: Cancelled GitHub Actions"
        failure_message: ":no_entry: Failed GitHub Actions"

  canary-deployment:
    name: Canary Deployment
    runs-on: ubuntu-latest
    if: github.event_name == 'workflow_dispatch' && github.event.inputs.environment == 'production'
    environment: production
    
    steps:
    - name: Gate canary secrets
      id: check-canary-secrets
      run: |
        missing=""
        if [[ -z "${{ secrets.PRODUCTION_HOST }}" ]]; then
          missing="${missing} PRODUCTION_HOST"
        fi
        if [[ -z "${{ secrets.PRODUCTION_USERNAME }}" ]]; then
          missing="${missing} PRODUCTION_USERNAME"
        fi
        if [[ -z "${{ secrets.PRODUCTION_SSH_KEY }}" ]]; then
          missing="${missing} PRODUCTION_SSH_KEY"
        fi
        if [[ -n "$missing" ]]; then
          echo "Skipping deploy because secrets missing:$missing"
          echo "ready=false" >> "$GITHUB_OUTPUT"
        else
          echo "ready=true" >> "$GITHUB_OUTPUT"
        fi

    - name: Checkout code
      if: ${{ steps.check-canary-secrets.outputs.ready == 'true' }}
      uses: actions/checkout@v4

    - name: Set up Docker Buildx
      if: ${{ steps.check-canary-secrets.outputs.ready == 'true' }}
      uses: docker/setup-buildx-action@v3

    - name: Log in to Container Registry
      if: ${{ steps.check-canary-secrets.outputs.ready == 'true' }}
      uses: docker/login-action@v3
      with:
        registry: ${{ env.REGISTRY }}
        username: ${{ github.actor }}
        password: ${{ secrets.GITHUB_TOKEN }}

    - name: Extract metadata
      id: meta
      if: ${{ steps.check-canary-secrets.outputs.ready == 'true' }}
      uses: docker/metadata-action@v5
      with:
        images: ${{ env.REGISTRY }}/${{ env.IMAGE_NAME }}
        tags: |
          type=sha,prefix=canary-

    - name: Build and push Docker images
      if: ${{ steps.check-canary-secrets.outputs.ready == 'true' }}
      uses: docker/build-push-action@v5
      with:
        context: .
        file: ./Dockerfile.prod
        push: true
        tags: ${{ steps.meta.outputs.tags }}
        labels: ${{ steps.meta.outputs.labels }}
        cache-from: type=gha
        cache-to: type=gha,mode=max

    - name: Deploy canary version
      if: ${{ steps.check-canary-secrets.outputs.ready == 'true' }}
      uses: appleboy/ssh-action@v1.0.0
      with:
        host: ${{ secrets.PRODUCTION_HOST }}
        username: ${{ secrets.PRODUCTION_USERNAME }}
        key: ${{ secrets.PRODUCTION_SSH_KEY }}
        script: |
          cd /opt/zenamanage
          # Deploy canary version (10% traffic)
          docker-compose -f docker-compose.prod.yml -p zenamanage-canary up -d
          docker-compose -f docker-compose.prod.yml -p zenamanage-canary exec app php artisan migrate --force
          docker-compose -f docker-compose.prod.yml -p zenamanage-canary exec app php artisan config:cache

    - name: Run health check on canary
      if: ${{ steps.check-canary-secrets.outputs.ready == 'true' }}
      run: |
        sleep 30
        curl -f https://canary.zenamanage.com/health || exit 1

    - name: Monitor canary for 5 minutes
      if: ${{ steps.check-canary-secrets.outputs.ready == 'true' }}
      run: |
        echo "Monitoring canary deployment for 5 minutes..."
        sleep 300

    - name: Run performance tests on canary
      if: ${{ steps.check-canary-secrets.outputs.ready == 'true' }}
      run: |
        # Test response times
        curl -w "@curl-format.txt" -o /dev/null -s https://canary.zenamanage.com/
        # Test error rates
        curl -f https://canary.zenamanage.com/api/health || exit 1

    - name: Increase canary traffic to 50%
      if: ${{ steps.check-canary-secrets.outputs.ready == 'true' }}
      uses: appleboy/ssh-action@v1.0.0
      with:
        host: ${{ secrets.PRODUCTION_HOST }}
        username: ${{ secrets.PRODUCTION_USERNAME }}
        key: ${{ secrets.PRODUCTION_SSH_KEY }}
        script: |
          cd /opt/zenamanage
          echo "Increasing canary traffic to 50%..."

    - name: Monitor canary for additional 5 minutes
      if: ${{ steps.check-canary-secrets.outputs.ready == 'true' }}
      run: |
        echo "Monitoring canary deployment for additional 5 minutes..."
        sleep 300

    - name: Run final performance tests
      if: ${{ steps.check-canary-secrets.outputs.ready == 'true' }}
      run: |
        # Test response times
        curl -w "@curl-format.txt" -o /dev/null -s https://canary.zenamanage.com/
        # Test error rates
        curl -f https://canary.zenamanage.com/api/health || exit 1

    - name: Promote canary to full deployment
      if: ${{ steps.check-canary-secrets.outputs.ready == 'true' }}
      uses: appleboy/ssh-action@v1.0.0
      with:
        host: ${{ secrets.PRODUCTION_HOST }}
        username: ${{ secrets.PRODUCTION_USERNAME }}
        key: ${{ secrets.PRODUCTION_SSH_KEY }}
        script: |
          cd /opt/zenamanage
          # Promote canary to full deployment
          docker-compose -f docker-compose.prod.yml -p zenamanage-canary down
          docker-compose -f docker-compose.prod.yml up -d
          docker-compose -f docker-compose.prod.yml exec app php artisan migrate --force
          docker-compose -f docker-compose.prod.yml exec app php artisan config:cache

    - name: Run final health check
      if: ${{ steps.check-canary-secrets.outputs.ready == 'true' }}
      run: |
        sleep 30
        curl -f https://dashboard.zenamanage.com/health || exit 1

    - name: Notify canary deployment success
      if: ${{ steps.check-canary-secrets.outputs.ready == 'true' && secrets.SLACK_WEBHOOK_URL != '' }}
      continue-on-error: true
      uses: 8398a7/action-slack@v3
      env:
        SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      with:
        status: success
        channel: '#deployments'
        fields: repo,message,commit,author,action,eventName,ref,workflow
        success_message: ":white_check_mark: Succeeded GitHub Actions"
        cancelled_message: ":warning: Cancelled GitHub Actions"
        failure_message: ":no_entry: Failed GitHub Actions"
