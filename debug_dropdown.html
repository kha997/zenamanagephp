<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dropdown Debug</title>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <style>
        [x-cloak] { display: none !important; }
        
        .zena-nav-user {
            position: relative;
            display: inline-block;
        }
        
        .zena-nav-user-menu {
            position: relative;
        }
        
        .zena-nav-user-button {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .zena-nav-user-button:hover {
            background: #e9ecef;
        }
        
        .zena-nav-user-avatar {
            width: 32px;
            height: 32px;
            background: #007bff;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 12px;
        }
        
        .zena-nav-user-name {
            font-weight: 500;
        }
        
        .zena-nav-user-chevron {
            transition: transform 0.2s;
        }
        
        .zena-nav-user-chevron.rotate-180 {
            transform: rotate(180deg);
        }
        
        .zena-nav-user-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 8px;
            background-color: white;
            border: 1px solid #E5E7EB;
            border-radius: 8px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            min-width: 200px;
            z-index: 50;
        }
        
        .zena-nav-user-info {
            padding: 16px;
            border-bottom: 1px solid #F3F4F6;
        }
        
        .zena-nav-user-info-name {
            font-weight: 600;
            color: #111827;
        }
        
        .zena-nav-user-info-email {
            font-size: 14px;
            color: #6B7280;
            margin-top: 4px;
        }
        
        .zena-nav-user-actions {
            padding: 8px 0;
        }
        
        .zena-nav-user-action {
            display: block;
            width: 100%;
            padding: 8px 16px;
            text-align: left;
            background: none;
            border: none;
            color: #374151;
            cursor: pointer;
            font-size: 14px;
        }
        
        .zena-nav-user-action:hover {
            background: #F9FAFB;
        }
        
        .debug-info {
            margin-top: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <h1>Admin Dropdown Debug Test</h1>
    
    <div class="zena-nav-user">
        <div class="zena-nav-user-menu" x-data="{ open: false }">
            <button @click="open = !open" 
                    class="zena-nav-user-button"
                    aria-expanded="false"
                    aria-haspopup="true">
                <div class="zena-nav-user-avatar">AD</div>
                <span class="zena-nav-user-name">Admin</span>
                <i class="fas fa-chevron-down zena-nav-user-chevron" :class="{ 'rotate-180': open }"></i>
            </button>

            <div x-show="open" 
                 x-cloak
                 @click.away="open = false"
                 x-transition:enter="transition ease-out duration-200"
                 x-transition:enter-start="opacity-0 scale-95"
                 x-transition:enter-end="opacity-100 scale-100"
                 x-transition:leave="transition ease-in duration-75"
                 x-transition:leave-start="opacity-100 scale-100"
                 x-transition:leave-end="opacity-0 scale-95"
                 class="zena-nav-user-dropdown">
                <div class="zena-nav-user-info">
                    <div class="zena-nav-user-info-name">Admin</div>
                    <div class="zena-nav-user-info-email">admin@zenamanage.com</div>
                </div>
                <div class="zena-nav-user-actions">
                    <button class="zena-nav-user-action">Profile</button>
                    <button class="zena-nav-user-action">Settings</button>
                    <button class="zena-nav-user-action">Logout</button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="debug-info">
        <h3>Debug Information:</h3>
        <p><strong>Alpine.js Status:</strong> <span id="alpine-status">Checking...</span></p>
        <p><strong>Dropdown State:</strong> <span x-text="open ? 'Open' : 'Closed'"></span></p>
        <p><strong>Click Count:</strong> <span x-text="clickCount || 0"></span></p>
    </div>
    
    <script>
        // Check if Alpine.js is loaded
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Alpine) {
                document.getElementById('alpine-status').textContent = 'Loaded ✅';
            } else {
                document.getElementById('alpine-status').textContent = 'Not Loaded ❌';
            }
        });
        
        // Add click counter
        document.addEventListener('alpine:init', () => {
            Alpine.data('dropdownDebug', () => ({
                clickCount: 0,
                init() {
                    this.$watch('open', (value) => {
                        console.log('Dropdown state changed:', value);
                    });
                }
            }));
        });
    </script>
</body>
</html>
