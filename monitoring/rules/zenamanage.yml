groups:
  - name: zenamanage.rules
    rules:
      # High Error Rate Alert
      - alert: HighErrorRate
        expr: zenamanage_error_rate > 5
        for: 2m
        labels:
          severity: warning
        annotations:
          summary: "High error rate detected"
          description: "Error rate is {{ $value }}% for more than 2 minutes"

      # High Response Time Alert
      - alert: HighResponseTime
        expr: zenamanage_response_time_avg > 500
        for: 3m
        labels:
          severity: warning
        annotations:
          summary: "High response time detected"
          description: "Average response time is {{ $value }}ms for more than 3 minutes"

      # High CPU Usage Alert
      - alert: HighCPUUsage
        expr: zenamanage_cpu_usage > 80
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "High CPU usage detected"
          description: "CPU usage is {{ $value }}% for more than 5 minutes"

      # High Memory Usage Alert
      - alert: HighMemoryUsage
        expr: zenamanage_memory_usage > 85
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "High memory usage detected"
          description: "Memory usage is {{ $value }}% for more than 5 minutes"

      # Database Connection Issues
      - alert: DatabaseConnectionIssues
        expr: zenamanage_db_connections == 0
        for: 1m
        labels:
          severity: critical
        annotations:
          summary: "Database connection issues"
          description: "No database connections detected for more than 1 minute"

      # High Number of Slow Queries
      - alert: HighSlowQueries
        expr: increase(zenamanage_slow_queries[5m]) > 10
        for: 2m
        labels:
          severity: warning
        annotations:
          summary: "High number of slow queries"
          description: "More than 10 slow queries in the last 5 minutes"

      # Service Down Alert
      - alert: ServiceDown
        expr: up{job="zenamanage-app"} == 0
        for: 1m
        labels:
          severity: critical
        annotations:
          summary: "ZenaManage service is down"
          description: "ZenaManage application is not responding"
