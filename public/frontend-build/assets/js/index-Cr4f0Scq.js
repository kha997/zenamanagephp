import{r as Io,a as yp,g as Bu}from"./react-vendor-BYA32aEE.js";import{r as p,R as Z,u as $o,L as Kt,a as Vs,O as qu,N as Nr,b as Wu,c as zu,d as Ku,e as vp,f as bp}from"./router-vendor-DOASx7Fd.js";import{z as W,F as wp}from"./notification-vendor-yLDUkMiE.js";import{t as jp,c as Np}from"./utils-vendor-BkLtITBR.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();var ai={exports:{}},Zr={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hc;function kp(){if(Hc)return Zr;Hc=1;var e=Io(),t=Symbol.for("react.element"),s=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(c,l,u){var d,h={},m=null,g=null;u!==void 0&&(m=""+u),l.key!==void 0&&(m=""+l.key),l.ref!==void 0&&(g=l.ref);for(d in l)r.call(l,d)&&!i.hasOwnProperty(d)&&(h[d]=l[d]);if(c&&c.defaultProps)for(d in l=c.defaultProps,l)h[d]===void 0&&(h[d]=l[d]);return{$$typeof:t,type:c,key:m,ref:g,props:h,_owner:a.current}}return Zr.Fragment=s,Zr.jsx=o,Zr.jsxs=o,Zr}var Qc;function _p(){return Qc||(Qc=1,ai.exports=kp()),ai.exports}var n=_p(),qn={},Zc;function Tp(){if(Zc)return qn;Zc=1;var e=yp();return qn.createRoot=e.createRoot,qn.hydrateRoot=e.hydrateRoot,qn}var Sp=Tp();const Cp=Bu(Sp);var Fr=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Js=typeof window>"u"||"Deno"in globalThis;function it(){}function Ap(e,t){return typeof e=="function"?e(t):e}function Bi(e){return typeof e=="number"&&e>=0&&e!==1/0}function Hu(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ps(e,t){return typeof e=="function"?e(t):e}function Et(e,t){return typeof e=="function"?e(t):e}function Xc(e,t){const{type:s="all",exact:r,fetchStatus:a,predicate:i,queryKey:o,stale:c}=e;if(o){if(r){if(t.queryHash!==Bo(o,t.options))return!1}else if(!fn(t.queryKey,o))return!1}if(s!=="all"){const l=t.isActive();if(s==="active"&&!l||s==="inactive"&&l)return!1}return!(typeof c=="boolean"&&t.isStale()!==c||a&&a!==t.state.fetchStatus||i&&!i(t))}function Yc(e,t){const{exact:s,status:r,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(s){if(er(t.options.mutationKey)!==er(i))return!1}else if(!fn(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||a&&!a(t))}function Bo(e,t){return(t?.queryKeyHashFn||er)(e)}function er(e){return JSON.stringify(e,(t,s)=>qi(s)?Object.keys(s).sort().reduce((r,a)=>(r[a]=s[a],r),{}):s)}function fn(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(s=>fn(e[s],t[s])):!1}var Pp=Object.prototype.hasOwnProperty;function Qu(e,t){if(e===t)return e;const s=Gc(e)&&Gc(t);if(!s&&!(qi(e)&&qi(t)))return t;const a=(s?e:Object.keys(e)).length,i=s?t:Object.keys(t),o=i.length,c=s?new Array(o):{};let l=0;for(let u=0;u<o;u++){const d=s?u:i[u],h=e[d],m=t[d];if(h===m){c[d]=h,(s?u<a:Pp.call(e,d))&&l++;continue}if(h===null||m===null||typeof h!="object"||typeof m!="object"){c[d]=m;continue}const g=Qu(h,m);c[d]=g,g===h&&l++}return a===o&&l===a?e:c}function va(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}function Gc(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function qi(e){if(!Jc(e))return!1;const t=e.constructor;if(t===void 0)return!0;const s=t.prototype;return!(!Jc(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Jc(e){return Object.prototype.toString.call(e)==="[object Object]"}function Ep(e){return new Promise(t=>{setTimeout(t,e)})}function Wi(e,t,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,t):s.structuralSharing!==!1?Qu(e,t):t}function Rp(e,t,s=0){const r=[...e,t];return s&&r.length>s?r.slice(1):r}function Dp(e,t,s=0){const r=[t,...e];return s&&r.length>s?r.slice(0,-1):r}var qo=Symbol();function Zu(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===qo?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Xu(e,t){return typeof e=="function"?e(...t):!!e}var Mp=class extends Fr{#t;#e;#s;constructor(){super(),this.#s=e=>{if(!Js&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#e||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(e){this.#s=e,this.#e?.(),this.#e=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#t!==e&&(this.#t=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#t=="boolean"?this.#t:globalThis.document?.visibilityState!=="hidden"}},Wo=new Mp,Op=class extends Fr{#t=!0;#e;#s;constructor(){super(),this.#s=e=>{if(!Js&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}}}onSubscribe(){this.#e||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(e){this.#s=e,this.#e?.(),this.#e=e(this.setOnline.bind(this))}setOnline(e){this.#t!==e&&(this.#t=e,this.listeners.forEach(s=>{s(e)}))}isOnline(){return this.#t}},ba=new Op;function zi(){let e,t;const s=new Promise((a,i)=>{e=a,t=i});s.status="pending",s.catch(()=>{});function r(a){Object.assign(s,a),delete s.resolve,delete s.reject}return s.resolve=a=>{r({status:"fulfilled",value:a}),e(a)},s.reject=a=>{r({status:"rejected",reason:a}),t(a)},s}function Fp(e){return Math.min(1e3*2**e,3e4)}function Yu(e){return(e??"online")==="online"?ba.isOnline():!0}var Ki=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function Gu(e){let t=!1,s=0,r;const a=zi(),i=()=>a.status!=="pending",o=x=>{if(!i()){const y=new Ki(x);m(y),e.onCancel?.(y)}},c=()=>{t=!0},l=()=>{t=!1},u=()=>Wo.isFocused()&&(e.networkMode==="always"||ba.isOnline())&&e.canRun(),d=()=>Yu(e.networkMode)&&e.canRun(),h=x=>{i()||(r?.(),a.resolve(x))},m=x=>{i()||(r?.(),a.reject(x))},g=()=>new Promise(x=>{r=y=>{(i()||u())&&x(y)},e.onPause?.()}).then(()=>{r=void 0,i()||e.onContinue?.()}),f=()=>{if(i())return;let x;const y=s===0?e.initialPromise:void 0;try{x=y??e.fn()}catch(v){x=Promise.reject(v)}Promise.resolve(x).then(h).catch(v=>{if(i())return;const w=e.retry??(Js?0:3),j=e.retryDelay??Fp,N=typeof j=="function"?j(s,v):j,T=w===!0||typeof w=="number"&&s<w||typeof w=="function"&&w(s,v);if(t||!T){m(v);return}s++,e.onFail?.(s,v),Ep(N).then(()=>u()?void 0:g()).then(()=>{t?m(v):f()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(r?.(),a),cancelRetry:c,continueRetry:l,canStart:d,start:()=>(d()?f():g().then(f),a)}}var Lp=e=>setTimeout(e,0);function Vp(){let e=[],t=0,s=c=>{c()},r=c=>{c()},a=Lp;const i=c=>{t?e.push(c):a(()=>{s(c)})},o=()=>{const c=e;e=[],c.length&&a(()=>{r(()=>{c.forEach(l=>{s(l)})})})};return{batch:c=>{let l;t++;try{l=c()}finally{t--,t||o()}return l},batchCalls:c=>(...l)=>{i(()=>{c(...l)})},schedule:i,setNotifyFunction:c=>{s=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{a=c}}}var He=Vp(),Ju=class{#t;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Bi(this.gcTime)&&(this.#t=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Js?1/0:300*1e3))}clearGcTimeout(){this.#t&&(clearTimeout(this.#t),this.#t=void 0)}},Up=class extends Ju{#t;#e;#s;#r;#n;#i;#o;constructor(e){super(),this.#o=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#r=e.client,this.#s=this.#r.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#t=Ip(this.options),this.state=e.state??this.#t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(e,t){const s=Wi(this.state.data,e,this.options);return this.#a({data:s,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),s}setState(e,t){this.#a({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#n?.promise;return this.#n?.cancel(e),t?t.then(it).catch(it):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#t)}isActive(){return this.observers.some(e=>Et(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===qo||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Ps(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Hu(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#n&&(this.#o?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const c=this.observers.find(l=>l.options.queryFn);c&&this.setOptions(c.options)}const s=new AbortController,r=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#o=!0,s.signal)})},a=()=>{const c=Zu(this.options,t),u=(()=>{const d={client:this.#r,queryKey:this.queryKey,meta:this.meta};return r(d),d})();return this.#o=!1,this.options.persister?this.options.persister(c,u,this):c(u)},o=(()=>{const c={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:a};return r(c),c})();this.options.behavior?.onFetch(o,this),this.#e=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#a({type:"fetch",meta:o.fetchOptions?.meta}),this.#n=Gu({initialPromise:t?.initialPromise,fn:o.fetchFn,onCancel:c=>{c instanceof Ki&&c.revert&&this.setState({...this.#e,fetchStatus:"idle"}),s.abort()},onFail:(c,l)=>{this.#a({type:"failed",failureCount:c,error:l})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const c=await this.#n.start();if(c===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(c),this.#s.config.onSuccess?.(c,this),this.#s.config.onSettled?.(c,this.state.error,this),c}catch(c){if(c instanceof Ki){if(c.silent)return this.#n.promise;if(c.revert){if(this.state.data===void 0)throw c;return this.state.data}}throw this.#a({type:"error",error:c}),this.#s.config.onError?.(c,this),this.#s.config.onSettled?.(this.state.data,c,this),c}finally{this.scheduleGc()}}#a(e){const t=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...eh(s.data,this.options),fetchMeta:e.meta??null};case"success":const r={...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#e=e.manual?r:void 0,r;case"error":const a=e.error;return{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=t(this.state),He.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:e})})}};function eh(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Yu(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Ip(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,s=t!==void 0,r=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var $p=class extends Fr{constructor(e={}){super(),this.config=e,this.#t=new Map}#t;build(e,t,s){const r=t.queryKey,a=t.queryHash??Bo(r,t);let i=this.get(a);return i||(i=new Up({client:e,queryKey:r,queryHash:a,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(r)}),this.add(i)),i}add(e){this.#t.has(e.queryHash)||(this.#t.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#t.get(e.queryHash);t&&(e.destroy(),t===e&&this.#t.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){He.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#t.get(e)}getAll(){return[...this.#t.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(s=>Xc(t,s))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(s=>Xc(e,s)):t}notify(e){He.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){He.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){He.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Bp=class extends Ju{#t;#e;#s;constructor(e){super(),this.mutationId=e.mutationId,this.#e=e.mutationCache,this.#t=[],this.state=e.state||th(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#e.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#e.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#e.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#r({type:"continue"})};this.#s=Gu({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(a,i)=>{this.#r({type:"failed",failureCount:a,error:i})},onPause:()=>{this.#r({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#e.canRun(this)});const s=this.state.status==="pending",r=!this.#s.canStart();try{if(s)t();else{this.#r({type:"pending",variables:e,isPaused:r}),await this.#e.config.onMutate?.(e,this);const i=await this.options.onMutate?.(e);i!==this.state.context&&this.#r({type:"pending",context:i,variables:e,isPaused:r})}const a=await this.#s.start();return await this.#e.config.onSuccess?.(a,e,this.state.context,this),await this.options.onSuccess?.(a,e,this.state.context),await this.#e.config.onSettled?.(a,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(a,null,e,this.state.context),this.#r({type:"success",data:a}),a}catch(a){try{throw await this.#e.config.onError?.(a,e,this.state.context,this),await this.options.onError?.(a,e,this.state.context),await this.#e.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,a,e,this.state.context),a}finally{this.#r({type:"error",error:a})}}finally{this.#e.runNext(this)}}#r(e){const t=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),He.batch(()=>{this.#t.forEach(s=>{s.onMutationUpdate(e)}),this.#e.notify({mutation:this,type:"updated",action:e})})}};function th(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var qp=class extends Fr{constructor(e={}){super(),this.config=e,this.#t=new Set,this.#e=new Map,this.#s=0}#t;#e;#s;build(e,t,s){const r=new Bp({mutationCache:this,mutationId:++this.#s,options:e.defaultMutationOptions(t),state:s});return this.add(r),r}add(e){this.#t.add(e);const t=Wn(e);if(typeof t=="string"){const s=this.#e.get(t);s?s.push(e):this.#e.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#t.delete(e)){const t=Wn(e);if(typeof t=="string"){const s=this.#e.get(t);if(s)if(s.length>1){const r=s.indexOf(e);r!==-1&&s.splice(r,1)}else s[0]===e&&this.#e.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Wn(e);if(typeof t=="string"){const r=this.#e.get(t)?.find(a=>a.state.status==="pending");return!r||r===e}else return!0}runNext(e){const t=Wn(e);return typeof t=="string"?this.#e.get(t)?.find(r=>r!==e&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){He.batch(()=>{this.#t.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#t.clear(),this.#e.clear()})}getAll(){return Array.from(this.#t)}find(e){const t={exact:!0,...e};return this.getAll().find(s=>Yc(t,s))}findAll(e={}){return this.getAll().filter(t=>Yc(e,t))}notify(e){He.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return He.batch(()=>Promise.all(e.map(t=>t.continue().catch(it))))}};function Wn(e){return e.options.scope?.id}function el(e){return{onFetch:(t,s)=>{const r=t.options,a=t.fetchOptions?.meta?.fetchMore?.direction,i=t.state.data?.pages||[],o=t.state.data?.pageParams||[];let c={pages:[],pageParams:[]},l=0;const u=async()=>{let d=!1;const h=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(t.signal.aborted?d=!0:t.signal.addEventListener("abort",()=>{d=!0}),t.signal)})},m=Zu(t.options,t.fetchOptions),g=async(f,x,y)=>{if(d)return Promise.reject();if(x==null&&f.pages.length)return Promise.resolve(f);const w=(()=>{const O={client:t.client,queryKey:t.queryKey,pageParam:x,direction:y?"backward":"forward",meta:t.options.meta};return h(O),O})(),j=await m(w),{maxPages:N}=t.options,T=y?Dp:Rp;return{pages:T(f.pages,j,N),pageParams:T(f.pageParams,x,N)}};if(a&&i.length){const f=a==="backward",x=f?Wp:tl,y={pages:i,pageParams:o},v=x(r,y);c=await g(y,v,f)}else{const f=e??i.length;do{const x=l===0?o[0]??r.initialPageParam:tl(r,c);if(l>0&&x==null)break;c=await g(c,x),l++}while(l<f)}return c};t.options.persister?t.fetchFn=()=>t.options.persister?.(u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s):t.fetchFn=u}}}function tl(e,{pages:t,pageParams:s}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,s[r],s):void 0}function Wp(e,{pages:t,pageParams:s}){return t.length>0?e.getPreviousPageParam?.(t[0],t,s[0],s):void 0}var zp=class{#t;#e;#s;#r;#n;#i;#o;#a;constructor(e={}){this.#t=e.queryCache||new $p,this.#e=e.mutationCache||new qp,this.#s=e.defaultOptions||{},this.#r=new Map,this.#n=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=Wo.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#a=ba.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#t.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#e.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#t.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),s=this.#t.build(this,t),r=s.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(Ps(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return this.#t.findAll(e).map(({queryKey:t,state:s})=>{const r=s.data;return[t,r]})}setQueryData(e,t,s){const r=this.defaultQueryOptions({queryKey:e}),i=this.#t.get(r.queryHash)?.state.data,o=Ap(t,i);if(o!==void 0)return this.#t.build(this,r).setData(o,{...s,manual:!0})}setQueriesData(e,t,s){return He.batch(()=>this.#t.findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,s)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#t.get(t.queryHash)?.state}removeQueries(e){const t=this.#t;He.batch(()=>{t.findAll(e).forEach(s=>{t.remove(s)})})}resetQueries(e,t){const s=this.#t;return He.batch(()=>(s.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const s={revert:!0,...t},r=He.batch(()=>this.#t.findAll(e).map(a=>a.cancel(s)));return Promise.all(r).then(it).catch(it)}invalidateQueries(e,t={}){return He.batch(()=>(this.#t.findAll(e).forEach(s=>{s.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const s={...t,cancelRefetch:t.cancelRefetch??!0},r=He.batch(()=>this.#t.findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,s);return s.throwOnError||(i=i.catch(it)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(it)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const s=this.#t.build(this,t);return s.isStaleByTime(Ps(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(it).catch(it)}fetchInfiniteQuery(e){return e.behavior=el(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(it).catch(it)}ensureInfiniteQueryData(e){return e.behavior=el(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return ba.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#s}setDefaultOptions(e){this.#s=e}setQueryDefaults(e,t){this.#r.set(er(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#r.values()],s={};return t.forEach(r=>{fn(e,r.queryKey)&&Object.assign(s,r.defaultOptions)}),s}setMutationDefaults(e,t){this.#n.set(er(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#n.values()],s={};return t.forEach(r=>{fn(e,r.mutationKey)&&Object.assign(s,r.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#s.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Bo(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===qo&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#s.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#t.clear(),this.#e.clear()}},Kp=class extends Fr{constructor(e,t){super(),this.options=t,this.#t=e,this.#a=null,this.#o=zi(),this.bindMethods(),this.setOptions(t)}#t;#e=void 0;#s=void 0;#r=void 0;#n;#i;#o;#a;#p;#h;#m;#l;#d;#c;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),sl(this.#e,this.options)?this.#u():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Hi(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Hi(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#w(),this.#e.removeObserver(this)}setOptions(e){const t=this.options,s=this.#e;if(this.options=this.#t.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Et(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#j(),this.#e.setOptions(this.options),t._defaulted&&!va(this.options,t)&&this.#t.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const r=this.hasListeners();r&&rl(this.#e,s,this.options,t)&&this.#u(),this.updateResult(),r&&(this.#e!==s||Et(this.options.enabled,this.#e)!==Et(t.enabled,this.#e)||Ps(this.options.staleTime,this.#e)!==Ps(t.staleTime,this.#e))&&this.#g();const a=this.#x();r&&(this.#e!==s||Et(this.options.enabled,this.#e)!==Et(t.enabled,this.#e)||a!==this.#c)&&this.#y(a)}getOptimisticResult(e){const t=this.#t.getQueryCache().build(this.#t,e),s=this.createResult(t,e);return Qp(this,s)&&(this.#r=s,this.#i=this.options,this.#n=this.#e.state),s}getCurrentResult(){return this.#r}trackResult(e,t){return new Proxy(e,{get:(s,r)=>(this.trackProp(r),t?.(r),r==="promise"&&!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(s,r))})}trackProp(e){this.#f.add(e)}getCurrentQuery(){return this.#e}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#t.defaultQueryOptions(e),s=this.#t.getQueryCache().build(this.#t,t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){return this.#u({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#u(e){this.#j();let t=this.#e.fetch(this.options,e);return e?.throwOnError||(t=t.catch(it)),t}#g(){this.#b();const e=Ps(this.options.staleTime,this.#e);if(Js||this.#r.isStale||!Bi(e))return;const s=Hu(this.#r.dataUpdatedAt,e)+1;this.#l=setTimeout(()=>{this.#r.isStale||this.updateResult()},s)}#x(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#y(e){this.#w(),this.#c=e,!(Js||Et(this.options.enabled,this.#e)===!1||!Bi(this.#c)||this.#c===0)&&(this.#d=setInterval(()=>{(this.options.refetchIntervalInBackground||Wo.isFocused())&&this.#u()},this.#c))}#v(){this.#g(),this.#y(this.#x())}#b(){this.#l&&(clearTimeout(this.#l),this.#l=void 0)}#w(){this.#d&&(clearInterval(this.#d),this.#d=void 0)}createResult(e,t){const s=this.#e,r=this.options,a=this.#r,i=this.#n,o=this.#i,l=e!==s?e.state:this.#s,{state:u}=e;let d={...u},h=!1,m;if(t._optimisticResults){const k=this.hasListeners(),z=!k&&sl(e,t),ne=k&&rl(e,s,t,r);(z||ne)&&(d={...d,...eh(u.data,e.options)}),t._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:g,errorUpdatedAt:f,status:x}=d;m=d.data;let y=!1;if(t.placeholderData!==void 0&&m===void 0&&x==="pending"){let k;a?.isPlaceholderData&&t.placeholderData===o?.placeholderData?(k=a.data,y=!0):k=typeof t.placeholderData=="function"?t.placeholderData(this.#m?.state.data,this.#m):t.placeholderData,k!==void 0&&(x="success",m=Wi(a?.data,k,t),h=!0)}if(t.select&&m!==void 0&&!y)if(a&&m===i?.data&&t.select===this.#p)m=this.#h;else try{this.#p=t.select,m=t.select(m),m=Wi(a?.data,m,t),this.#h=m,this.#a=null}catch(k){this.#a=k}this.#a&&(g=this.#a,m=this.#h,f=Date.now(),x="error");const v=d.fetchStatus==="fetching",w=x==="pending",j=x==="error",N=w&&v,T=m!==void 0,D={status:x,fetchStatus:d.fetchStatus,isPending:w,isSuccess:x==="success",isError:j,isInitialLoading:N,isLoading:N,data:m,dataUpdatedAt:d.dataUpdatedAt,error:g,errorUpdatedAt:f,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:v,isRefetching:v&&!w,isLoadingError:j&&!T,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:j&&T,isStale:zo(e,t),refetch:this.refetch,promise:this.#o,isEnabled:Et(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const k=ue=>{D.status==="error"?ue.reject(D.error):D.data!==void 0&&ue.resolve(D.data)},z=()=>{const ue=this.#o=D.promise=zi();k(ue)},ne=this.#o;switch(ne.status){case"pending":e.queryHash===s.queryHash&&k(ne);break;case"fulfilled":(D.status==="error"||D.data!==ne.value)&&z();break;case"rejected":(D.status!=="error"||D.error!==ne.reason)&&z();break}}return D}updateResult(){const e=this.#r,t=this.createResult(this.#e,this.options);if(this.#n=this.#e.state,this.#i=this.options,this.#n.data!==void 0&&(this.#m=this.#e),va(t,e))return;this.#r=t;const s=()=>{if(!e)return!0;const{notifyOnChangeProps:r}=this.options,a=typeof r=="function"?r():r;if(a==="all"||!a&&!this.#f.size)return!0;const i=new Set(a??this.#f);return this.options.throwOnError&&i.add("error"),Object.keys(this.#r).some(o=>{const c=o;return this.#r[c]!==e[c]&&i.has(c)})};this.#N({listeners:s()})}#j(){const e=this.#t.getQueryCache().build(this.#t,this.options);if(e===this.#e)return;const t=this.#e;this.#e=e,this.#s=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#N(e){He.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#r)}),this.#t.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function Hp(e,t){return Et(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function sl(e,t){return Hp(e,t)||e.state.data!==void 0&&Hi(e,t,t.refetchOnMount)}function Hi(e,t,s){if(Et(t.enabled,e)!==!1&&Ps(t.staleTime,e)!=="static"){const r=typeof s=="function"?s(e):s;return r==="always"||r!==!1&&zo(e,t)}return!1}function rl(e,t,s,r){return(e!==t||Et(r.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&zo(e,s)}function zo(e,t){return Et(t.enabled,e)!==!1&&e.isStaleByTime(Ps(t.staleTime,e))}function Qp(e,t){return!va(e.getCurrentResult(),t)}var Zp=class extends Fr{#t;#e=void 0;#s;#r;constructor(t,s){super(),this.#t=t,this.setOptions(s),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const s=this.options;this.options=this.#t.defaultMutationOptions(t),va(this.options,s)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),s?.mutationKey&&this.options.mutationKey&&er(s.mutationKey)!==er(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(t){this.#n(),this.#i(t)}getCurrentResult(){return this.#e}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#n(),this.#i()}mutate(t,s){return this.#r=s,this.#s?.removeObserver(this),this.#s=this.#t.getMutationCache().build(this.#t,this.options),this.#s.addObserver(this),this.#s.execute(t)}#n(){const t=this.#s?.state??th();this.#e={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#i(t){He.batch(()=>{if(this.#r&&this.hasListeners()){const s=this.#e.variables,r=this.#e.context;t?.type==="success"?(this.#r.onSuccess?.(t.data,s,r),this.#r.onSettled?.(t.data,null,s,r)):t?.type==="error"&&(this.#r.onError?.(t.error,s,r),this.#r.onSettled?.(void 0,t.error,s,r))}this.listeners.forEach(s=>{s(this.#e)})})}},sh=p.createContext(void 0),fe=e=>{const t=p.useContext(sh);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Xp=({client:e,children:t})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(sh.Provider,{value:e,children:t})),rh=p.createContext(!1),Yp=()=>p.useContext(rh);rh.Provider;function Gp(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Jp=p.createContext(Gp()),eg=()=>p.useContext(Jp),tg=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},sg=e=>{p.useEffect(()=>{e.clearReset()},[e])},rg=({result:e,errorResetBoundary:t,throwOnError:s,query:r,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(a&&e.data===void 0||Xu(s,[e.error,r])),ng=e=>{if(e.suspense){const s=a=>a==="static"?a:Math.max(a??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...a)=>s(r(...a)):s(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},ag=(e,t)=>e.isLoading&&e.isFetching&&!t,ig=(e,t)=>e?.suspense&&t.isPending,nl=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function og(e,t,s){const r=Yp(),a=eg(),i=fe(),o=i.defaultQueryOptions(e);i.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=r?"isRestoring":"optimistic",ng(o),tg(o,a),sg(a);const c=!i.getQueryCache().get(o.queryHash),[l]=p.useState(()=>new t(i,o)),u=l.getOptimisticResult(o),d=!r&&e.subscribed!==!1;if(p.useSyncExternalStore(p.useCallback(h=>{const m=d?l.subscribe(He.batchCalls(h)):it;return l.updateResult(),m},[l,d]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),p.useEffect(()=>{l.setOptions(o)},[o,l]),ig(o,u))throw nl(o,l,a);if(rg({result:u,errorResetBoundary:a,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(o,u),o.experimental_prefetchInRender&&!Js&&ag(u,r)&&(c?nl(o,l,a):i.getQueryCache().get(o.queryHash)?.promise)?.catch(it).finally(()=>{l.updateResult()}),o.notifyOnChangeProps?u:l.trackResult(u)}function Ce(e,t){return og(e,Kp)}function ke(e,t){const s=fe(),[r]=p.useState(()=>new Zp(s,e));p.useEffect(()=>{r.setOptions(e)},[r,e]);const a=p.useSyncExternalStore(p.useCallback(o=>r.subscribe(He.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=p.useCallback((o,c)=>{r.mutate(o,c).catch(it)},[r]);if(a.error&&Xu(r.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}const vs=(...e)=>e.filter(Boolean).join(" "),cg="inline-flex items-center justify-center gap-2 font-medium rounded-[var(--radius-md)] transition-colors duration-150 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",lg={primary:"bg-[var(--color-semantic-primary-500)] text-[var(--color-semantic-primary-contrast)] hover:bg-[var(--color-semantic-primary-600)] focus-visible:ring-[var(--color-semantic-primary-200)]",secondary:"bg-[var(--color-semantic-secondary-100)] text-[var(--color-semantic-secondary-700)] hover:bg-[var(--color-semantic-secondary-200)] focus-visible:ring-[var(--color-semantic-secondary-200)]",outline:"border border-[var(--color-border-default)] bg-transparent text-[var(--color-text-primary)] hover:bg-[var(--color-surface-muted)] focus-visible:ring-[var(--color-border-focus)]",ghost:"bg-transparent text-[var(--color-text-secondary)] hover:bg-[var(--color-surface-muted)] hover:text-[var(--color-text-primary)] focus-visible:ring-[var(--color-border-focus)]",destructive:"bg-[var(--color-semantic-danger-500)] text-[var(--color-semantic-danger-contrast)] hover:bg-[var(--color-semantic-danger-600)] focus-visible:ring-[var(--color-semantic-danger-200)]"},dg={sm:"h-9 px-3 text-sm",md:"h-10 px-4 text-sm",lg:"h-11 px-5 text-base",icon:"h-10 w-10 p-0"},le=p.forwardRef(({variant:e="primary",size:t="md",className:s,children:r,loading:a=!1,startIcon:i,endIcon:o,disabled:c,...l},u)=>{const d=c||a;return n.jsxs("button",{ref:u,"data-variant":e,"data-size":t,className:vs(cg,lg[e],dg[t],d&&"cursor-not-allowed opacity-60",s),disabled:d,"aria-busy":a?"true":void 0,...l,children:[a?n.jsx("span",{className:"inline-flex h-4 w-4 animate-spin rounded-full border-2 border-[var(--color-semantic-primary-100)] border-r-transparent","aria-hidden":"true"}):i&&n.jsx("span",{className:"inline-flex",children:i}),n.jsx("span",{className:"whitespace-nowrap",children:r}),!a&&o?n.jsx("span",{className:"inline-flex",children:o}):null]})});le.displayName="Button";const nh=p.createContext(void 0),Ko=()=>{const e=p.useContext(nh);if(!e)throw new Error("useThemeMode phải được sử dụng trong ThemeContext.Provider");return e};let ug=class{config;constructor(t){this.config=t}t(t,s){const r=s?.defaultValue,a={...s};delete a.defaultValue;const i=t.split(".");let o=this.config.messages[this.config.locale]||this.config.messages[this.config.fallbackLocale];for(const c of i)if(o&&typeof o=="object"&&c in o)o=o[c];else{o=this.config.messages[this.config.fallbackLocale];for(const l of i)if(o&&typeof o=="object"&&l in o)o=o[l];else return r||t;break}return typeof o!="string"?r||t:a?o.replace(/\{(\w+)\}/g,(c,l)=>a[l]?.toString()||c):o}setLocale(t){this.config.locale=t}getLocale(){return this.config.locale}};const hg={en:{dashboard:{title:"Dashboard",description:"Overview of your projects and tasks",widgets:"Widgets",alerts:"Alerts",alertsDescription:"Recent notifications and alerts",preferences:"Preferences",totalProjects:"Total Projects",totalTasks:"Total Tasks",pendingTasks:"Pending Tasks",teamMembers:"Team Members",refresh:"Refresh",customize:"Customize",quickActions:"Quick Actions",quickActionsDescription:"Common tasks and shortcuts",newProject:"New Project",newTask:"New Task",addMember:"Add Member",reports:"Reports",noAlerts:"No alerts at this time",metricsError:"Failed to load metrics",alertsError:"Failed to load alerts",errorTitle:"Failed to load dashboard",errorDescription:"Please try refreshing the page",retry:"Retry",noWidgets:"No widgets yet",noWidgetsDescription:"Add widgets to customize your dashboard",addWidget:"Add widget:",editMode:"Edit Mode",done:"Done",refreshSuccess:"Dashboard refreshed successfully",navigatingToProjects:"Navigating to projects...",newTaskComingSoon:"New task functionality coming soon",addMemberComingSoon:"Add member functionality coming soon",reportsComingSoon:"Reports functionality coming soon",actionNotImplemented:"This action is not yet implemented"},alerts:{title:"Alerts Center",description:"Manage and monitor system alerts",filters:"Filters",filterAll:"All",filterUnread:"Unread",filterRead:"Read",filterCritical:"Critical",filterHigh:"High",filterMedium:"Medium",filterLow:"Low",markAllRead:"Mark All Read",refresh:"Refresh",errorTitle:"Failed to load alerts",errorDescription:"Please try refreshing the page",retry:"Retry",noAlerts:"No alerts found",noAlertsDescription:"No alerts at this time",noFilteredAlerts:"No alerts match the current filter",selectedCount:"Selected",bulkMarkRead:"Mark as Read",clearSelection:"Clear Selection",selectAll:"Select all",unread:"Unread",source:"Source",type:"Type",markRead:"Mark as Read",refreshSuccess:"Alerts refreshed successfully",markReadSuccess:"Alert marked as read",markReadError:"Failed to mark alert as read",markAllReadSuccess:"All alerts marked as read",markAllReadError:"Failed to mark all alerts as read",bulkMarkReadSuccess:"Selected alerts marked as read",bulkMarkReadError:"Failed to mark selected alerts as read"},preferences:{title:"Preferences",description:"Customize your dashboard experience",theme:{title:"Theme Settings",description:"Customize the appearance of your dashboard",mode:"Theme Mode",light:"Light",dark:"Dark",auto:"Auto",preview:"Preview"},layout:{title:"Layout Settings",description:"Configure how content is displayed",type:"Layout Type",grid:"Grid",list:"List",compact:"Compact",density:"Density",comfortable:"Comfortable",spacious:"Spacious"},notifications:{title:"Notification Settings",description:"Configure how you receive notifications",enabled:"Enable Notifications",enabledDescription:"Receive system notifications",sound:"Sound Notifications",soundDescription:"Play sound for notifications",desktop:"Desktop Notifications",desktopDescription:"Show desktop notifications"},widgets:{title:"Widget Settings",description:"Configure widget behavior and appearance",defaultSize:"Default Widget Size",small:"Small",medium:"Medium",large:"Large",xlarge:"Extra Large",autoRefresh:"Auto Refresh Widgets",autoRefreshDescription:"Automatically refresh widget data",showTitles:"Show Widget Titles",showTitlesDescription:"Display titles on widgets"},refresh:{title:"Refresh Settings",description:"Configure data refresh intervals",interval:"Refresh Interval (seconds)"},unsavedChanges:"Unsaved changes",reset:"Reset",save:"Save Preferences",saved:"Preferences saved!",resetToDefaults:"Reset to Defaults",currentTheme:"Current Theme",currentThemeDescription:"Active theme mode",errorTitle:"Failed to load preferences",errorDescription:"Please try refreshing the page",retry:"Retry",help:{title:"Need Help?",description:"Your preferences are automatically saved and synced across all your devices.",theme:"Auto theme will follow your system preference (light/dark mode).",refresh:"Refresh intervals are applied to all dashboard widgets and data."}},common:{loading:"Loading...",error:"An error occurred",success:"Success",cancel:"Cancel",save:"Save",delete:"Delete",tenant:"Tenant",toggleTheme:"Toggle theme",darkMode:"Dark mode",lightMode:"Light mode"},admin:{dashboard:{title:"Admin Dashboard",description:"System overview and quick actions",totalUsers:"Total Users",totalProjects:"Total Projects",activeTenants:"Active Tenants",activeSessions:"Active Sessions",acrossAllTenants:"Across all tenants",systemWide:"System-wide",ofTotal:"of {total} total",currentlyOnline:"Currently online",export:"Export",exportComingSoon:"Export functionality coming soon",exportUrlNotAvailable:"Export URL not available",quickActions:"Quick Actions",manageUsers:"Manage Users",manageTenants:"Manage Tenants",viewProjects:"View Projects",settings:"Settings",loadingDashboard:"Loading dashboard...",failedToLoadDashboard:"Failed to load dashboard",failedToLoadDashboardDescription:"There was an error loading the dashboard data. Please try again."},users:{title:"User Management",description:"Manage system users and permissions",search:"Search users...",status:"Status",priority:"Priority",allStatus:"All Status",allPriorities:"All Priorities",planning:"Planning",active:"Active",onHold:"On Hold",completed:"Completed",cancelled:"Cancelled",urgent:"Urgent",high:"High",medium:"Medium",low:"Low",newUser:"New User",view:"View",edit:"Edit",delete:"Delete",progress:"Progress",members:"members",loadingUsers:"Loading users...",failedToLoadUsers:"Failed to load users",failedToLoadUsersDescription:"There was an error loading the users. Please try again.",noUsersFound:"No users found",noUsersFoundDescription:"Try adjusting your filters or create a new user.",deleteUserConfirm:"Are you sure you want to delete this user?",userDeletedSuccess:"User deleted successfully",userDeleteError:"Failed to delete user",previous:"Previous",next:"Next",showing:"Showing {from} to {to} of {total} results"},roles:{title:"Roles & Permissions",description:"Manage user roles and system permissions",newRole:"New Role",edit:"Edit",delete:"Delete",name:"Name",roleDescription:"Description",userCount:"User Count",permissions:"Permissions",actions:"Actions",systemPermissionsOverview:"System Permissions Overview",management:"Management",noPermissionsAvailable:"No permissions available",loadingRoles:"Loading roles...",failedToLoadRoles:"Failed to load roles",failedToLoadRolesDescription:"There was an error loading the roles. Please try again.",noRolesFound:"No roles found",noRolesFoundDescription:"Try adjusting your filters or create a new role.",deleteRoleConfirm:"Are you sure you want to delete this role?",roleDeletedSuccess:"Role deleted successfully",roleDeleteError:"Failed to delete role",previous:"Previous",next:"Next",showing:"Showing {from} to {to} of {total} results"},tenants:{title:"Tenant Management",description:"Manage system tenants and organizations",search:"Search tenants...",status:"Status",plan:"Plan",allStatus:"All Status",allPlans:"All Plans",active:"Active",inactive:"Inactive",suspended:"Suspended",basic:"Basic",premium:"Premium",enterprise:"Enterprise",newTenant:"New Tenant",name:"Name",domain:"Domain",users:"Users",created:"Created",actions:"Actions",toggleStatus:"Toggle Status",suspend:"Suspend",activate:"Activate",edit:"Edit",delete:"Delete",loadingTenants:"Loading tenants...",failedToLoadTenants:"Failed to load tenants",failedToLoadTenantsDescription:"There was an error loading the tenants. Please try again.",noTenantsFound:"No tenants found",noTenantsFoundDescription:"Try adjusting your filters or create a new tenant.",deleteTenantConfirm:"Are you sure you want to delete this tenant?",tenantDeletedSuccess:"Tenant deleted successfully",tenantDeleteError:"Failed to delete tenant",previous:"Previous",next:"Next",showing:"Showing {from} to {to} of {total} results"}},projects:{title:"Projects",description:"Manage your projects and track progress",search:"Search projects...",status:"Status",priority:"Priority",allStatus:"All Status",allPriorities:"All Priorities",planning:"Planning",active:"Active",onHold:"On Hold",completed:"Completed",cancelled:"Cancelled",urgent:"Urgent",high:"High",medium:"Medium",low:"Low",newProject:"New Project",view:"View",edit:"Edit",delete:"Delete",progress:"Progress",members:"members",loadingProjects:"Loading projects...",failedToLoadProjects:"Failed to load projects",failedToLoadProjectsDescription:"There was an error loading the projects. Please try again.",noProjectsFound:"No projects found",noProjectsFoundDescription:"Try adjusting your filters or create a new project.",deleteProjectConfirm:"Are you sure you want to delete this project?",projectDeletedSuccess:"Project deleted successfully",projectDeleteError:"Failed to delete project",previous:"Previous",next:"Next",showing:"Showing {from} to {to} of {total} results",detail:{backToProjects:"Back to Projects",editProject:"Edit Project",addTask:"Add Task",deleteProject:"Delete Project",deleteProjectConfirm:"Are you sure you want to delete this project? This action cannot be undone.",projectDeletedSuccess:"Project deleted successfully",projectDeleteError:"Failed to delete project",editProjectComingSoon:"Edit project functionality coming soon",addTaskComingSoon:"Add task functionality coming soon",loadingProject:"Loading project...",failedToLoadProject:"Failed to load project",failedToLoadProjectDescription:"There was an error loading the project. Please try again.",projectInfo:"Project Information",startDate:"Start Date",endDate:"End Date",teamSize:"Team Size",recentDocuments:"Recent Documents",noDocumentsYet:"No documents yet",updated:"Updated"}},documents:{title:"Documents",description:"Manage and organize your project documents",search:"Search documents...",fileType:"File Type",project:"Project",allTypes:"All Types",allProjects:"All Projects",pdf:"PDF",word:"Word",wordDocx:"Word (DOCX)",excel:"Excel",excelXlsx:"Excel (XLSX)",jpeg:"JPEG",png:"PNG",upload:"Upload",view:"View",download:"Download",edit:"Edit",delete:"Delete",name:"Name",type:"Type",size:"Size",uploadedBy:"Uploaded by",uploadedAt:"Uploaded at",category:"Category",loadingDocuments:"Loading documents...",failedToLoadDocuments:"Failed to load documents",failedToLoadDocumentsDescription:"There was an error loading the documents. Please try again.",noDocumentsFound:"No documents found",noDocumentsFoundDescription:"Try adjusting your filters or upload a new document.",deleteDocumentConfirm:"Are you sure you want to delete this document?",documentDeletedSuccess:"Document deleted successfully",documentDeleteError:"Failed to delete document",downloadDocumentSuccess:"Document downloaded successfully",downloadDocumentError:"Failed to download document",previous:"Previous",next:"Next",showing:"Showing {from} to {to} of {total} results"}},vi:{dashboard:{title:"Bảng điều khiển",description:"Tổng quan về dự án và nhiệm vụ của bạn",widgets:"Widgets",alerts:"Cảnh báo",alertsDescription:"Thông báo và cảnh báo gần đây",preferences:"Tùy chọn",totalProjects:"Tổng dự án",totalTasks:"Tổng nhiệm vụ",pendingTasks:"Nhiệm vụ chờ",teamMembers:"Thành viên nhóm",refresh:"Làm mới",customize:"Tùy chỉnh",quickActions:"Thao tác nhanh",quickActionsDescription:"Các tác vụ và phím tắt thông dụng",newProject:"Dự án mới",newTask:"Nhiệm vụ mới",addMember:"Thêm thành viên",reports:"Báo cáo",noAlerts:"Không có cảnh báo nào",metricsError:"Không thể tải số liệu",alertsError:"Không thể tải cảnh báo",errorTitle:"Không thể tải bảng điều khiển",errorDescription:"Vui lòng thử làm mới trang",retry:"Thử lại",noWidgets:"Chưa có widget nào",noWidgetsDescription:"Thêm widget để tùy chỉnh bảng điều khiển",addWidget:"Thêm widget:",editMode:"Chế độ chỉnh sửa",done:"Hoàn thành"},alerts:{title:"Trung tâm cảnh báo",description:"Quản lý và theo dõi cảnh báo hệ thống",filters:"Bộ lọc",filterAll:"Tất cả",filterUnread:"Chưa đọc",filterRead:"Đã đọc",filterCritical:"Nghiêm trọng",filterHigh:"Cao",filterMedium:"Trung bình",filterLow:"Thấp",markAllRead:"Đánh dấu tất cả đã đọc",refresh:"Làm mới",errorTitle:"Không thể tải cảnh báo",errorDescription:"Vui lòng thử làm mới trang",retry:"Thử lại",noAlerts:"Không có cảnh báo nào",noAlertsDescription:"Không có cảnh báo nào tại thời điểm này",noFilteredAlerts:"Không có cảnh báo nào phù hợp với bộ lọc hiện tại",selectedCount:"Đã chọn",bulkMarkRead:"Đánh dấu đã đọc",clearSelection:"Bỏ chọn",selectAll:"Chọn tất cả",unread:"Chưa đọc",source:"Nguồn",type:"Loại",markRead:"Đánh dấu đã đọc"},preferences:{title:"Tùy chỉnh",description:"Tùy chỉnh trải nghiệm bảng điều khiển",theme:{title:"Cài đặt giao diện",description:"Tùy chỉnh giao diện bảng điều khiển",mode:"Chế độ giao diện",light:"Sáng",dark:"Tối",auto:"Tự động",preview:"Xem trước"},layout:{title:"Cài đặt bố cục",description:"Cấu hình cách hiển thị nội dung",type:"Loại bố cục",grid:"Lưới",list:"Danh sách",compact:"Gọn",density:"Mật độ",comfortable:"Thoải mái",spacious:"Rộng rãi"},notifications:{title:"Cài đặt thông báo",description:"Cấu hình cách nhận thông báo",enabled:"Bật thông báo",enabledDescription:"Nhận thông báo hệ thống",sound:"Thông báo âm thanh",soundDescription:"Phát âm thanh cho thông báo",desktop:"Thông báo desktop",desktopDescription:"Hiển thị thông báo desktop"},widgets:{title:"Cài đặt widget",description:"Cấu hình hành vi và giao diện widget",defaultSize:"Kích thước widget mặc định",small:"Nhỏ",medium:"Trung bình",large:"Lớn",xlarge:"Rất lớn",autoRefresh:"Tự động làm mới widget",autoRefreshDescription:"Tự động làm mới dữ liệu widget",showTitles:"Hiển thị tiêu đề widget",showTitlesDescription:"Hiển thị tiêu đề trên widget"},refresh:{title:"Cài đặt làm mới",description:"Cấu hình khoảng thời gian làm mới dữ liệu",interval:"Khoảng thời gian làm mới (giây)"},unsavedChanges:"Có thay đổi chưa lưu",reset:"Đặt lại",save:"Lưu tùy chỉnh",saved:"Đã lưu tùy chỉnh!",resetToDefaults:"Đặt lại mặc định",currentTheme:"Giao diện hiện tại",currentThemeDescription:"Chế độ giao diện đang hoạt động",errorTitle:"Không thể tải tùy chỉnh",errorDescription:"Vui lòng thử làm mới trang",retry:"Thử lại",help:{title:"Cần trợ giúp?",description:"Tùy chỉnh của bạn được tự động lưu và đồng bộ trên tất cả thiết bị.",theme:"Giao diện tự động sẽ theo tùy chỉnh hệ thống (chế độ sáng/tối).",refresh:"Khoảng thời gian làm mới được áp dụng cho tất cả widget và dữ liệu bảng điều khiển."}},auth:{login:{title:"Chào mừng trở lại",subtitle:"Đăng nhập vào tài khoản của bạn",formTitle:"Đăng nhập",formDescription:"Nhập thông tin đăng nhập để truy cập tài khoản",email:"Địa chỉ Email",emailPlaceholder:"Nhập email của bạn",password:"Mật khẩu",passwordPlaceholder:"Nhập mật khẩu của bạn",remember:"Ghi nhớ đăng nhập",forgotPassword:"Quên mật khẩu?",submit:"Đăng nhập",or:"Hoặc",noAccount:"Chưa có tài khoản?",signUp:"Đăng ký",terms:"Bằng cách đăng nhập, bạn đồng ý với Điều khoản Dịch vụ và Chính sách Bảo mật của chúng tôi"},forgotPassword:{title:"Quên mật khẩu?",subtitle:"Nhập email để nhận hướng dẫn đặt lại",formTitle:"Đặt lại mật khẩu",formDescription:"Chúng tôi sẽ gửi cho bạn liên kết để đặt lại mật khẩu",email:"Địa chỉ Email",emailPlaceholder:"Nhập email của bạn",submit:"Gửi liên kết đặt lại",backToLogin:"Quay lại đăng nhập",successTitle:"Email đã được gửi!",successDescription:"Kiểm tra email để nhận hướng dẫn đặt lại mật khẩu",successMessage:"Chúng tôi đã gửi liên kết đặt lại mật khẩu đến địa chỉ email của bạn. Vui lòng kiểm tra hộp thư và làm theo hướng dẫn để đặt lại mật khẩu.",tryAgain:"Thử lại"},resetPassword:{title:"Đặt lại mật khẩu",subtitle:"Nhập mật khẩu mới",formTitle:"Mật khẩu mới",formDescription:"Chọn mật khẩu mạnh cho tài khoản của bạn",password:"Mật khẩu mới",passwordPlaceholder:"Nhập mật khẩu mới",confirmPassword:"Xác nhận mật khẩu",confirmPasswordPlaceholder:"Xác nhận mật khẩu mới",passwordRequirements:"Mật khẩu phải có ít nhất 8 ký tự",submit:"Đặt lại mật khẩu",backToLogin:"Quay lại đăng nhập",successTitle:"Đặt lại mật khẩu thành công!",successDescription:"Mật khẩu của bạn đã được đặt lại thành công",successMessage:"Bây giờ bạn có thể đăng nhập bằng mật khẩu mới.",signIn:"Đăng nhập"},twoFactor:{title:"Xác thực hai yếu tố",description:"Nhập mã 6 chữ số từ ứng dụng xác thực của bạn",code:"Mã xác thực",help:"Kiểm tra ứng dụng xác thực của bạn để lấy mã hiện tại",cancel:"Hủy",verify:"Xác thực",resend:"Gửi lại mã",resendCooldown:"Gửi lại sau {seconds}s"}},common:{loading:"Đang tải...",error:"Đã xảy ra lỗi",success:"Thành công",cancel:"Hủy",save:"Lưu",delete:"Xóa",tenant:"Tenant",toggleTheme:"Bật/tắt chế độ sáng tối",darkMode:"Chế độ tối",lightMode:"Chế độ sáng"},admin:{dashboard:{title:"Bảng điều khiển Admin",description:"Tổng quan hệ thống và thao tác nhanh",totalUsers:"Tổng người dùng",totalProjects:"Tổng dự án",activeTenants:"Tenant hoạt động",activeSessions:"Phiên hoạt động",acrossAllTenants:"Trên tất cả tenant",systemWide:"Toàn hệ thống",ofTotal:"trong tổng số {total}",currentlyOnline:"Đang trực tuyến",export:"Xuất",exportComingSoon:"Tính năng xuất sẽ sớm có",exportUrlNotAvailable:"URL xuất không khả dụng",quickActions:"Thao tác nhanh",manageUsers:"Quản lý người dùng",manageTenants:"Quản lý tenant",viewProjects:"Xem dự án",settings:"Cài đặt",loadingDashboard:"Đang tải bảng điều khiển...",failedToLoadDashboard:"Không thể tải bảng điều khiển",failedToLoadDashboardDescription:"Có lỗi khi tải dữ liệu bảng điều khiển. Vui lòng thử lại."},users:{title:"Quản lý người dùng",description:"Quản lý người dùng hệ thống và quyền hạn",search:"Tìm kiếm người dùng...",status:"Trạng thái",priority:"Độ ưu tiên",allStatus:"Tất cả trạng thái",allPriorities:"Tất cả độ ưu tiên",planning:"Lập kế hoạch",active:"Hoạt động",onHold:"Tạm dừng",completed:"Hoàn thành",cancelled:"Đã hủy",urgent:"Khẩn cấp",high:"Cao",medium:"Trung bình",low:"Thấp",newUser:"Người dùng mới",view:"Xem",edit:"Chỉnh sửa",delete:"Xóa",progress:"Tiến độ",members:"thành viên",loadingUsers:"Đang tải người dùng...",failedToLoadUsers:"Không thể tải người dùng",failedToLoadUsersDescription:"Có lỗi khi tải người dùng. Vui lòng thử lại.",noUsersFound:"Không tìm thấy người dùng",noUsersFoundDescription:"Thử điều chỉnh bộ lọc hoặc tạo người dùng mới.",deleteUserConfirm:"Bạn có chắc chắn muốn xóa người dùng này?",userDeletedSuccess:"Đã xóa người dùng thành công",userDeleteError:"Không thể xóa người dùng",previous:"Trước",next:"Tiếp",showing:"Hiển thị {from} đến {to} trong tổng số {total} kết quả"},roles:{title:"Vai trò & Quyền hạn",description:"Quản lý vai trò người dùng và quyền hệ thống",newRole:"Vai trò mới",edit:"Chỉnh sửa",delete:"Xóa",name:"Tên",roleDescription:"Mô tả",userCount:"Số người dùng",permissions:"Quyền hạn",actions:"Hành động",systemPermissionsOverview:"Tổng quan quyền hệ thống",management:"Quản lý",noPermissionsAvailable:"Không có quyền nào khả dụng",loadingRoles:"Đang tải vai trò...",failedToLoadRoles:"Không thể tải vai trò",failedToLoadRolesDescription:"Có lỗi khi tải vai trò. Vui lòng thử lại.",noRolesFound:"Không tìm thấy vai trò",noRolesFoundDescription:"Thử điều chỉnh bộ lọc hoặc tạo vai trò mới.",deleteRoleConfirm:"Bạn có chắc chắn muốn xóa vai trò này?",roleDeletedSuccess:"Đã xóa vai trò thành công",roleDeleteError:"Không thể xóa vai trò",previous:"Trước",next:"Tiếp",showing:"Hiển thị {from} đến {to} trong tổng số {total} kết quả"},tenants:{title:"Quản lý Tenant",description:"Quản lý tenant và tổ chức hệ thống",search:"Tìm kiếm tenant...",status:"Trạng thái",plan:"Gói",allStatus:"Tất cả trạng thái",allPlans:"Tất cả gói",active:"Hoạt động",inactive:"Không hoạt động",suspended:"Tạm dừng",basic:"Cơ bản",premium:"Cao cấp",enterprise:"Doanh nghiệp",newTenant:"Tenant mới",name:"Tên",domain:"Miền",users:"Người dùng",created:"Đã tạo",actions:"Hành động",toggleStatus:"Chuyển trạng thái",suspend:"Tạm dừng",activate:"Kích hoạt",edit:"Chỉnh sửa",delete:"Xóa",loadingTenants:"Đang tải tenant...",failedToLoadTenants:"Không thể tải tenant",failedToLoadTenantsDescription:"Có lỗi khi tải tenant. Vui lòng thử lại.",noTenantsFound:"Không tìm thấy tenant",noTenantsFoundDescription:"Thử điều chỉnh bộ lọc hoặc tạo tenant mới.",deleteTenantConfirm:"Bạn có chắc chắn muốn xóa tenant này?",tenantDeletedSuccess:"Đã xóa tenant thành công",tenantDeleteError:"Không thể xóa tenant",previous:"Trước",next:"Tiếp",showing:"Hiển thị {from} đến {to} trong tổng số {total} kết quả"}},projects:{title:"Dự án",description:"Quản lý dự án và theo dõi tiến độ",search:"Tìm kiếm dự án...",status:"Trạng thái",priority:"Độ ưu tiên",allStatus:"Tất cả trạng thái",allPriorities:"Tất cả độ ưu tiên",planning:"Lập kế hoạch",active:"Hoạt động",onHold:"Tạm dừng",completed:"Hoàn thành",cancelled:"Đã hủy",urgent:"Khẩn cấp",high:"Cao",medium:"Trung bình",low:"Thấp",newProject:"Dự án mới",view:"Xem",edit:"Chỉnh sửa",delete:"Xóa",progress:"Tiến độ",members:"thành viên",loadingProjects:"Đang tải dự án...",failedToLoadProjects:"Không thể tải dự án",failedToLoadProjectsDescription:"Có lỗi khi tải dự án. Vui lòng thử lại.",noProjectsFound:"Không tìm thấy dự án",noProjectsFoundDescription:"Thử điều chỉnh bộ lọc hoặc tạo dự án mới.",deleteProjectConfirm:"Bạn có chắc chắn muốn xóa dự án này?",projectDeletedSuccess:"Đã xóa dự án thành công",projectDeleteError:"Không thể xóa dự án",previous:"Trước",next:"Tiếp",showing:"Hiển thị {from} đến {to} trong tổng số {total} kết quả",detail:{backToProjects:"Quay lại dự án",editProject:"Chỉnh sửa dự án",addTask:"Thêm nhiệm vụ",deleteProject:"Xóa dự án",deleteProjectConfirm:"Bạn có chắc chắn muốn xóa dự án này? Hành động này không thể hoàn tác.",projectDeletedSuccess:"Đã xóa dự án thành công",projectDeleteError:"Không thể xóa dự án",editProjectComingSoon:"Tính năng chỉnh sửa dự án sẽ sớm có",addTaskComingSoon:"Tính năng thêm nhiệm vụ sẽ sớm có",loadingProject:"Đang tải dự án...",failedToLoadProject:"Không thể tải dự án",failedToLoadProjectDescription:"Có lỗi khi tải dự án. Vui lòng thử lại.",projectInfo:"Thông tin dự án",startDate:"Ngày bắt đầu",endDate:"Ngày kết thúc",teamSize:"Kích thước nhóm",recentDocuments:"Tài liệu gần đây",noDocumentsYet:"Chưa có tài liệu",updated:"Đã cập nhật"}},documents:{title:"Tài liệu",description:"Quản lý và tổ chức tài liệu dự án",search:"Tìm kiếm tài liệu...",fileType:"Loại tệp",project:"Dự án",allTypes:"Tất cả loại",allProjects:"Tất cả dự án",pdf:"PDF",word:"Word",wordDocx:"Word (DOCX)",excel:"Excel",excelXlsx:"Excel (XLSX)",jpeg:"JPEG",png:"PNG",upload:"Tải lên",view:"Xem",download:"Tải xuống",edit:"Chỉnh sửa",delete:"Xóa",name:"Tên",type:"Loại",size:"Kích thước",uploadedBy:"Tải lên bởi",uploadedAt:"Tải lên lúc",category:"Danh mục",loadingDocuments:"Đang tải tài liệu...",failedToLoadDocuments:"Không thể tải tài liệu",failedToLoadDocumentsDescription:"Có lỗi khi tải tài liệu. Vui lòng thử lại.",noDocumentsFound:"Không tìm thấy tài liệu",noDocumentsFoundDescription:"Thử điều chỉnh bộ lọc hoặc tải lên tài liệu mới.",deleteDocumentConfirm:"Bạn có chắc chắn muốn xóa tài liệu này?",documentDeletedSuccess:"Đã xóa tài liệu thành công",documentDeleteError:"Không thể xóa tài liệu",downloadDocumentSuccess:"Đã tải xuống tài liệu thành công",downloadDocumentError:"Không thể tải xuống tài liệu",previous:"Trước",next:"Tiếp",showing:"Hiển thị {from} đến {to} trong tổng số {total} kết quả"}}},mg=(e="en")=>new ug({locale:e,fallbackLocale:"en",messages:hg}),ah=p.createContext(void 0),Qt=()=>{const e=p.useContext(ah);if(!e)throw new Error("useI18n phải được sử dụng trong I18nContext.Provider");return e},fg=({children:e,locale:t="en"})=>{const[s]=Z.useState(()=>mg(t)),r=Z.useMemo(()=>({t:(a,i)=>s.t(a,i),setLocale:a=>s.setLocale(a),getLocale:()=>s.getLocale()}),[s]);return n.jsx(ah.Provider,{value:r,children:e})},pg={},al=e=>{let t;const s=new Set,r=(d,h)=>{const m=typeof d=="function"?d(t):d;if(!Object.is(m,t)){const g=t;t=h??(typeof m!="object"||m===null)?m:Object.assign({},t,m),s.forEach(f=>f(t,g))}},a=()=>t,l={setState:r,getState:a,getInitialState:()=>u,subscribe:d=>(s.add(d),()=>s.delete(d)),destroy:()=>{s.clear()}},u=t=e(r,a,l);return l},gg=e=>e?al(e):al;var ii={exports:{}},oi={},ci={exports:{}},li={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var il;function xg(){if(il)return li;il=1;var e=Io();function t(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var s=typeof Object.is=="function"?Object.is:t,r=e.useState,a=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function c(h,m){var g=m(),f=r({inst:{value:g,getSnapshot:m}}),x=f[0].inst,y=f[1];return i(function(){x.value=g,x.getSnapshot=m,l(x)&&y({inst:x})},[h,g,m]),a(function(){return l(x)&&y({inst:x}),h(function(){l(x)&&y({inst:x})})},[h]),o(g),g}function l(h){var m=h.getSnapshot;h=h.value;try{var g=m();return!s(h,g)}catch{return!0}}function u(h,m){return m()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:c;return li.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,li}var ol;function yg(){return ol||(ol=1,ci.exports=xg()),ci.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cl;function vg(){if(cl)return oi;cl=1;var e=Io(),t=yg();function s(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var r=typeof Object.is=="function"?Object.is:s,a=t.useSyncExternalStore,i=e.useRef,o=e.useEffect,c=e.useMemo,l=e.useDebugValue;return oi.useSyncExternalStoreWithSelector=function(u,d,h,m,g){var f=i(null);if(f.current===null){var x={hasValue:!1,value:null};f.current=x}else x=f.current;f=c(function(){function v(O){if(!w){if(w=!0,j=O,O=m(O),g!==void 0&&x.hasValue){var D=x.value;if(g(D,O))return N=D}return N=O}if(D=N,r(j,O))return D;var k=m(O);return g!==void 0&&g(D,k)?(j=O,D):(j=O,N=k)}var w=!1,j,N,T=h===void 0?null:h;return[function(){return v(d())},T===null?void 0:function(){return v(T())}]},[d,h,m,g]);var y=a(u,f[0],f[1]);return o(function(){x.hasValue=!0,x.value=y},[y]),l(y),y},oi}var ll;function bg(){return ll||(ll=1,ii.exports=vg()),ii.exports}var wg=bg();const jg=Bu(wg),ih={},{useDebugValue:Ng}=Z,{useSyncExternalStoreWithSelector:kg}=jg;let dl=!1;const _g=e=>e;function Tg(e,t=_g,s){(ih?"production":void 0)!=="production"&&s&&!dl&&(dl=!0);const r=kg(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,s);return Ng(r),r}const Sg=e=>{const t=typeof e=="function"?gg(e):e,s=(r,a)=>Tg(t,r,a);return Object.assign(s,t),s},oh=e=>Sg;function ch(e,t){return function(){return e.apply(t,arguments)}}const{toString:Cg}=Object.prototype,{getPrototypeOf:Ho}=Object,{iterator:$a,toStringTag:lh}=Symbol,Ba=(e=>t=>{const s=Cg.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Zt=e=>(e=e.toLowerCase(),t=>Ba(t)===e),qa=e=>t=>typeof t===e,{isArray:Lr}=Array,pn=qa("undefined");function Sn(e){return e!==null&&!pn(e)&&e.constructor!==null&&!pn(e.constructor)&&ft(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const dh=Zt("ArrayBuffer");function Ag(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&dh(e.buffer),t}const Pg=qa("string"),ft=qa("function"),uh=qa("number"),Cn=e=>e!==null&&typeof e=="object",Eg=e=>e===!0||e===!1,oa=e=>{if(Ba(e)!=="object")return!1;const t=Ho(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(lh in e)&&!($a in e)},Rg=e=>{if(!Cn(e)||Sn(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Dg=Zt("Date"),Mg=Zt("File"),Og=Zt("Blob"),Fg=Zt("FileList"),Lg=e=>Cn(e)&&ft(e.pipe),Vg=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ft(e.append)&&((t=Ba(e))==="formdata"||t==="object"&&ft(e.toString)&&e.toString()==="[object FormData]"))},Ug=Zt("URLSearchParams"),[Ig,$g,Bg,qg]=["ReadableStream","Request","Response","Headers"].map(Zt),Wg=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function An(e,t,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let r,a;if(typeof e!="object"&&(e=[e]),Lr(e))for(r=0,a=e.length;r<a;r++)t.call(null,e[r],r,e);else{if(Sn(e))return;const i=s?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let c;for(r=0;r<o;r++)c=i[r],t.call(null,e[c],c,e)}}function hh(e,t){if(Sn(e))return null;t=t.toLowerCase();const s=Object.keys(e);let r=s.length,a;for(;r-- >0;)if(a=s[r],t===a.toLowerCase())return a;return null}const zs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,mh=e=>!pn(e)&&e!==zs;function Qi(){const{caseless:e}=mh(this)&&this||{},t={},s=(r,a)=>{const i=e&&hh(t,a)||a;oa(t[i])&&oa(r)?t[i]=Qi(t[i],r):oa(r)?t[i]=Qi({},r):Lr(r)?t[i]=r.slice():t[i]=r};for(let r=0,a=arguments.length;r<a;r++)arguments[r]&&An(arguments[r],s);return t}const zg=(e,t,s,{allOwnKeys:r}={})=>(An(t,(a,i)=>{s&&ft(a)?e[i]=ch(a,s):e[i]=a},{allOwnKeys:r}),e),Kg=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Hg=(e,t,s,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},Qg=(e,t,s,r)=>{let a,i,o;const c={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)o=a[i],(!r||r(o,e,t))&&!c[o]&&(t[o]=e[o],c[o]=!0);e=s!==!1&&Ho(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},Zg=(e,t,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=t.length;const r=e.indexOf(t,s);return r!==-1&&r===s},Xg=e=>{if(!e)return null;if(Lr(e))return e;let t=e.length;if(!uh(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},Yg=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Ho(Uint8Array)),Gg=(e,t)=>{const r=(e&&e[$a]).call(e);let a;for(;(a=r.next())&&!a.done;){const i=a.value;t.call(e,i[0],i[1])}},Jg=(e,t)=>{let s;const r=[];for(;(s=e.exec(t))!==null;)r.push(s);return r},ex=Zt("HTMLFormElement"),tx=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,r,a){return r.toUpperCase()+a}),ul=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),sx=Zt("RegExp"),fh=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),r={};An(s,(a,i)=>{let o;(o=t(a,i,e))!==!1&&(r[i]=o||a)}),Object.defineProperties(e,r)},rx=e=>{fh(e,(t,s)=>{if(ft(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const r=e[s];if(ft(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},nx=(e,t)=>{const s={},r=a=>{a.forEach(i=>{s[i]=!0})};return Lr(e)?r(e):r(String(e).split(t)),s},ax=()=>{},ix=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function ox(e){return!!(e&&ft(e.append)&&e[lh]==="FormData"&&e[$a])}const cx=e=>{const t=new Array(10),s=(r,a)=>{if(Cn(r)){if(t.indexOf(r)>=0)return;if(Sn(r))return r;if(!("toJSON"in r)){t[a]=r;const i=Lr(r)?[]:{};return An(r,(o,c)=>{const l=s(o,a+1);!pn(l)&&(i[c]=l)}),t[a]=void 0,i}}return r};return s(e,0)},lx=Zt("AsyncFunction"),dx=e=>e&&(Cn(e)||ft(e))&&ft(e.then)&&ft(e.catch),ph=((e,t)=>e?setImmediate:t?((s,r)=>(zs.addEventListener("message",({source:a,data:i})=>{a===zs&&i===s&&r.length&&r.shift()()},!1),a=>{r.push(a),zs.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",ft(zs.postMessage)),ux=typeof queueMicrotask<"u"?queueMicrotask.bind(zs):typeof process<"u"&&process.nextTick||ph,hx=e=>e!=null&&ft(e[$a]),C={isArray:Lr,isArrayBuffer:dh,isBuffer:Sn,isFormData:Vg,isArrayBufferView:Ag,isString:Pg,isNumber:uh,isBoolean:Eg,isObject:Cn,isPlainObject:oa,isEmptyObject:Rg,isReadableStream:Ig,isRequest:$g,isResponse:Bg,isHeaders:qg,isUndefined:pn,isDate:Dg,isFile:Mg,isBlob:Og,isRegExp:sx,isFunction:ft,isStream:Lg,isURLSearchParams:Ug,isTypedArray:Yg,isFileList:Fg,forEach:An,merge:Qi,extend:zg,trim:Wg,stripBOM:Kg,inherits:Hg,toFlatObject:Qg,kindOf:Ba,kindOfTest:Zt,endsWith:Zg,toArray:Xg,forEachEntry:Gg,matchAll:Jg,isHTMLForm:ex,hasOwnProperty:ul,hasOwnProp:ul,reduceDescriptors:fh,freezeMethods:rx,toObjectSet:nx,toCamelCase:tx,noop:ax,toFiniteNumber:ix,findKey:hh,global:zs,isContextDefined:mh,isSpecCompliantForm:ox,toJSONObject:cx,isAsyncFn:lx,isThenable:dx,setImmediate:ph,asap:ux,isIterable:hx};function ce(e,t,s,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}C.inherits(ce,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:C.toJSONObject(this.config),code:this.code,status:this.status}}});const gh=ce.prototype,xh={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{xh[e]={value:e}});Object.defineProperties(ce,xh);Object.defineProperty(gh,"isAxiosError",{value:!0});ce.from=(e,t,s,r,a,i)=>{const o=Object.create(gh);return C.toFlatObject(e,o,function(l){return l!==Error.prototype},c=>c!=="isAxiosError"),ce.call(o,e.message,t,s,r,a),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const mx=null;function Zi(e){return C.isPlainObject(e)||C.isArray(e)}function yh(e){return C.endsWith(e,"[]")?e.slice(0,-2):e}function hl(e,t,s){return e?e.concat(t).map(function(a,i){return a=yh(a),!s&&i?"["+a+"]":a}).join(s?".":""):t}function fx(e){return C.isArray(e)&&!e.some(Zi)}const px=C.toFlatObject(C,{},null,function(t){return/^is[A-Z]/.test(t)});function Wa(e,t,s){if(!C.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,s=C.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,y){return!C.isUndefined(y[x])});const r=s.metaTokens,a=s.visitor||d,i=s.dots,o=s.indexes,l=(s.Blob||typeof Blob<"u"&&Blob)&&C.isSpecCompliantForm(t);if(!C.isFunction(a))throw new TypeError("visitor must be a function");function u(f){if(f===null)return"";if(C.isDate(f))return f.toISOString();if(C.isBoolean(f))return f.toString();if(!l&&C.isBlob(f))throw new ce("Blob is not supported. Use a Buffer instead.");return C.isArrayBuffer(f)||C.isTypedArray(f)?l&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function d(f,x,y){let v=f;if(f&&!y&&typeof f=="object"){if(C.endsWith(x,"{}"))x=r?x:x.slice(0,-2),f=JSON.stringify(f);else if(C.isArray(f)&&fx(f)||(C.isFileList(f)||C.endsWith(x,"[]"))&&(v=C.toArray(f)))return x=yh(x),v.forEach(function(j,N){!(C.isUndefined(j)||j===null)&&t.append(o===!0?hl([x],N,i):o===null?x:x+"[]",u(j))}),!1}return Zi(f)?!0:(t.append(hl(y,x,i),u(f)),!1)}const h=[],m=Object.assign(px,{defaultVisitor:d,convertValue:u,isVisitable:Zi});function g(f,x){if(!C.isUndefined(f)){if(h.indexOf(f)!==-1)throw Error("Circular reference detected in "+x.join("."));h.push(f),C.forEach(f,function(v,w){(!(C.isUndefined(v)||v===null)&&a.call(t,v,C.isString(w)?w.trim():w,x,m))===!0&&g(v,x?x.concat(w):[w])}),h.pop()}}if(!C.isObject(e))throw new TypeError("data must be an object");return g(e),t}function ml(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Qo(e,t){this._pairs=[],e&&Wa(e,this,t)}const vh=Qo.prototype;vh.append=function(t,s){this._pairs.push([t,s])};vh.toString=function(t){const s=t?function(r){return t.call(this,r,ml)}:ml;return this._pairs.map(function(a){return s(a[0])+"="+s(a[1])},"").join("&")};function gx(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function bh(e,t,s){if(!t)return e;const r=s&&s.encode||gx;C.isFunction(s)&&(s={serialize:s});const a=s&&s.serialize;let i;if(a?i=a(t,s):i=C.isURLSearchParams(t)?t.toString():new Qo(t,s).toString(r),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class fl{constructor(){this.handlers=[]}use(t,s,r){return this.handlers.push({fulfilled:t,rejected:s,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){C.forEach(this.handlers,function(r){r!==null&&t(r)})}}const wh={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},xx=typeof URLSearchParams<"u"?URLSearchParams:Qo,yx=typeof FormData<"u"?FormData:null,vx=typeof Blob<"u"?Blob:null,bx={isBrowser:!0,classes:{URLSearchParams:xx,FormData:yx,Blob:vx},protocols:["http","https","file","blob","url","data"]},Zo=typeof window<"u"&&typeof document<"u",Xi=typeof navigator=="object"&&navigator||void 0,wx=Zo&&(!Xi||["ReactNative","NativeScript","NS"].indexOf(Xi.product)<0),jx=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Nx=Zo&&window.location.href||"http://localhost",kx=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Zo,hasStandardBrowserEnv:wx,hasStandardBrowserWebWorkerEnv:jx,navigator:Xi,origin:Nx},Symbol.toStringTag,{value:"Module"})),et={...kx,...bx};function _x(e,t){return Wa(e,new et.classes.URLSearchParams,{visitor:function(s,r,a,i){return et.isNode&&C.isBuffer(s)?(this.append(r,s.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function Tx(e){return C.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Sx(e){const t={},s=Object.keys(e);let r;const a=s.length;let i;for(r=0;r<a;r++)i=s[r],t[i]=e[i];return t}function jh(e){function t(s,r,a,i){let o=s[i++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),l=i>=s.length;return o=!o&&C.isArray(a)?a.length:o,l?(C.hasOwnProp(a,o)?a[o]=[a[o],r]:a[o]=r,!c):((!a[o]||!C.isObject(a[o]))&&(a[o]=[]),t(s,r,a[o],i)&&C.isArray(a[o])&&(a[o]=Sx(a[o])),!c)}if(C.isFormData(e)&&C.isFunction(e.entries)){const s={};return C.forEachEntry(e,(r,a)=>{t(Tx(r),a,s,0)}),s}return null}function Cx(e,t,s){if(C.isString(e))try{return(t||JSON.parse)(e),C.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(s||JSON.stringify)(e)}const Pn={transitional:wh,adapter:["xhr","http","fetch"],transformRequest:[function(t,s){const r=s.getContentType()||"",a=r.indexOf("application/json")>-1,i=C.isObject(t);if(i&&C.isHTMLForm(t)&&(t=new FormData(t)),C.isFormData(t))return a?JSON.stringify(jh(t)):t;if(C.isArrayBuffer(t)||C.isBuffer(t)||C.isStream(t)||C.isFile(t)||C.isBlob(t)||C.isReadableStream(t))return t;if(C.isArrayBufferView(t))return t.buffer;if(C.isURLSearchParams(t))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return _x(t,this.formSerializer).toString();if((c=C.isFileList(t))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Wa(c?{"files[]":t}:t,l&&new l,this.formSerializer)}}return i||a?(s.setContentType("application/json",!1),Cx(t)):t}],transformResponse:[function(t){const s=this.transitional||Pn.transitional,r=s&&s.forcedJSONParsing,a=this.responseType==="json";if(C.isResponse(t)||C.isReadableStream(t))return t;if(t&&C.isString(t)&&(r&&!this.responseType||a)){const o=!(s&&s.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(c){if(o)throw c.name==="SyntaxError"?ce.from(c,ce.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:et.classes.FormData,Blob:et.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};C.forEach(["delete","get","head","post","put","patch"],e=>{Pn.headers[e]={}});const Ax=C.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Px=e=>{const t={};let s,r,a;return e&&e.split(`
`).forEach(function(o){a=o.indexOf(":"),s=o.substring(0,a).trim().toLowerCase(),r=o.substring(a+1).trim(),!(!s||t[s]&&Ax[s])&&(s==="set-cookie"?t[s]?t[s].push(r):t[s]=[r]:t[s]=t[s]?t[s]+", "+r:r)}),t},pl=Symbol("internals");function Xr(e){return e&&String(e).trim().toLowerCase()}function ca(e){return e===!1||e==null?e:C.isArray(e)?e.map(ca):String(e)}function Ex(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=s.exec(e);)t[r[1]]=r[2];return t}const Rx=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function di(e,t,s,r,a){if(C.isFunction(r))return r.call(this,t,s);if(a&&(t=s),!!C.isString(t)){if(C.isString(r))return t.indexOf(r)!==-1;if(C.isRegExp(r))return r.test(t)}}function Dx(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,s,r)=>s.toUpperCase()+r)}function Mx(e,t){const s=C.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+s,{value:function(a,i,o){return this[r].call(this,t,a,i,o)},configurable:!0})})}let pt=class{constructor(t){t&&this.set(t)}set(t,s,r){const a=this;function i(c,l,u){const d=Xr(l);if(!d)throw new Error("header name must be a non-empty string");const h=C.findKey(a,d);(!h||a[h]===void 0||u===!0||u===void 0&&a[h]!==!1)&&(a[h||l]=ca(c))}const o=(c,l)=>C.forEach(c,(u,d)=>i(u,d,l));if(C.isPlainObject(t)||t instanceof this.constructor)o(t,s);else if(C.isString(t)&&(t=t.trim())&&!Rx(t))o(Px(t),s);else if(C.isObject(t)&&C.isIterable(t)){let c={},l,u;for(const d of t){if(!C.isArray(d))throw TypeError("Object iterator must return a key-value pair");c[u=d[0]]=(l=c[u])?C.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}o(c,s)}else t!=null&&i(s,t,r);return this}get(t,s){if(t=Xr(t),t){const r=C.findKey(this,t);if(r){const a=this[r];if(!s)return a;if(s===!0)return Ex(a);if(C.isFunction(s))return s.call(this,a,r);if(C.isRegExp(s))return s.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,s){if(t=Xr(t),t){const r=C.findKey(this,t);return!!(r&&this[r]!==void 0&&(!s||di(this,this[r],r,s)))}return!1}delete(t,s){const r=this;let a=!1;function i(o){if(o=Xr(o),o){const c=C.findKey(r,o);c&&(!s||di(r,r[c],c,s))&&(delete r[c],a=!0)}}return C.isArray(t)?t.forEach(i):i(t),a}clear(t){const s=Object.keys(this);let r=s.length,a=!1;for(;r--;){const i=s[r];(!t||di(this,this[i],i,t,!0))&&(delete this[i],a=!0)}return a}normalize(t){const s=this,r={};return C.forEach(this,(a,i)=>{const o=C.findKey(r,i);if(o){s[o]=ca(a),delete s[i];return}const c=t?Dx(i):String(i).trim();c!==i&&delete s[i],s[c]=ca(a),r[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const s=Object.create(null);return C.forEach(this,(r,a)=>{r!=null&&r!==!1&&(s[a]=t&&C.isArray(r)?r.join(", "):r)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,s])=>t+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...s){const r=new this(t);return s.forEach(a=>r.set(a)),r}static accessor(t){const r=(this[pl]=this[pl]={accessors:{}}).accessors,a=this.prototype;function i(o){const c=Xr(o);r[c]||(Mx(a,o),r[c]=!0)}return C.isArray(t)?t.forEach(i):i(t),this}};pt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);C.reduceDescriptors(pt.prototype,({value:e},t)=>{let s=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[s]=r}}});C.freezeMethods(pt);function ui(e,t){const s=this||Pn,r=t||s,a=pt.from(r.headers);let i=r.data;return C.forEach(e,function(c){i=c.call(s,i,a.normalize(),t?t.status:void 0)}),a.normalize(),i}function Nh(e){return!!(e&&e.__CANCEL__)}function Vr(e,t,s){ce.call(this,e??"canceled",ce.ERR_CANCELED,t,s),this.name="CanceledError"}C.inherits(Vr,ce,{__CANCEL__:!0});function kh(e,t,s){const r=s.config.validateStatus;!s.status||!r||r(s.status)?e(s):t(new ce("Request failed with status code "+s.status,[ce.ERR_BAD_REQUEST,ce.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function Ox(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Fx(e,t){e=e||10;const s=new Array(e),r=new Array(e);let a=0,i=0,o;return t=t!==void 0?t:1e3,function(l){const u=Date.now(),d=r[i];o||(o=u),s[a]=l,r[a]=u;let h=i,m=0;for(;h!==a;)m+=s[h++],h=h%e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),u-o<t)return;const g=d&&u-d;return g?Math.round(m*1e3/g):void 0}}function Lx(e,t){let s=0,r=1e3/t,a,i;const o=(u,d=Date.now())=>{s=d,a=null,i&&(clearTimeout(i),i=null),e(...u)};return[(...u)=>{const d=Date.now(),h=d-s;h>=r?o(u,d):(a=u,i||(i=setTimeout(()=>{i=null,o(a)},r-h)))},()=>a&&o(a)]}const wa=(e,t,s=3)=>{let r=0;const a=Fx(50,250);return Lx(i=>{const o=i.loaded,c=i.lengthComputable?i.total:void 0,l=o-r,u=a(l),d=o<=c;r=o;const h={loaded:o,total:c,progress:c?o/c:void 0,bytes:l,rate:u||void 0,estimated:u&&c&&d?(c-o)/u:void 0,event:i,lengthComputable:c!=null,[t?"download":"upload"]:!0};e(h)},s)},gl=(e,t)=>{const s=e!=null;return[r=>t[0]({lengthComputable:s,total:e,loaded:r}),t[1]]},xl=e=>(...t)=>C.asap(()=>e(...t)),Vx=et.hasStandardBrowserEnv?((e,t)=>s=>(s=new URL(s,et.origin),e.protocol===s.protocol&&e.host===s.host&&(t||e.port===s.port)))(new URL(et.origin),et.navigator&&/(msie|trident)/i.test(et.navigator.userAgent)):()=>!0,Ux=et.hasStandardBrowserEnv?{write(e,t,s,r,a,i){const o=[e+"="+encodeURIComponent(t)];C.isNumber(s)&&o.push("expires="+new Date(s).toGMTString()),C.isString(r)&&o.push("path="+r),C.isString(a)&&o.push("domain="+a),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Ix(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function $x(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function _h(e,t,s){let r=!Ix(t);return e&&(r||s==!1)?$x(e,t):t}const yl=e=>e instanceof pt?{...e}:e;function tr(e,t){t=t||{};const s={};function r(u,d,h,m){return C.isPlainObject(u)&&C.isPlainObject(d)?C.merge.call({caseless:m},u,d):C.isPlainObject(d)?C.merge({},d):C.isArray(d)?d.slice():d}function a(u,d,h,m){if(C.isUndefined(d)){if(!C.isUndefined(u))return r(void 0,u,h,m)}else return r(u,d,h,m)}function i(u,d){if(!C.isUndefined(d))return r(void 0,d)}function o(u,d){if(C.isUndefined(d)){if(!C.isUndefined(u))return r(void 0,u)}else return r(void 0,d)}function c(u,d,h){if(h in t)return r(u,d);if(h in e)return r(void 0,u)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(u,d,h)=>a(yl(u),yl(d),h,!0)};return C.forEach(Object.keys({...e,...t}),function(d){const h=l[d]||a,m=h(e[d],t[d],d);C.isUndefined(m)&&h!==c||(s[d]=m)}),s}const Th=e=>{const t=tr({},e);let{data:s,withXSRFToken:r,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:c}=t;t.headers=o=pt.from(o),t.url=bh(_h(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let l;if(C.isFormData(s)){if(et.hasStandardBrowserEnv||et.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[u,...d]=l?l.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...d].join("; "))}}if(et.hasStandardBrowserEnv&&(r&&C.isFunction(r)&&(r=r(t)),r||r!==!1&&Vx(t.url))){const u=a&&i&&Ux.read(i);u&&o.set(a,u)}return t},Bx=typeof XMLHttpRequest<"u",qx=Bx&&function(e){return new Promise(function(s,r){const a=Th(e);let i=a.data;const o=pt.from(a.headers).normalize();let{responseType:c,onUploadProgress:l,onDownloadProgress:u}=a,d,h,m,g,f;function x(){g&&g(),f&&f(),a.cancelToken&&a.cancelToken.unsubscribe(d),a.signal&&a.signal.removeEventListener("abort",d)}let y=new XMLHttpRequest;y.open(a.method.toUpperCase(),a.url,!0),y.timeout=a.timeout;function v(){if(!y)return;const j=pt.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),T={data:!c||c==="text"||c==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:j,config:e,request:y};kh(function(D){s(D),x()},function(D){r(D),x()},T),y=null}"onloadend"in y?y.onloadend=v:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(v)},y.onabort=function(){y&&(r(new ce("Request aborted",ce.ECONNABORTED,e,y)),y=null)},y.onerror=function(){r(new ce("Network Error",ce.ERR_NETWORK,e,y)),y=null},y.ontimeout=function(){let N=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const T=a.transitional||wh;a.timeoutErrorMessage&&(N=a.timeoutErrorMessage),r(new ce(N,T.clarifyTimeoutError?ce.ETIMEDOUT:ce.ECONNABORTED,e,y)),y=null},i===void 0&&o.setContentType(null),"setRequestHeader"in y&&C.forEach(o.toJSON(),function(N,T){y.setRequestHeader(T,N)}),C.isUndefined(a.withCredentials)||(y.withCredentials=!!a.withCredentials),c&&c!=="json"&&(y.responseType=a.responseType),u&&([m,f]=wa(u,!0),y.addEventListener("progress",m)),l&&y.upload&&([h,g]=wa(l),y.upload.addEventListener("progress",h),y.upload.addEventListener("loadend",g)),(a.cancelToken||a.signal)&&(d=j=>{y&&(r(!j||j.type?new Vr(null,e,y):j),y.abort(),y=null)},a.cancelToken&&a.cancelToken.subscribe(d),a.signal&&(a.signal.aborted?d():a.signal.addEventListener("abort",d)));const w=Ox(a.url);if(w&&et.protocols.indexOf(w)===-1){r(new ce("Unsupported protocol "+w+":",ce.ERR_BAD_REQUEST,e));return}y.send(i||null)})},Wx=(e,t)=>{const{length:s}=e=e?e.filter(Boolean):[];if(t||s){let r=new AbortController,a;const i=function(u){if(!a){a=!0,c();const d=u instanceof Error?u:this.reason;r.abort(d instanceof ce?d:new Vr(d instanceof Error?d.message:d))}};let o=t&&setTimeout(()=>{o=null,i(new ce(`timeout ${t} of ms exceeded`,ce.ETIMEDOUT))},t);const c=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),e=null)};e.forEach(u=>u.addEventListener("abort",i));const{signal:l}=r;return l.unsubscribe=()=>C.asap(c),l}},zx=function*(e,t){let s=e.byteLength;if(s<t){yield e;return}let r=0,a;for(;r<s;)a=r+t,yield e.slice(r,a),r=a},Kx=async function*(e,t){for await(const s of Hx(e))yield*zx(s,t)},Hx=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:s,value:r}=await t.read();if(s)break;yield r}}finally{await t.cancel()}},vl=(e,t,s,r)=>{const a=Kx(e,t);let i=0,o,c=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:u,value:d}=await a.next();if(u){c(),l.close();return}let h=d.byteLength;if(s){let m=i+=h;s(m)}l.enqueue(new Uint8Array(d))}catch(u){throw c(u),u}},cancel(l){return c(l),a.return()}},{highWaterMark:2})},za=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Sh=za&&typeof ReadableStream=="function",Qx=za&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Ch=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Zx=Sh&&Ch(()=>{let e=!1;const t=new Request(et.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),bl=64*1024,Yi=Sh&&Ch(()=>C.isReadableStream(new Response("").body)),ja={stream:Yi&&(e=>e.body)};za&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!ja[t]&&(ja[t]=C.isFunction(e[t])?s=>s[t]():(s,r)=>{throw new ce(`Response type '${t}' is not supported`,ce.ERR_NOT_SUPPORT,r)})})})(new Response);const Xx=async e=>{if(e==null)return 0;if(C.isBlob(e))return e.size;if(C.isSpecCompliantForm(e))return(await new Request(et.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(C.isArrayBufferView(e)||C.isArrayBuffer(e))return e.byteLength;if(C.isURLSearchParams(e)&&(e=e+""),C.isString(e))return(await Qx(e)).byteLength},Yx=async(e,t)=>{const s=C.toFiniteNumber(e.getContentLength());return s??Xx(t)},Gx=za&&(async e=>{let{url:t,method:s,data:r,signal:a,cancelToken:i,timeout:o,onDownloadProgress:c,onUploadProgress:l,responseType:u,headers:d,withCredentials:h="same-origin",fetchOptions:m}=Th(e);u=u?(u+"").toLowerCase():"text";let g=Wx([a,i&&i.toAbortSignal()],o),f;const x=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let y;try{if(l&&Zx&&s!=="get"&&s!=="head"&&(y=await Yx(d,r))!==0){let T=new Request(t,{method:"POST",body:r,duplex:"half"}),O;if(C.isFormData(r)&&(O=T.headers.get("content-type"))&&d.setContentType(O),T.body){const[D,k]=gl(y,wa(xl(l)));r=vl(T.body,bl,D,k)}}C.isString(h)||(h=h?"include":"omit");const v="credentials"in Request.prototype;f=new Request(t,{...m,signal:g,method:s.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:v?h:void 0});let w=await fetch(f,m);const j=Yi&&(u==="stream"||u==="response");if(Yi&&(c||j&&x)){const T={};["status","statusText","headers"].forEach(z=>{T[z]=w[z]});const O=C.toFiniteNumber(w.headers.get("content-length")),[D,k]=c&&gl(O,wa(xl(c),!0))||[];w=new Response(vl(w.body,bl,D,()=>{k&&k(),x&&x()}),T)}u=u||"text";let N=await ja[C.findKey(ja,u)||"text"](w,e);return!j&&x&&x(),await new Promise((T,O)=>{kh(T,O,{data:N,headers:pt.from(w.headers),status:w.status,statusText:w.statusText,config:e,request:f})})}catch(v){throw x&&x(),v&&v.name==="TypeError"&&/Load failed|fetch/i.test(v.message)?Object.assign(new ce("Network Error",ce.ERR_NETWORK,e,f),{cause:v.cause||v}):ce.from(v,v&&v.code,e,f)}}),Gi={http:mx,xhr:qx,fetch:Gx};C.forEach(Gi,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const wl=e=>`- ${e}`,Jx=e=>C.isFunction(e)||e===null||e===!1,Ah={getAdapter:e=>{e=C.isArray(e)?e:[e];const{length:t}=e;let s,r;const a={};for(let i=0;i<t;i++){s=e[i];let o;if(r=s,!Jx(s)&&(r=Gi[(o=String(s)).toLowerCase()],r===void 0))throw new ce(`Unknown adapter '${o}'`);if(r)break;a[o||"#"+i]=r}if(!r){const i=Object.entries(a).map(([c,l])=>`adapter ${c} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=t?i.length>1?`since :
`+i.map(wl).join(`
`):" "+wl(i[0]):"as no adapter specified";throw new ce("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Gi};function hi(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Vr(null,e)}function jl(e){return hi(e),e.headers=pt.from(e.headers),e.data=ui.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Ah.getAdapter(e.adapter||Pn.adapter)(e).then(function(r){return hi(e),r.data=ui.call(e,e.transformResponse,r),r.headers=pt.from(r.headers),r},function(r){return Nh(r)||(hi(e),r&&r.response&&(r.response.data=ui.call(e,e.transformResponse,r.response),r.response.headers=pt.from(r.response.headers))),Promise.reject(r)})}const Ph="1.11.0",Ka={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ka[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Nl={};Ka.transitional=function(t,s,r){function a(i,o){return"[Axios v"+Ph+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,c)=>{if(t===!1)throw new ce(a(o," has been removed"+(s?" in "+s:"")),ce.ERR_DEPRECATED);return s&&!Nl[o]&&(Nl[o]=!0),t?t(i,o,c):!0}};Ka.spelling=function(t){return(s,r)=>!0};function ey(e,t,s){if(typeof e!="object")throw new ce("options must be an object",ce.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let a=r.length;for(;a-- >0;){const i=r[a],o=t[i];if(o){const c=e[i],l=c===void 0||o(c,i,e);if(l!==!0)throw new ce("option "+i+" must be "+l,ce.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new ce("Unknown option "+i,ce.ERR_BAD_OPTION)}}const la={assertOptions:ey,validators:Ka},Jt=la.validators;let Xs=class{constructor(t){this.defaults=t||{},this.interceptors={request:new fl,response:new fl}}async request(t,s){try{return await this._request(t,s)}catch(r){if(r instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(t,s){typeof t=="string"?(s=s||{},s.url=t):s=t||{},s=tr(this.defaults,s);const{transitional:r,paramsSerializer:a,headers:i}=s;r!==void 0&&la.assertOptions(r,{silentJSONParsing:Jt.transitional(Jt.boolean),forcedJSONParsing:Jt.transitional(Jt.boolean),clarifyTimeoutError:Jt.transitional(Jt.boolean)},!1),a!=null&&(C.isFunction(a)?s.paramsSerializer={serialize:a}:la.assertOptions(a,{encode:Jt.function,serialize:Jt.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),la.assertOptions(s,{baseUrl:Jt.spelling("baseURL"),withXsrfToken:Jt.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let o=i&&C.merge(i.common,i[s.method]);i&&C.forEach(["delete","get","head","post","put","patch","common"],f=>{delete i[f]}),s.headers=pt.concat(o,i);const c=[];let l=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(s)===!1||(l=l&&x.synchronous,c.unshift(x.fulfilled,x.rejected))});const u=[];this.interceptors.response.forEach(function(x){u.push(x.fulfilled,x.rejected)});let d,h=0,m;if(!l){const f=[jl.bind(this),void 0];for(f.unshift(...c),f.push(...u),m=f.length,d=Promise.resolve(s);h<m;)d=d.then(f[h++],f[h++]);return d}m=c.length;let g=s;for(h=0;h<m;){const f=c[h++],x=c[h++];try{g=f(g)}catch(y){x.call(this,y);break}}try{d=jl.call(this,g)}catch(f){return Promise.reject(f)}for(h=0,m=u.length;h<m;)d=d.then(u[h++],u[h++]);return d}getUri(t){t=tr(this.defaults,t);const s=_h(t.baseURL,t.url,t.allowAbsoluteUrls);return bh(s,t.params,t.paramsSerializer)}};C.forEach(["delete","get","head","options"],function(t){Xs.prototype[t]=function(s,r){return this.request(tr(r||{},{method:t,url:s,data:(r||{}).data}))}});C.forEach(["post","put","patch"],function(t){function s(r){return function(i,o,c){return this.request(tr(c||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Xs.prototype[t]=s(),Xs.prototype[t+"Form"]=s(!0)});let ty=class Eh{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(i){s=i});const r=this;this.promise.then(a=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](a);r._listeners=null}),this.promise.then=a=>{let i;const o=new Promise(c=>{r.subscribe(c),i=c}).then(a);return o.cancel=function(){r.unsubscribe(i)},o},t(function(i,o,c){r.reason||(r.reason=new Vr(i,o,c),s(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const s=this._listeners.indexOf(t);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const t=new AbortController,s=r=>{t.abort(r)};return this.subscribe(s),t.signal.unsubscribe=()=>this.unsubscribe(s),t.signal}static source(){let t;return{token:new Eh(function(a){t=a}),cancel:t}}};function sy(e){return function(s){return e.apply(null,s)}}function ry(e){return C.isObject(e)&&e.isAxiosError===!0}const Ji={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ji).forEach(([e,t])=>{Ji[t]=e});function Rh(e){const t=new Xs(e),s=ch(Xs.prototype.request,t);return C.extend(s,Xs.prototype,t,{allOwnKeys:!0}),C.extend(s,t,null,{allOwnKeys:!0}),s.create=function(a){return Rh(tr(e,a))},s}const Se=Rh(Pn);Se.Axios=Xs;Se.CanceledError=Vr;Se.CancelToken=ty;Se.isCancel=Nh;Se.VERSION=Ph;Se.toFormData=Wa;Se.AxiosError=ce;Se.Cancel=Se.CanceledError;Se.all=function(t){return Promise.all(t)};Se.spread=sy;Se.isAxiosError=ry;Se.mergeConfig=tr;Se.AxiosHeaders=pt;Se.formToJSON=e=>jh(C.isHTMLForm(e)?new FormData(e):e);Se.getAdapter=Ah.getAdapter;Se.HttpStatusCode=Ji;Se.default=Se;const{Axios:NS,AxiosError:kS,CanceledError:_S,isCancel:TS,CancelToken:SS,VERSION:CS,all:AS,Cancel:PS,isAxiosError:ny,spread:ES,toFormData:RS,AxiosHeaders:DS,HttpStatusCode:MS,formToJSON:OS,getAdapter:FS,mergeConfig:LS}=Se;class kl extends Error{status;code;details;constructor(t,s,r,a){super(t),this.name="ApiError",this.status=s,this.code=r,this.details=a}}const ay=()=>window.Laravel?.locale??document.documentElement.lang??"en",iy=()=>window.Laravel?.tenant?.id,oy=()=>window.Laravel?.csrfToken??document.querySelector('meta[name="csrf-token"]')?.content??void 0,cy=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`req_${Date.now()}`;let eo=null;if(typeof window<"u"){const e=window.localStorage.getItem("auth_token");e&&(eo=e)}const ly=e=>{if(e.headers||(e.headers={}),typeof window<"u"){const r=window.localStorage.getItem("auth_token");r&&(e.headers.Authorization=`Bearer ${r}`)}else eo&&(e.headers.Authorization=`Bearer ${eo}`);const t=iy();t&&(e.headers["X-Tenant-ID"]=t);const s=oy();return s&&(e.headers["X-CSRF-TOKEN"]=s),e.headers["X-Request-ID"]=cy(),e.headers["Accept-Language"]=ay(),e.headers["X-Frontend-Theme"]=document.documentElement.dataset.theme??"light",e},G=e=>{if(e.isAxiosError){const t=e,s=t.response?.status??500,r=t.response?.data,a=r?.message??r?.error?.message??t.message??"Đã xảy ra lỗi trong quá trình gọi API",i=r?.error?.code??t.code??void 0,o=r?.errors??r;return new kl(a,s,i,o)}return new kl(e.message||"Lỗi không xác định",500)},dy="/api/v1",Ha=(e={})=>{const t=Se.create({baseURL:e.baseURL??dy,timeout:e.timeout??12e3,headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest",...e.headers??{}},withCredentials:!0});return t.interceptors.request.use(ly),t.interceptors.response.use(s=>s,s=>Promise.reject(G(s))),t},$=Ha(),Ge={get:async(e,t)=>$.get(e,t).then(s=>s.data),post:async(e,t,s)=>$.post(e,t,s).then(r=>r.data),put:async(e,t,s)=>$.put(e,t,s).then(r=>r.data),patch:async(e,t,s)=>$.patch(e,t,s).then(r=>r.data),delete:async(e,t)=>$.delete(e,t).then(s=>s.data)},cr=Ha(),_l={async getCsrfToken(){try{let t=(await Se.get("/api/auth/csrf-token",{withCredentials:!0,headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}})).data;if(typeof t=="string"){const s=t.match(/\{[\s\S]*\}/);if(s)try{t=JSON.parse(s[0])}catch{}}if(t?.data?.csrf_token)return t.data.csrf_token;if(t?.csrf_token)return t.csrf_token;throw t?.error?new Error(t.error.message||"Failed to get CSRF token"):new Error(`Unexpected CSRF token response format. Response: ${JSON.stringify(t)}`)}catch(e){throw e instanceof Error&&e.name==="ApiError"?e:G(e)}},async login(e){try{const t=await this.getCsrfToken(),s=await cr.post("/auth/login",{email:e.email,password:e.password,remember:e.remember??!1},{headers:{"X-Web-Login":"true","X-CSRF-TOKEN":t}});let r;if(s.data?.data)r=s.data.data;else if(s.data?.token)r=s.data;else throw new Error("Unexpected login response format");if(r.token&&typeof window<"u"){window.localStorage.setItem("auth_token",r.token);const a=window.localStorage.getItem("auth_token");r.token}return r}catch(t){throw G(t)}},async logout(){try{await cr.post("/auth/logout"),typeof window<"u"&&window.localStorage.removeItem("auth_token")}catch(e){throw typeof window<"u"&&window.localStorage.removeItem("auth_token"),G(e)}},async getMe(){try{const e=await Se.get("/api/v1/me",{withCredentials:!0,headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":typeof window<"u"?window.Laravel?.csrfToken??document.querySelector('meta[name="csrf-token"]')?.content:void 0,...typeof window<"u"&&window.localStorage.getItem("auth_token")?{Authorization:`Bearer ${window.localStorage.getItem("auth_token")}`}:{}}});return e.data?.data?.user?e.data.data.user:e.data?.user?e.data.user:e.data}catch(e){throw G(e)}},async getPermissions(){try{const e=await Se.get("/api/auth/permissions",{withCredentials:!0,headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":typeof window<"u"?window.Laravel?.csrfToken??document.querySelector('meta[name="csrf-token"]')?.content:void 0,...typeof window<"u"&&window.localStorage.getItem("auth_token")?{Authorization:`Bearer ${window.localStorage.getItem("auth_token")}`}:{}}});return e.data?.data||e.data}catch(e){throw G(e)}},async forgotPassword(e){try{const t=await cr.post("/auth/password/forgot",{email:e},{headers:{"X-Requested-With":"XMLHttpRequest"}});if(t.data?.data?.message)return{message:t.data.data.message};if(t.data?.message)return{message:t.data.message};throw new Error("Unexpected response format")}catch(t){throw G(t)}},async resetPassword(e){try{const t=await cr.post("/auth/password/reset",e,{headers:{"X-Requested-With":"XMLHttpRequest"}});if(t.data?.data?.message)return{message:t.data.data.message};if(t.data?.message)return{message:t.data.message};throw new Error("Unexpected response format")}catch(t){throw G(t)}},async register(e){try{const t=await cr.post("/auth/register",e,{headers:{"X-Requested-With":"XMLHttpRequest"}});if(t.data?.data)return t.data.data;throw new Error("Unexpected response format")}catch(t){throw G(t)}},async changePassword(e){try{const t=await cr.post("/auth/password/change",e,{headers:{"X-Requested-With":"XMLHttpRequest"}});if(t.data?.data?.message)return{message:t.data.data.message};if(t.data?.message)return{message:t.data.message};throw new Error("Unexpected response format")}catch(t){throw G(t)}}};function Dt(e,t){try{window.__e2e_logs=window.__e2e_logs||[],window.__e2e_logs.push(t?`${e} ${JSON.stringify(t)}`:e)}catch{}}const uy=()=>{if(typeof window>"u")return{user:null,isAuthenticated:!1};try{const e=window.localStorage.getItem("zena-auth-storage");if(e){const t=JSON.parse(e),s=Array.isArray(t.currentTenantPermissions)?t.currentTenantPermissions:[];return{user:t.user||null,isAuthenticated:t.isAuthenticated||!1,currentTenantRole:t.currentTenantRole??null,currentTenantPermissions:s}}}catch{}return{user:null,isAuthenticated:!1}},hr=e=>{if(typeof window>"u"){Dt("[AuthStore saveToStorage] Skipping - window is undefined");return}try{const t={user:e.user,isAuthenticated:e.isAuthenticated,currentTenantRole:e.currentTenantRole??null,currentTenantPermissions:e.currentTenantPermissions??[]};Dt("[AuthStore saveToStorage] Saving to localStorage",{hasUser:!!t.user,isAuthenticated:t.isAuthenticated,currentTenantRole:t.currentTenantRole,currentTenantPermissionsLength:t.currentTenantPermissions.length,currentTenantPermissions:t.currentTenantPermissions}),window.localStorage.setItem("zena-auth-storage",JSON.stringify(t)),Dt("[AuthStore saveToStorage] Successfully saved to localStorage");const s=window.localStorage.getItem("zena-auth-storage");if(s){const r=JSON.parse(s);Dt("[AuthStore saveToStorage] Verification - saved permissions length",{length:r.currentTenantPermissions?.length||0})}}catch(t){Dt("[AuthStore saveToStorage] Failed to save auth to storage",{error:String(t)})}},Tl=e=>{try{hr(e),Dt("[AuthStore saveToStorageSafe] OK")}catch(t){Dt("[AuthStore saveToStorageSafe] FAIL",{error:String(t)})}},Yr=uy(),Ve=oh()((e,t)=>({user:Yr.user||null,isAuthenticated:Yr.isAuthenticated||!1,isLoading:!1,error:null,selectedTenantId:Yr.user?.tenant_id||null,permissions:[],abilities:[],tenantsCount:0,currentTenantRole:Yr.currentTenantRole??null,currentTenantPermissions:Yr.currentTenantPermissions??[],login:async s=>{e({isLoading:!0,error:null});try{const r=await _l.login(s);if(typeof window<"u"){const a=window.localStorage.getItem("auth_token")}try{const a=await Se.get("/api/v1/me",{withCredentials:!0,headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":typeof window<"u"?window.Laravel?.csrfToken??document.querySelector('meta[name="csrf-token"]')?.content:void 0,...typeof window<"u"&&window.localStorage.getItem("auth_token")?{Authorization:`Bearer ${window.localStorage.getItem("auth_token")}`}:{}}}),i=a.data?.data||a.data,o=i?.user||r.user,c=i?.permissions||[],l=i?.abilities||[],u=i?.tenants_summary?.count||0,d=i?.current_tenant_role??null,h=i?.current_tenant_permissions??[],m={user:o,isAuthenticated:!0,isLoading:!1,error:null,permissions:c,abilities:l,tenantsCount:u,selectedTenantId:o?.tenant_id||null,currentTenantRole:d,currentTenantPermissions:h};e(m),hr(m)}catch{const i={user:r.user,isAuthenticated:!0,isLoading:!1,error:null,permissions:[],abilities:[],tenantsCount:0,selectedTenantId:r.user?.tenant_id||null,currentTenantRole:null,currentTenantPermissions:[]};e(i),hr(i)}return r.redirect_path||"/app/dashboard"}catch(r){throw e({user:null,isAuthenticated:!1,isLoading:!1,error:r.message||"Đăng nhập thất bại",permissions:[],abilities:[],tenantsCount:0,selectedTenantId:null,currentTenantRole:null}),r}},logout:async()=>{e({isLoading:!0});try{await _l.logout()}catch{}finally{const s={user:null,isAuthenticated:!1,isLoading:!1,error:null,permissions:[],abilities:[],tenantsCount:0,selectedTenantId:null,currentTenantRole:null,currentTenantPermissions:[]};e(s),hr(s)}},setUser:s=>{const r={user:s,isAuthenticated:!!s,permissions:[],abilities:[],tenantsCount:0,selectedTenantId:s?.tenant_id||null,currentTenantRole:null,currentTenantPermissions:[]};e(r),hr(r)},checkAuth:async()=>{const s=typeof window<"u"?localStorage.getItem("auth_token"):null;Dt("[AuthStore] checkAuth start",{tokenPresent:!!s,mode:s?"token+cookie":"cookie-only"}),e({isLoading:!0});try{Dt("[AuthStore] ME request starting",{endpoint:"/api/v1/me"});const r={Accept:"application/json","X-Requested-With":"XMLHttpRequest"};if(typeof window<"u"){const x=window.Laravel?.csrfToken??document.querySelector('meta[name="csrf-token"]')?.content;x&&(r["X-CSRF-TOKEN"]=x)}s&&(r.Authorization=`Bearer ${s}`);const a=await $.get("/me",{headers:r});Dt("[AuthStore] /api/v1/me res",{status:a.status});const i=a.data?.data||a.data,o=i?.user||i,c=i?.permissions||[],l=i?.abilities||[],u=i?.tenants_summary?.count||0,d=i?.current_tenant_role??null,h=i?.current_tenant_permissions,m=Array.isArray(h)?h:[],g=Array.isArray(m)?m:[],f={user:o,isAuthenticated:a.status===200,isLoading:!1,error:null,permissions:c,abilities:l,tenantsCount:u,selectedTenantId:o?.tenant_id||null,currentTenantRole:d??null,currentTenantPermissions:g};Dt("[AuthStore] checkAuth ok",{ok:a.status===200,permsCount:g.length,hasManageTasks:g.includes("tenant.manage_tasks")}),e(f),Tl(f)}catch(r){const a=ny(r)&&r.response?.status===401;Dt("[AuthStore] checkAuth error",{error:String(r),status:Se.isAxiosError(r)?r.response?.status:void 0,isUnauthorized:a});const i={user:null,isAuthenticated:!1,isLoading:!1,error:a?null:r.message||"Không thể xác thực",permissions:[],abilities:[],tenantsCount:0,selectedTenantId:null,currentTenantRole:null,currentTenantPermissions:[]};e(i),Tl(i)}},clearError:()=>{e({error:null})},selectTenant:async s=>{try{e({isLoading:!0,error:null});const r=await Se.post(`/api/v1/me/tenants/${s}/select?include_me=true`,{},{headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":typeof window<"u"?window.Laravel?.csrfToken??document.querySelector('meta[name="csrf-token"]')?.content??"":""},withCredentials:!0}),a=r.data?.data||r.data;if(a?.me){const i=a.me,o={user:i.user,selectedTenantId:s,permissions:i.permissions||[],abilities:i.abilities||[],tenantsCount:i.tenants_summary?.count||0,currentTenantRole:i.current_tenant_role??null,currentTenantPermissions:i.current_tenant_permissions??[],isLoading:!1,error:null};e(o),hr(o)}else{const{user:i}=t();i&&e({user:{...i,tenant_id:s},selectedTenantId:s,isLoading:!1,error:null}),await t().checkAuth()}}catch(r){throw e({isLoading:!1,error:r.response?.data?.message||r.message||"Không thể chọn tenant"}),r}},hasTenantPermission:s=>{const{currentTenantPermissions:r}=t();return r.includes(s)}})),Xo=Ve;function Na(e){"@babel/helpers - typeof";return Na=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Na(e)}function Ds(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function st(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function ds(e){st(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||Na(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):new Date(NaN)}function hy(e,t){st(2,arguments);var s=ds(e).getTime(),r=Ds(t);return new Date(s+r)}var my={};function Qa(){return my}function fy(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var Dh=6e4,Mh=36e5;function py(e){return st(1,arguments),e instanceof Date||Na(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function gy(e){if(st(1,arguments),!py(e)&&typeof e!="number")return!1;var t=ds(e);return!isNaN(Number(t))}function xy(e,t){st(2,arguments);var s=Ds(t);return hy(e,-s)}var yy=864e5;function vy(e){st(1,arguments);var t=ds(e),s=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),a=s-r;return Math.floor(a/yy)+1}function ka(e){st(1,arguments);var t=1,s=ds(e),r=s.getUTCDay(),a=(r<t?7:0)+r-t;return s.setUTCDate(s.getUTCDate()-a),s.setUTCHours(0,0,0,0),s}function Oh(e){st(1,arguments);var t=ds(e),s=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(s+1,0,4),r.setUTCHours(0,0,0,0);var a=ka(r),i=new Date(0);i.setUTCFullYear(s,0,4),i.setUTCHours(0,0,0,0);var o=ka(i);return t.getTime()>=a.getTime()?s+1:t.getTime()>=o.getTime()?s:s-1}function by(e){st(1,arguments);var t=Oh(e),s=new Date(0);s.setUTCFullYear(t,0,4),s.setUTCHours(0,0,0,0);var r=ka(s);return r}var wy=6048e5;function jy(e){st(1,arguments);var t=ds(e),s=ka(t).getTime()-by(t).getTime();return Math.round(s/wy)+1}function _a(e,t){var s,r,a,i,o,c,l,u;st(1,arguments);var d=Qa(),h=Ds((s=(r=(a=(i=t?.weekStartsOn)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(c=o.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&a!==void 0?a:d.weekStartsOn)!==null&&r!==void 0?r:(l=d.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&s!==void 0?s:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=ds(e),g=m.getUTCDay(),f=(g<h?7:0)+g-h;return m.setUTCDate(m.getUTCDate()-f),m.setUTCHours(0,0,0,0),m}function Fh(e,t){var s,r,a,i,o,c,l,u;st(1,arguments);var d=ds(e),h=d.getUTCFullYear(),m=Qa(),g=Ds((s=(r=(a=(i=t?.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(c=o.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&a!==void 0?a:m.firstWeekContainsDate)!==null&&r!==void 0?r:(l=m.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(g>=1&&g<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=new Date(0);f.setUTCFullYear(h+1,0,g),f.setUTCHours(0,0,0,0);var x=_a(f,t),y=new Date(0);y.setUTCFullYear(h,0,g),y.setUTCHours(0,0,0,0);var v=_a(y,t);return d.getTime()>=x.getTime()?h+1:d.getTime()>=v.getTime()?h:h-1}function Ny(e,t){var s,r,a,i,o,c,l,u;st(1,arguments);var d=Qa(),h=Ds((s=(r=(a=(i=t?.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(c=o.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&a!==void 0?a:d.firstWeekContainsDate)!==null&&r!==void 0?r:(l=d.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&s!==void 0?s:1),m=Fh(e,t),g=new Date(0);g.setUTCFullYear(m,0,h),g.setUTCHours(0,0,0,0);var f=_a(g,t);return f}var ky=6048e5;function _y(e,t){st(1,arguments);var s=ds(e),r=_a(s,t).getTime()-Ny(s,t).getTime();return Math.round(r/ky)+1}function Ne(e,t){for(var s=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return s+r}var Ns={y:function(t,s){var r=t.getUTCFullYear(),a=r>0?r:1-r;return Ne(s==="yy"?a%100:a,s.length)},M:function(t,s){var r=t.getUTCMonth();return s==="M"?String(r+1):Ne(r+1,2)},d:function(t,s){return Ne(t.getUTCDate(),s.length)},a:function(t,s){var r=t.getUTCHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(t,s){return Ne(t.getUTCHours()%12||12,s.length)},H:function(t,s){return Ne(t.getUTCHours(),s.length)},m:function(t,s){return Ne(t.getUTCMinutes(),s.length)},s:function(t,s){return Ne(t.getUTCSeconds(),s.length)},S:function(t,s){var r=s.length,a=t.getUTCMilliseconds(),i=Math.floor(a*Math.pow(10,r-3));return Ne(i,s.length)}},lr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ty={G:function(t,s,r){var a=t.getUTCFullYear()>0?1:0;switch(s){case"G":case"GG":case"GGG":return r.era(a,{width:"abbreviated"});case"GGGGG":return r.era(a,{width:"narrow"});case"GGGG":default:return r.era(a,{width:"wide"})}},y:function(t,s,r){if(s==="yo"){var a=t.getUTCFullYear(),i=a>0?a:1-a;return r.ordinalNumber(i,{unit:"year"})}return Ns.y(t,s)},Y:function(t,s,r,a){var i=Fh(t,a),o=i>0?i:1-i;if(s==="YY"){var c=o%100;return Ne(c,2)}return s==="Yo"?r.ordinalNumber(o,{unit:"year"}):Ne(o,s.length)},R:function(t,s){var r=Oh(t);return Ne(r,s.length)},u:function(t,s){var r=t.getUTCFullYear();return Ne(r,s.length)},Q:function(t,s,r){var a=Math.ceil((t.getUTCMonth()+1)/3);switch(s){case"Q":return String(a);case"QQ":return Ne(a,2);case"Qo":return r.ordinalNumber(a,{unit:"quarter"});case"QQQ":return r.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,s,r){var a=Math.ceil((t.getUTCMonth()+1)/3);switch(s){case"q":return String(a);case"qq":return Ne(a,2);case"qo":return r.ordinalNumber(a,{unit:"quarter"});case"qqq":return r.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,s,r){var a=t.getUTCMonth();switch(s){case"M":case"MM":return Ns.M(t,s);case"Mo":return r.ordinalNumber(a+1,{unit:"month"});case"MMM":return r.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(a,{width:"wide",context:"formatting"})}},L:function(t,s,r){var a=t.getUTCMonth();switch(s){case"L":return String(a+1);case"LL":return Ne(a+1,2);case"Lo":return r.ordinalNumber(a+1,{unit:"month"});case"LLL":return r.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(a,{width:"wide",context:"standalone"})}},w:function(t,s,r,a){var i=_y(t,a);return s==="wo"?r.ordinalNumber(i,{unit:"week"}):Ne(i,s.length)},I:function(t,s,r){var a=jy(t);return s==="Io"?r.ordinalNumber(a,{unit:"week"}):Ne(a,s.length)},d:function(t,s,r){return s==="do"?r.ordinalNumber(t.getUTCDate(),{unit:"date"}):Ns.d(t,s)},D:function(t,s,r){var a=vy(t);return s==="Do"?r.ordinalNumber(a,{unit:"dayOfYear"}):Ne(a,s.length)},E:function(t,s,r){var a=t.getUTCDay();switch(s){case"E":case"EE":case"EEE":return r.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(a,{width:"short",context:"formatting"});case"EEEE":default:return r.day(a,{width:"wide",context:"formatting"})}},e:function(t,s,r,a){var i=t.getUTCDay(),o=(i-a.weekStartsOn+8)%7||7;switch(s){case"e":return String(o);case"ee":return Ne(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,s,r,a){var i=t.getUTCDay(),o=(i-a.weekStartsOn+8)%7||7;switch(s){case"c":return String(o);case"cc":return Ne(o,s.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,s,r){var a=t.getUTCDay(),i=a===0?7:a;switch(s){case"i":return String(i);case"ii":return Ne(i,s.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(a,{width:"short",context:"formatting"});case"iiii":default:return r.day(a,{width:"wide",context:"formatting"})}},a:function(t,s,r){var a=t.getUTCHours(),i=a/12>=1?"pm":"am";switch(s){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,s,r){var a=t.getUTCHours(),i;switch(a===12?i=lr.noon:a===0?i=lr.midnight:i=a/12>=1?"pm":"am",s){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,s,r){var a=t.getUTCHours(),i;switch(a>=17?i=lr.evening:a>=12?i=lr.afternoon:a>=4?i=lr.morning:i=lr.night,s){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,s,r){if(s==="ho"){var a=t.getUTCHours()%12;return a===0&&(a=12),r.ordinalNumber(a,{unit:"hour"})}return Ns.h(t,s)},H:function(t,s,r){return s==="Ho"?r.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Ns.H(t,s)},K:function(t,s,r){var a=t.getUTCHours()%12;return s==="Ko"?r.ordinalNumber(a,{unit:"hour"}):Ne(a,s.length)},k:function(t,s,r){var a=t.getUTCHours();return a===0&&(a=24),s==="ko"?r.ordinalNumber(a,{unit:"hour"}):Ne(a,s.length)},m:function(t,s,r){return s==="mo"?r.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Ns.m(t,s)},s:function(t,s,r){return s==="so"?r.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Ns.s(t,s)},S:function(t,s){return Ns.S(t,s)},X:function(t,s,r,a){var i=a._originalDate||t,o=i.getTimezoneOffset();if(o===0)return"Z";switch(s){case"X":return Cl(o);case"XXXX":case"XX":return Bs(o);case"XXXXX":case"XXX":default:return Bs(o,":")}},x:function(t,s,r,a){var i=a._originalDate||t,o=i.getTimezoneOffset();switch(s){case"x":return Cl(o);case"xxxx":case"xx":return Bs(o);case"xxxxx":case"xxx":default:return Bs(o,":")}},O:function(t,s,r,a){var i=a._originalDate||t,o=i.getTimezoneOffset();switch(s){case"O":case"OO":case"OOO":return"GMT"+Sl(o,":");case"OOOO":default:return"GMT"+Bs(o,":")}},z:function(t,s,r,a){var i=a._originalDate||t,o=i.getTimezoneOffset();switch(s){case"z":case"zz":case"zzz":return"GMT"+Sl(o,":");case"zzzz":default:return"GMT"+Bs(o,":")}},t:function(t,s,r,a){var i=a._originalDate||t,o=Math.floor(i.getTime()/1e3);return Ne(o,s.length)},T:function(t,s,r,a){var i=a._originalDate||t,o=i.getTime();return Ne(o,s.length)}};function Sl(e,t){var s=e>0?"-":"+",r=Math.abs(e),a=Math.floor(r/60),i=r%60;if(i===0)return s+String(a);var o=t;return s+String(a)+o+Ne(i,2)}function Cl(e,t){if(e%60===0){var s=e>0?"-":"+";return s+Ne(Math.abs(e)/60,2)}return Bs(e,t)}function Bs(e,t){var s=t||"",r=e>0?"-":"+",a=Math.abs(e),i=Ne(Math.floor(a/60),2),o=Ne(a%60,2);return r+i+s+o}var Al=function(t,s){switch(t){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});case"PPPP":default:return s.date({width:"full"})}},Lh=function(t,s){switch(t){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});case"pppp":default:return s.time({width:"full"})}},Sy=function(t,s){var r=t.match(/(P+)(p+)?/)||[],a=r[1],i=r[2];if(!i)return Al(t,s);var o;switch(a){case"P":o=s.dateTime({width:"short"});break;case"PP":o=s.dateTime({width:"medium"});break;case"PPP":o=s.dateTime({width:"long"});break;case"PPPP":default:o=s.dateTime({width:"full"});break}return o.replace("{{date}}",Al(a,s)).replace("{{time}}",Lh(i,s))},Cy={p:Lh,P:Sy},Ay=["D","DD"],Py=["YY","YYYY"];function Ey(e){return Ay.indexOf(e)!==-1}function Ry(e){return Py.indexOf(e)!==-1}function Pl(e,t,s){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(s,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(s,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(s,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(s,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Dy={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},My=function(t,s,r){var a,i=Dy[t];return typeof i=="string"?a=i:s===1?a=i.one:a=i.other.replace("{{count}}",s.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+a:a+" ago":a};function kr(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=t.width?String(t.width):e.defaultWidth,r=e.formats[s]||e.formats[e.defaultWidth];return r}}var Oy={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Fy={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ly={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Vy={date:kr({formats:Oy,defaultWidth:"full"}),time:kr({formats:Fy,defaultWidth:"full"}),dateTime:kr({formats:Ly,defaultWidth:"full"})},Uy={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Iy=function(t,s,r,a){return Uy[t]};function ts(e){return function(t,s){var r=s!=null&&s.context?String(s.context):"standalone",a;if(r==="formatting"&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=s!=null&&s.width?String(s.width):i;a=e.formattingValues[o]||e.formattingValues[i]}else{var c=e.defaultWidth,l=s!=null&&s.width?String(s.width):e.defaultWidth;a=e.values[l]||e.values[c]}var u=e.argumentCallback?e.argumentCallback(t):t;return a[u]}}var $y={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},By={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},qy={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Wy={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},zy={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Ky={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Hy=function(t,s){var r=Number(t),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Qy={ordinalNumber:Hy,era:ts({values:$y,defaultWidth:"wide"}),quarter:ts({values:By,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:ts({values:qy,defaultWidth:"wide"}),day:ts({values:Wy,defaultWidth:"wide"}),dayPeriod:ts({values:zy,defaultWidth:"wide",formattingValues:Ky,defaultFormattingWidth:"wide"})};function ss(e){return function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=s.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;var o=i[0],c=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(c)?Xy(c,function(h){return h.test(o)}):Zy(c,function(h){return h.test(o)}),u;u=e.valueCallback?e.valueCallback(l):l,u=s.valueCallback?s.valueCallback(u):u;var d=t.slice(o.length);return{value:u,rest:d}}}function Zy(e,t){for(var s in e)if(e.hasOwnProperty(s)&&t(e[s]))return s}function Xy(e,t){for(var s=0;s<e.length;s++)if(t(e[s]))return s}function Vh(e){return function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var a=r[0],i=t.match(e.parsePattern);if(!i)return null;var o=e.valueCallback?e.valueCallback(i[0]):i[0];o=s.valueCallback?s.valueCallback(o):o;var c=t.slice(a.length);return{value:o,rest:c}}}var Yy=/^(\d+)(th|st|nd|rd)?/i,Gy=/\d+/i,Jy={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ev={any:[/^b/i,/^(a|c)/i]},tv={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},sv={any:[/1/i,/2/i,/3/i,/4/i]},rv={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},nv={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},av={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},iv={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ov={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},cv={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},lv={ordinalNumber:Vh({matchPattern:Yy,parsePattern:Gy,valueCallback:function(t){return parseInt(t,10)}}),era:ss({matchPatterns:Jy,defaultMatchWidth:"wide",parsePatterns:ev,defaultParseWidth:"any"}),quarter:ss({matchPatterns:tv,defaultMatchWidth:"wide",parsePatterns:sv,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:ss({matchPatterns:rv,defaultMatchWidth:"wide",parsePatterns:nv,defaultParseWidth:"any"}),day:ss({matchPatterns:av,defaultMatchWidth:"wide",parsePatterns:iv,defaultParseWidth:"any"}),dayPeriod:ss({matchPatterns:ov,defaultMatchWidth:"any",parsePatterns:cv,defaultParseWidth:"any"})},Uh={code:"en-US",formatDistance:My,formatLong:Vy,formatRelative:Iy,localize:Qy,match:lv,options:{weekStartsOn:0,firstWeekContainsDate:1}},dv=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,uv=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,hv=/^'([^]*?)'?$/,mv=/''/g,fv=/[a-zA-Z]/;function pv(e,t,s){var r,a,i,o,c,l,u,d,h,m,g,f,x,y,v,w,j,N;st(2,arguments);var T=String(t),O=Qa(),D=(r=(a=s?.locale)!==null&&a!==void 0?a:O.locale)!==null&&r!==void 0?r:Uh,k=Ds((i=(o=(c=(l=s?.firstWeekContainsDate)!==null&&l!==void 0?l:s==null||(u=s.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&c!==void 0?c:O.firstWeekContainsDate)!==null&&o!==void 0?o:(h=O.locale)===null||h===void 0||(m=h.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(k>=1&&k<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var z=Ds((g=(f=(x=(y=s?.weekStartsOn)!==null&&y!==void 0?y:s==null||(v=s.locale)===null||v===void 0||(w=v.options)===null||w===void 0?void 0:w.weekStartsOn)!==null&&x!==void 0?x:O.weekStartsOn)!==null&&f!==void 0?f:(j=O.locale)===null||j===void 0||(N=j.options)===null||N===void 0?void 0:N.weekStartsOn)!==null&&g!==void 0?g:0);if(!(z>=0&&z<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!D.localize)throw new RangeError("locale must contain localize property");if(!D.formatLong)throw new RangeError("locale must contain formatLong property");var ne=ds(e);if(!gy(ne))throw new RangeError("Invalid time value");var ue=fy(ne),te=xy(ne,ue),re={firstWeekContainsDate:k,weekStartsOn:z,locale:D,_originalDate:ne},V=T.match(uv).map(function(S){var E=S[0];if(E==="p"||E==="P"){var Q=Cy[E];return Q(S,D.formatLong)}return S}).join("").match(dv).map(function(S){if(S==="''")return"'";var E=S[0];if(E==="'")return gv(S);var Q=Ty[E];if(Q)return!(s!=null&&s.useAdditionalWeekYearTokens)&&Ry(S)&&Pl(S,t,String(e)),!(s!=null&&s.useAdditionalDayOfYearTokens)&&Ey(S)&&Pl(S,t,String(e)),Q(te,S,D.localize,re);if(E.match(fv))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");return S}).join("");return V}function gv(e){var t=e.match(hv);return t?t[1].replace(mv,"'"):e}function xv(e,t){var s;st(1,arguments);var r=Ds((s=void 0)!==null&&s!==void 0?s:2);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var a=wv(e),i;if(a.date){var o=jv(a.date,r);i=Nv(o.restDateString,o.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);var c=i.getTime(),l=0,u;if(a.time&&(l=kv(a.time),isNaN(l)))return new Date(NaN);if(a.timezone){if(u=_v(a.timezone),isNaN(u))return new Date(NaN)}else{var d=new Date(c+l),h=new Date(0);return h.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),h.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),h}return new Date(c+l+u)}var zn={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},yv=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,vv=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,bv=/^([+-])(\d{2})(?::?(\d{2}))?$/;function wv(e){var t={},s=e.split(zn.dateTimeDelimiter),r;if(s.length>2)return t;if(/:/.test(s[0])?r=s[0]:(t.date=s[0],r=s[1],zn.timeZoneDelimiter.test(t.date)&&(t.date=e.split(zn.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){var a=zn.timezone.exec(r);a?(t.time=r.replace(a[1],""),t.timezone=a[1]):t.time=r}return t}function jv(e,t){var s=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(s);if(!r)return{year:NaN,restDateString:""};var a=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:i===null?a:i*100,restDateString:e.slice((r[1]||r[2]).length)}}function Nv(e,t){if(t===null)return new Date(NaN);var s=e.match(yv);if(!s)return new Date(NaN);var r=!!s[4],a=Gr(s[1]),i=Gr(s[2])-1,o=Gr(s[3]),c=Gr(s[4]),l=Gr(s[5])-1;if(r)return Pv(t,c,l)?Tv(t,c,l):new Date(NaN);var u=new Date(0);return!Cv(t,i,o)||!Av(t,a)?new Date(NaN):(u.setUTCFullYear(t,i,Math.max(a,o)),u)}function Gr(e){return e?parseInt(e):1}function kv(e){var t=e.match(vv);if(!t)return NaN;var s=mi(t[1]),r=mi(t[2]),a=mi(t[3]);return Ev(s,r,a)?s*Mh+r*Dh+a*1e3:NaN}function mi(e){return e&&parseFloat(e.replace(",","."))||0}function _v(e){if(e==="Z")return 0;var t=e.match(bv);if(!t)return 0;var s=t[1]==="+"?-1:1,r=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return Rv(r,a)?s*(r*Mh+a*Dh):NaN}function Tv(e,t,s){var r=new Date(0);r.setUTCFullYear(e,0,4);var a=r.getUTCDay()||7,i=(t-1)*7+s+1-a;return r.setUTCDate(r.getUTCDate()+i),r}var Sv=[31,null,31,30,31,30,31,31,30,31,30,31];function Ih(e){return e%400===0||e%4===0&&e%100!==0}function Cv(e,t,s){return t>=0&&t<=11&&s>=1&&s<=(Sv[t]||(Ih(e)?29:28))}function Av(e,t){return t>=1&&t<=(Ih(e)?366:365)}function Pv(e,t,s){return t>=1&&t<=53&&s>=0&&s<=6}function Ev(e,t,s){return e===24?t===0&&s===0:s>=0&&s<60&&t>=0&&t<60&&e>=0&&e<25}function Rv(e,t){return t>=0&&t<=59}var Dv={lessThanXSeconds:{one:"dưới 1 giây",other:"dưới {{count}} giây"},xSeconds:{one:"1 giây",other:"{{count}} giây"},halfAMinute:"nửa phút",lessThanXMinutes:{one:"dưới 1 phút",other:"dưới {{count}} phút"},xMinutes:{one:"1 phút",other:"{{count}} phút"},aboutXHours:{one:"khoảng 1 giờ",other:"khoảng {{count}} giờ"},xHours:{one:"1 giờ",other:"{{count}} giờ"},xDays:{one:"1 ngày",other:"{{count}} ngày"},aboutXWeeks:{one:"khoảng 1 tuần",other:"khoảng {{count}} tuần"},xWeeks:{one:"1 tuần",other:"{{count}} tuần"},aboutXMonths:{one:"khoảng 1 tháng",other:"khoảng {{count}} tháng"},xMonths:{one:"1 tháng",other:"{{count}} tháng"},aboutXYears:{one:"khoảng 1 năm",other:"khoảng {{count}} năm"},xYears:{one:"1 năm",other:"{{count}} năm"},overXYears:{one:"hơn 1 năm",other:"hơn {{count}} năm"},almostXYears:{one:"gần 1 năm",other:"gần {{count}} năm"}},Mv=function(t,s,r){var a,i=Dv[t];return typeof i=="string"?a=i:s===1?a=i.one:a=i.other.replace("{{count}}",String(s)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?a+" nữa":a+" trước":a},Ov={full:"EEEE, 'ngày' d MMMM 'năm' y",long:"'ngày' d MMMM 'năm' y",medium:"d MMM 'năm' y",short:"dd/MM/y"},Fv={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Lv={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},Vv={date:kr({formats:Ov,defaultWidth:"full"}),time:kr({formats:Fv,defaultWidth:"full"}),dateTime:kr({formats:Lv,defaultWidth:"full"})},Uv={lastWeek:"eeee 'tuần trước vào lúc' p",yesterday:"'hôm qua vào lúc' p",today:"'hôm nay vào lúc' p",tomorrow:"'ngày mai vào lúc' p",nextWeek:"eeee 'tới vào lúc' p",other:"P"},Iv=function(t,s,r,a){return Uv[t]},$v={narrow:["TCN","SCN"],abbreviated:["trước CN","sau CN"],wide:["trước Công Nguyên","sau Công Nguyên"]},Bv={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["Quý 1","Quý 2","Quý 3","Quý 4"]},qv={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["quý I","quý II","quý III","quý IV"]},Wv={narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["Thg 1","Thg 2","Thg 3","Thg 4","Thg 5","Thg 6","Thg 7","Thg 8","Thg 9","Thg 10","Thg 11","Thg 12"],wide:["Tháng Một","Tháng Hai","Tháng Ba","Tháng Tư","Tháng Năm","Tháng Sáu","Tháng Bảy","Tháng Tám","Tháng Chín","Tháng Mười","Tháng Mười Một","Tháng Mười Hai"]},zv={narrow:["01","02","03","04","05","06","07","08","09","10","11","12"],abbreviated:["thg 1","thg 2","thg 3","thg 4","thg 5","thg 6","thg 7","thg 8","thg 9","thg 10","thg 11","thg 12"],wide:["tháng 01","tháng 02","tháng 03","tháng 04","tháng 05","tháng 06","tháng 07","tháng 08","tháng 09","tháng 10","tháng 11","tháng 12"]},Kv={narrow:["CN","T2","T3","T4","T5","T6","T7"],short:["CN","Th 2","Th 3","Th 4","Th 5","Th 6","Th 7"],abbreviated:["CN","Thứ 2","Thứ 3","Thứ 4","Thứ 5","Thứ 6","Thứ 7"],wide:["Chủ Nhật","Thứ Hai","Thứ Ba","Thứ Tư","Thứ Năm","Thứ Sáu","Thứ Bảy"]},Hv={narrow:{am:"am",pm:"pm",midnight:"nửa đêm",noon:"tr",morning:"sg",afternoon:"ch",evening:"tối",night:"đêm"},abbreviated:{am:"AM",pm:"PM",midnight:"nửa đêm",noon:"trưa",morning:"sáng",afternoon:"chiều",evening:"tối",night:"đêm"},wide:{am:"SA",pm:"CH",midnight:"nửa đêm",noon:"trưa",morning:"sáng",afternoon:"chiều",evening:"tối",night:"đêm"}},Qv={narrow:{am:"am",pm:"pm",midnight:"nửa đêm",noon:"tr",morning:"sg",afternoon:"ch",evening:"tối",night:"đêm"},abbreviated:{am:"AM",pm:"PM",midnight:"nửa đêm",noon:"trưa",morning:"sáng",afternoon:"chiều",evening:"tối",night:"đêm"},wide:{am:"SA",pm:"CH",midnight:"nửa đêm",noon:"giữa trưa",morning:"vào buổi sáng",afternoon:"vào buổi chiều",evening:"vào buổi tối",night:"vào ban đêm"}},Zv=function(t,s){var r=Number(t),a=s?.unit;if(a==="quarter")switch(r){case 1:return"I";case 2:return"II";case 3:return"III";case 4:return"IV"}else if(a==="day")switch(r){case 1:return"thứ 2";case 2:return"thứ 3";case 3:return"thứ 4";case 4:return"thứ 5";case 5:return"thứ 6";case 6:return"thứ 7";case 7:return"chủ nhật"}else{if(a==="week")return r===1?"thứ nhất":"thứ "+r;if(a==="dayOfYear")return r===1?"đầu tiên":"thứ "+r}return String(r)},Xv={ordinalNumber:Zv,era:ts({values:$v,defaultWidth:"wide"}),quarter:ts({values:Bv,defaultWidth:"wide",formattingValues:qv,defaultFormattingWidth:"wide",argumentCallback:function(t){return t-1}}),month:ts({values:Wv,defaultWidth:"wide",formattingValues:zv,defaultFormattingWidth:"wide"}),day:ts({values:Kv,defaultWidth:"wide"}),dayPeriod:ts({values:Hv,defaultWidth:"wide",formattingValues:Qv,defaultFormattingWidth:"wide"})},Yv=/^(\d+)/i,Gv=/\d+/i,Jv={narrow:/^(tcn|scn)/i,abbreviated:/^(trước CN|sau CN)/i,wide:/^(trước Công Nguyên|sau Công Nguyên)/i},e0={any:[/^t/i,/^s/i]},t0={narrow:/^([1234]|i{1,3}v?)/i,abbreviated:/^q([1234]|i{1,3}v?)/i,wide:/^quý ([1234]|i{1,3}v?)/i},s0={any:[/(1|i)$/i,/(2|ii)$/i,/(3|iii)$/i,/(4|iv)$/i]},r0={narrow:/^(0?[2-9]|10|11|12|0?1)/i,abbreviated:/^thg[ _]?(0?[1-9](?!\d)|10|11|12)/i,wide:/^tháng ?(Một|Hai|Ba|Tư|Năm|Sáu|Bảy|Tám|Chín|Mười|Mười ?Một|Mười ?Hai|0?[1-9](?!\d)|10|11|12)/i},n0={narrow:[/0?1$/i,/0?2/i,/3/,/4/,/5/,/6/,/7/,/8/,/9/,/10/,/11/,/12/],abbreviated:[/^thg[ _]?0?1(?!\d)/i,/^thg[ _]?0?2/i,/^thg[ _]?0?3/i,/^thg[ _]?0?4/i,/^thg[ _]?0?5/i,/^thg[ _]?0?6/i,/^thg[ _]?0?7/i,/^thg[ _]?0?8/i,/^thg[ _]?0?9/i,/^thg[ _]?10/i,/^thg[ _]?11/i,/^thg[ _]?12/i],wide:[/^tháng ?(Một|0?1(?!\d))/i,/^tháng ?(Hai|0?2)/i,/^tháng ?(Ba|0?3)/i,/^tháng ?(Tư|0?4)/i,/^tháng ?(Năm|0?5)/i,/^tháng ?(Sáu|0?6)/i,/^tháng ?(Bảy|0?7)/i,/^tháng ?(Tám|0?8)/i,/^tháng ?(Chín|0?9)/i,/^tháng ?(Mười|10)/i,/^tháng ?(Mười ?Một|11)/i,/^tháng ?(Mười ?Hai|12)/i]},a0={narrow:/^(CN|T2|T3|T4|T5|T6|T7)/i,short:/^(CN|Th ?2|Th ?3|Th ?4|Th ?5|Th ?6|Th ?7)/i,abbreviated:/^(CN|Th ?2|Th ?3|Th ?4|Th ?5|Th ?6|Th ?7)/i,wide:/^(Chủ ?Nhật|Chúa ?Nhật|thứ ?Hai|thứ ?Ba|thứ ?Tư|thứ ?Năm|thứ ?Sáu|thứ ?Bảy)/i},i0={narrow:[/CN/i,/2/i,/3/i,/4/i,/5/i,/6/i,/7/i],short:[/CN/i,/2/i,/3/i,/4/i,/5/i,/6/i,/7/i],abbreviated:[/CN/i,/2/i,/3/i,/4/i,/5/i,/6/i,/7/i],wide:[/(Chủ|Chúa) ?Nhật/i,/Hai/i,/Ba/i,/Tư/i,/Năm/i,/Sáu/i,/Bảy/i]},o0={narrow:/^(a|p|nửa đêm|trưa|(giờ) (sáng|chiều|tối|đêm))/i,abbreviated:/^(am|pm|nửa đêm|trưa|(giờ) (sáng|chiều|tối|đêm))/i,wide:/^(ch[^i]*|sa|nửa đêm|trưa|(giờ) (sáng|chiều|tối|đêm))/i},c0={any:{am:/^(a|sa)/i,pm:/^(p|ch[^i]*)/i,midnight:/nửa đêm/i,noon:/trưa/i,morning:/sáng/i,afternoon:/chiều/i,evening:/tối/i,night:/^đêm/i}},l0={ordinalNumber:Vh({matchPattern:Yv,parsePattern:Gv,valueCallback:function(t){return parseInt(t,10)}}),era:ss({matchPatterns:Jv,defaultMatchWidth:"wide",parsePatterns:e0,defaultParseWidth:"any"}),quarter:ss({matchPatterns:t0,defaultMatchWidth:"wide",parsePatterns:s0,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:ss({matchPatterns:r0,defaultMatchWidth:"wide",parsePatterns:n0,defaultParseWidth:"wide"}),day:ss({matchPatterns:a0,defaultMatchWidth:"wide",parsePatterns:i0,defaultParseWidth:"wide"}),dayPeriod:ss({matchPatterns:o0,defaultMatchWidth:"wide",parsePatterns:c0,defaultParseWidth:"any"})},d0={code:"vi",formatDistance:Mv,formatLong:Vv,formatRelative:Iv,localize:Xv,match:l0,options:{weekStartsOn:1,firstWeekContainsDate:1}};const u0={DISPLAY:"DD/MM/YYYY"},mr=(e,t=u0.DISPLAY,s="vi")=>{if(!e)return"";try{const r=typeof e=="string"?xv(e):e;return pv(r,t,{locale:s==="vi"?d0:Uh})}catch{return""}},fi=e=>{if(e===0)return"0 Bytes";const t=1024,s=["Bytes","KB","MB","GB","TB"],r=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,r)).toFixed(2))+" "+s[r]};function Pe(...e){return jp(Np(e))}function h0({title:e,titleId:t,...s},r){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const da=p.forwardRef(h0);function m0({title:e,titleId:t,...s},r){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const f0=p.forwardRef(m0);function p0({title:e,titleId:t,...s},r){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))}const g0=p.forwardRef(p0);function x0({title:e,titleId:t,...s},r){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"}))}const El=p.forwardRef(x0);function y0({title:e,titleId:t,...s},r){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))}const _r=p.forwardRef(y0);function v0({title:e,titleId:t,...s},r){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const b0=p.forwardRef(v0);function w0({title:e,titleId:t,...s},r){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const j0=p.forwardRef(w0);function N0({title:e,titleId:t,...s},r){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Rl=p.forwardRef(N0);function k0({title:e,titleId:t,...s},r){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"}))}const _0=p.forwardRef(k0);function T0({title:e,titleId:t,...s},r){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Dl=p.forwardRef(T0);function S0({title:e,titleId:t,...s},r){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const $h=p.forwardRef(S0);function C0({title:e,titleId:t,...s},r){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Bh=p.forwardRef(C0);function A0({title:e,titleId:t,...s},r){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Ts=p.forwardRef(A0);function P0({title:e,titleId:t,...s},r){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const E0=p.forwardRef(P0);function R0({title:e,titleId:t,...s},r){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Yo=p.forwardRef(R0);function D0({title:e,titleId:t,...s},r){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))}const gn=p.forwardRef(D0);function M0({title:e,titleId:t,...s},r){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const O0=p.forwardRef(M0);function F0({title:e,titleId:t,...s},r){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const L0=p.forwardRef(F0);function V0({title:e,titleId:t,...s},r){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const Go=p.forwardRef(V0);function U0({title:e,titleId:t,...s},r){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const En=p.forwardRef(U0);function I0({title:e,titleId:t,...s},r){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const $0=p.forwardRef(I0);function B0({title:e,titleId:t,...s},r){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const Ur=p.forwardRef(B0);function q0({title:e,titleId:t,...s},r){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))}const Ml=p.forwardRef(q0);function W0({title:e,titleId:t,...s},r){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const Rn=p.forwardRef(W0);function z0({title:e,titleId:t,...s},r){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const qh=p.forwardRef(z0);function K0({title:e,titleId:t,...s},r){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const Ta=p.forwardRef(K0);function H0({title:e,titleId:t,...s},r){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9a2.25 2.25 0 0 0 2.25 2.25Z"}))}const Q0=p.forwardRef(H0);function Z0({title:e,titleId:t,...s},r){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Kn=p.forwardRef(Z0);function X0({title:e,titleId:t,...s},r){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?p.createElement("title",{id:t},e):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Y0=p.forwardRef(X0),G0=e=>{const t=[{name:"Dashboard",href:"/app/dashboard",icon:O0,roles:["*"]},{name:"Projects",href:"/app/projects",icon:gn,roles:["*"]},{name:"Tasks",href:"/app/tasks",icon:_0,roles:["*"]}],s=[{name:"Tenants",href:"/app/tenants",icon:_r,roles:["SuperAdmin","Admin"]},{name:"Templates",href:"/app/templates",icon:Ts,roles:["PM","Designer","SuperAdmin","Admin"]},{name:"Change Requests",href:"/app/change-requests",icon:E0,roles:["PM","SuperAdmin","Admin"]},{name:"Users",href:"/app/users",icon:qh,roles:["SuperAdmin","Admin"]},{name:"Settings",href:"/app/settings",icon:$h,roles:["*"]}];return[...t,...s].filter(a=>a.roles.includes("*")||a.roles.some(i=>e.includes(i)))},J0=({className:e})=>{const t=$o(),{user:s}=Xo(),r=s?.roles?.map(i=>i.name)||[],a=G0(r);return n.jsx("nav",{className:Pe("bg-white border-b border-gray-200 shadow-sm sticky top-16 z-40 h-12",e),"data-testid":"primary-navigator","data-source":"react","aria-label":"Primary navigation",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsx("div",{className:"flex items-center overflow-x-auto",children:a.map(i=>{const o=t.pathname.startsWith(i.href);return n.jsxs(Kt,{to:i.href,className:Pe("flex items-center gap-2 px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap",o?"border-b-2 border-blue-600 text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[n.jsx(i.icon,{className:"h-5 w-5","aria-hidden":"true"}),n.jsx("span",{className:"hidden sm:inline",children:i.name})]},i.name)})})})})},eb=()=>{const{mode:e,toggleMode:t}=Ko(),{t:s}=Qt(),{logout:r,user:a}=Ve(),i=Vs(),o=async()=>{await r(),i("/login")};return n.jsxs("div",{className:"relative min-h-screen bg-[var(--color-surface-base)] text-[var(--color-text-primary)]",children:[n.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 rounded-[var(--radius-md)] bg-[var(--color-semantic-primary-500)] px-3 py-2 text-sm font-medium text-[var(--color-semantic-primary-contrast)] shadow-lg",children:"Bỏ qua tới nội dung chính"}),n.jsxs("div",{className:"flex flex-col min-h-screen",children:[n.jsxs("div",{className:"sticky top-0 z-50",children:[n.jsx("header",{className:"border-b border-[var(--color-border-subtle)] bg-[var(--color-surface-card)]",children:n.jsxs("div",{className:"flex items-center justify-between gap-4 py-4 px-4 lg:px-8",children:[n.jsx("div",{className:"flex items-center gap-3",children:n.jsx("h1",{className:"text-base font-semibold leading-tight",children:"ZenaManage"})}),n.jsxs("div",{className:"flex items-center gap-4 flex-1 justify-end",children:[n.jsxs("span",{className:"text-sm text-[var(--color-text-secondary)] hidden md:block",children:["Xin chào, ",n.jsx("span",{className:"font-medium text-[var(--color-text-primary)]",children:a?.name||"User"})]}),n.jsx(le,{variant:"ghost",size:"sm","aria-label":s("common.toggleTheme",{defaultValue:"Toggle theme"}),onClick:t,children:e==="light"?s("common.darkMode",{defaultValue:"Dark mode"}):s("common.lightMode",{defaultValue:"Light mode"})}),n.jsx(le,{variant:"outline",size:"sm",onClick:o,children:"Logout"})]})]})}),n.jsx(J0,{})]}),n.jsx("main",{id:"main-content",className:"flex-1 overflow-y-auto py-8 px-4 lg:px-8",children:n.jsx("div",{className:"flex w-full flex-col gap-6 max-w-7xl mx-auto",children:n.jsx(qu,{})})})]})]})},tb=()=>n.jsx("div",{className:"min-h-screen bg-[var(--color-surface-primary)]",children:n.jsxs("div",{className:"flex",children:[n.jsxs("div",{className:"w-64 bg-[var(--color-surface-secondary)] border-r border-[var(--color-border-primary)]",children:[n.jsx("div",{className:"p-6",children:n.jsx("h1",{className:"text-xl font-bold text-[var(--color-text-primary)]",children:"Admin Panel"})}),n.jsx("nav",{className:"px-4 py-2",children:n.jsxs("ul",{className:"space-y-2",children:[n.jsx("li",{children:n.jsx("a",{href:"/admin/dashboard",className:"block px-3 py-2 text-[var(--color-text-primary)] hover:bg-[var(--color-surface-muted)] rounded",children:"Dashboard"})}),n.jsx("li",{children:n.jsx("a",{href:"/admin/users",className:"block px-3 py-2 text-[var(--color-text-primary)] hover:bg-[var(--color-surface-muted)] rounded",children:"Users"})}),n.jsx("li",{children:n.jsx("a",{href:"/admin/roles",className:"block px-3 py-2 text-[var(--color-text-primary)] hover:bg-[var(--color-surface-muted)] rounded",children:"Roles"})}),n.jsx("li",{children:n.jsx("a",{href:"/admin/tenants",className:"block px-3 py-2 text-[var(--color-text-primary)] hover:bg-[var(--color-surface-muted)] rounded",children:"Tenants"})})]})})]}),n.jsx("div",{className:"flex-1",children:n.jsx(qu,{})})]})}),sb={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"},rb=({size:e="md",className:t})=>n.jsx("div",{className:Pe("animate-spin rounded-full border-2 border-gray-300 border-t-blue-600",sb[e],t)}),nb=new Set(["admin","super_admin","Admin","SuperAdmin"]),ab=({children:e,fallbackPath:t="/unauthorized"})=>{const{user:s,isAuthenticated:r,isLoading:a}=Xo(),i=$o();return a?n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx(rb,{size:"lg"})}):!r||!s?n.jsx(Nr,{to:"/auth/login",state:{from:i},replace:!0}):(Array.isArray(s.roles)?s.roles.map(l=>typeof l=="string"?l:l?.name).filter(Boolean):[]).some(l=>l&&nb.has(l))?n.jsx(n.Fragment,{children:e}):n.jsx(Nr,{to:t,replace:!0})},J=({className:e,...t})=>n.jsx("section",{className:vs("rounded-[var(--radius-lg)] border border-[var(--color-border-subtle)] bg-[var(--color-surface-card)] shadow-sm transition-shadow duration-200 focus-within:ring-2 focus-within:ring-[var(--color-semantic-primary-200)]",e),...t}),ye=({className:e,...t})=>n.jsx("header",{className:vs("border-b border-[var(--color-border-subtle)] px-6 py-4 first:rounded-t-[var(--radius-lg)]",e),...t}),ve=({className:e,...t})=>n.jsx("h2",{className:vs("text-lg font-semibold text-[var(--color-text-primary)]",e),...t}),vt=({className:e,...t})=>n.jsx("p",{className:vs("text-sm text-[var(--color-text-muted)]",e),...t}),ee=({className:e,...t})=>n.jsx("div",{className:vs("px-6 py-5",e),...t}),ib={neutral:"bg-[var(--color-semantic-neutral-100)] text-[var(--color-text-secondary)]",primary:"bg-[var(--color-semantic-primary-100)] text-[var(--color-semantic-primary-700)]",success:"bg-[var(--color-semantic-success-100)] text-[var(--color-semantic-success-700)]",warning:"bg-[var(--color-semantic-warning-100)] text-[var(--color-semantic-warning-800)]",danger:"bg-[var(--color-semantic-danger-100)] text-[var(--color-semantic-danger-700)]",info:"bg-[var(--color-semantic-info-100)] text-[var(--color-semantic-info-700)]"},ht=({tone:e="neutral",className:t,children:s,...r})=>n.jsx("span",{className:vs("inline-flex items-center rounded-[var(--radius-pill)] px-2.5 py-0.5 text-xs font-medium",ib[e],t),...r,children:s}),ot=({className:e})=>n.jsx("div",{className:vs("animate-pulse rounded-[var(--radius-md)] bg-[var(--color-surface-muted)]",e)}),dr=({size:e="medium"})=>{const t={small:"h-32",medium:"h-48",large:"h-64"};return n.jsx(J,{className:t[e],children:n.jsx(ee,{className:"p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(ot,{className:"h-4 w-24"}),n.jsx(ot,{className:"h-4 w-4 rounded-full"})]}),n.jsx(ot,{className:"h-8 w-16"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ot,{className:"h-3 w-full"}),n.jsx(ot,{className:"h-3 w-3/4"})]})]})})})},ob=()=>n.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[n.jsx(dr,{size:"small"}),n.jsx(dr,{size:"medium"}),n.jsx(dr,{size:"small"}),n.jsx(dr,{size:"large"}),n.jsx(dr,{size:"medium"}),n.jsx(dr,{size:"small"})]}),cb=()=>n.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((e,t)=>n.jsx(J,{children:n.jsx(ee,{className:"p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(ot,{className:"h-2 w-2 rounded-full"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx(ot,{className:"h-4 w-3/4"}),n.jsx(ot,{className:"h-3 w-1/2"})]}),n.jsx(ot,{className:"h-4 w-16"})]})})},t))}),Wh=()=>n.jsx("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-4",children:Array.from({length:8}).map((e,t)=>n.jsx(J,{children:n.jsx(ee,{className:"p-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(ot,{className:"h-3 w-16"}),n.jsx(ot,{className:"h-6 w-12"}),n.jsx(ot,{className:"h-2 w-full"})]})})},t))});class lb{baseUrl="/app/dashboard";async getUserDashboard(){return Ge.get(`${this.baseUrl}`)}async getAvailableWidgets(){return Ge.get(`${this.baseUrl}/widgets`)}async getWidgetData(t){return Ge.get(`${this.baseUrl}/widgets/${t}/data`)}async addWidget(t){return Ge.post(`${this.baseUrl}/widgets`,t)}async removeWidget(t){return Ge.delete(`${this.baseUrl}/widgets/${t}`)}async updateWidgetConfig(t,s){return Ge.put(`${this.baseUrl}/widgets/${t}`,{config:s})}async updateLayout(t){return Ge.put(`${this.baseUrl}/layout`,t)}async getUserAlerts(){return Ge.get(`${this.baseUrl}/alerts`)}async markAlertAsRead(t){return Ge.put(`${this.baseUrl}/alerts/${t}/read`)}async markAllAlertsAsRead(){return Ge.put(`${this.baseUrl}/alerts/read-all`)}async getMetrics(){return Ge.get(`${this.baseUrl}/metrics`)}async getRecentProjects(t={}){return Ge.get(`${this.baseUrl}/recent-projects`,{params:t})}async getRecentActivity(t={}){return Ge.get(`${this.baseUrl}/recent-activity`,{params:t})}async getTeamStatus(){return Ge.get(`${this.baseUrl}/team-status`)}async getChartData(t,s){return Ge.get(`${this.baseUrl}/charts/${t}`,{params:s?{period:s}:{}})}async saveUserPreferences(t){return Ge.post(`${this.baseUrl}/preferences`,t)}async resetToDefault(){return Ge.post(`${this.baseUrl}/reset`)}}const us=new lb,Be={all:["dashboard"],layout:()=>[...Be.all,"layout"],widgets:()=>[...Be.all,"widgets"],widget:e=>[...Be.widgets(),e],alerts:()=>[...Be.all,"alerts"],metrics:()=>[...Be.all,"metrics"],preferences:()=>[...Be.all,"preferences"]},zh=()=>Ce({queryKey:Be.layout(),queryFn:()=>us.getUserDashboard(),staleTime:6e4,retry:1}),db=(e,t=!0)=>Ce({queryKey:Be.widget(e),queryFn:()=>us.getWidgetData(e),enabled:t&&!!e,staleTime:3e4,retry:1}),Kh=()=>Ce({queryKey:Be.alerts(),queryFn:()=>us.getUserAlerts(),staleTime:6e4,retry:1}),ub=()=>Ce({queryKey:Be.metrics(),queryFn:()=>us.getMetrics(),staleTime:6e4,retry:1}),hb=()=>{const{data:e}=zh();return{data:e?.data?.preferences?{data:e.data.preferences}:null,isLoading:!1,error:null}},mb=()=>{const e=fe();return ke({mutationFn:t=>us.addWidget(t),onSuccess:()=>{e.invalidateQueries({queryKey:Be.widgets()}),e.invalidateQueries({queryKey:Be.layout()})}})},fb=()=>{const e=fe();return ke({mutationFn:t=>us.removeWidget(t),onSuccess:()=>{e.invalidateQueries({queryKey:Be.widgets()}),e.invalidateQueries({queryKey:Be.layout()})}})},pb=()=>{const e=fe();return ke({mutationFn:t=>us.markAlertAsRead(t),onSuccess:()=>{e.invalidateQueries({queryKey:Be.alerts()})}})},gb=()=>{const e=fe();return ke({mutationFn:()=>us.markAllAlertsAsRead(),onSuccess:()=>{e.invalidateQueries({queryKey:Be.alerts()})}})},xb=()=>{const e=fe();return ke({mutationFn:t=>us.saveUserPreferences(t),onSuccess:()=>{e.invalidateQueries({queryKey:Be.preferences()})}})},yb=()=>{const e=fe();return ke({mutationFn:()=>us.resetToDefault(),onSuccess:()=>{e.invalidateQueries({queryKey:Be.all})}})};class vb{widgets=new Map;register(t){this.widgets.set(t.type,t)}get(t){return this.widgets.get(t)}getAll(){return Array.from(this.widgets.values())}getByCategory(t){return this.getAll().filter(s=>s.category===t)}has(t){return this.widgets.has(t)}unregister(t){this.widgets.delete(t)}clear(){this.widgets.clear()}}const Pt=new vb,bb=(e,t={})=>{const s=Pt.get(e);if(!s)throw new Error(`Widget type "${e}" is not registered`);return{type:e,title:s.title,description:s.description,size:s.defaultSize,position:{x:0,y:0,w:1,h:1},config:{...s.defaultConfig},permissions:s.permissions,...t}},wb=({widget:e,data:t,loading:s,error:r,onRefresh:a,onConfigure:i,onRemove:o})=>{const c=Pt.get(e.type);if(!c)return n.jsx("div",{className:"p-4 text-center text-[var(--color-text-muted)]",children:n.jsxs("p",{children:['Widget type "',e.type,'" not found']})});const l=c.component;return n.jsx(l,{widget:e,data:t,loading:s,error:r,onRefresh:a,onConfigure:i,onRemove:o})},Dn=({title:e,description:t,loading:s,error:r,onRefresh:a,onConfigure:i,onRemove:o,children:c,className:l})=>n.jsxs(J,{className:`h-full ${l||""}`,children:[n.jsx(ye,{className:"pb-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx(ve,{className:"text-sm font-medium truncate",children:e}),t&&n.jsx(vt,{className:"text-xs truncate",children:t})]}),n.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[a&&n.jsx(le,{variant:"ghost",size:"sm",onClick:a,disabled:s,className:"h-6 w-6 p-0","aria-label":"Refresh widget",children:s?n.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border border-[var(--color-border-default)] border-r-transparent"}):n.jsx("span",{className:"text-xs",children:"↻"})}),i&&n.jsx(le,{variant:"ghost",size:"sm",onClick:i,className:"h-6 w-6 p-0","aria-label":"Configure widget",children:n.jsx("span",{className:"text-xs",children:"⚙"})}),o&&n.jsx(le,{variant:"ghost",size:"sm",onClick:o,className:"h-6 w-6 p-0 text-[var(--color-text-muted)] hover:text-[var(--color-semantic-danger-500)]","aria-label":"Remove widget",children:n.jsx("span",{className:"text-xs",children:"×"})})]})]})}),n.jsx(ee,{className:"pt-0",children:s?n.jsxs("div",{className:"space-y-3",children:[n.jsx(ot,{className:"h-4 w-3/4"}),n.jsx(ot,{className:"h-8 w-1/2"}),n.jsx(ot,{className:"h-3 w-full"})]}):r?n.jsxs("div",{className:"text-center py-4",children:[n.jsx("p",{className:"text-sm text-[var(--color-text-muted)] mb-2",children:r}),a&&n.jsx(le,{variant:"outline",size:"sm",onClick:a,children:"Retry"})]}):c})]}),jb=({widget:e,data:t,loading:s,error:r,onRefresh:a,onConfigure:i,onRemove:o})=>{const c=t?.value||0,l=t?.change||0,u=t?.changeType||"neutral",d=t?.unit||"",h=t?.trend||"stable",m=()=>{switch(u){case"positive":return"success";case"negative":return"danger";default:return"neutral"}},g=()=>{switch(h){case"up":return"↗";case"down":return"↘";default:return"→"}};return n.jsx(Dn,{title:e.title,description:e.description,loading:s,error:r,onRefresh:a,onConfigure:i,onRemove:o,children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-baseline gap-2",children:[n.jsx("span",{className:"text-2xl font-bold text-[var(--color-text-primary)]",children:typeof c=="number"?c.toLocaleString():c}),d&&n.jsx("span",{className:"text-sm text-[var(--color-text-muted)]",children:d})]}),l!==0&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(ht,{tone:m(),children:[l>0?"+":"",l,"%"]}),n.jsxs("span",{className:"text-xs text-[var(--color-text-muted)]",children:[g()," vs last period"]})]}),t?.description&&n.jsx("p",{className:"text-xs text-[var(--color-text-muted)]",children:t.description})]})})},Ol=({widget:e,data:t,loading:s,error:r,onRefresh:a,onConfigure:i,onRemove:o})=>n.jsx(Dn,{title:e.title,description:e.description,loading:s,error:r,onRefresh:a,onConfigure:i,onRemove:o,children:n.jsx("div",{className:"h-32 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl mb-2",children:"📊"}),n.jsx("p",{className:"text-sm text-[var(--color-text-muted)]",children:"Chart Widget"}),n.jsx("p",{className:"text-xs text-[var(--color-text-muted)] mt-1",children:t?`${t.length||0} data points`:"No data"})]})})}),Nb=({widget:e,data:t,loading:s,error:r,onRefresh:a,onConfigure:i,onRemove:o})=>{const c=t?.rows||[],l=t?.columns||[];return n.jsx(Dn,{title:e.title,description:e.description,loading:s,error:r,onRefresh:a,onConfigure:i,onRemove:o,children:n.jsx("div",{className:"space-y-2",children:c.length>0?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-xs text-[var(--color-text-muted)]",children:[c.length," rows, ",l.length," columns"]}),n.jsx("div",{className:"max-h-32 overflow-y-auto",children:n.jsxs("table",{className:"w-full text-xs",children:[n.jsx("thead",{children:n.jsx("tr",{className:"border-b border-[var(--color-border-subtle)]",children:l.slice(0,3).map((u,d)=>n.jsx("th",{className:"text-left py-1 pr-2 font-medium",children:u},d))})}),n.jsx("tbody",{children:c.slice(0,3).map((u,d)=>n.jsx("tr",{className:"border-b border-[var(--color-border-subtle)]",children:u.slice(0,3).map((h,m)=>n.jsx("td",{className:"py-1 pr-2 truncate",children:String(h)},m))},d))})]})})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("div",{className:"text-2xl mb-2",children:"📋"}),n.jsx("p",{className:"text-sm text-[var(--color-text-muted)]",children:"No data to display"})]})})})},pi=({widget:e,data:t,loading:s,error:r,onRefresh:a,onConfigure:i,onRemove:o})=>{const c=t?.items||[];return n.jsx(Dn,{title:e.title,description:e.description,loading:s,error:r,onRefresh:a,onConfigure:i,onRemove:o,children:n.jsx("div",{className:"space-y-2",children:c.length>0?n.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:c.slice(0,5).map((l,u)=>n.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-[var(--radius-sm)] bg-[var(--color-surface-muted)]",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-xs font-medium truncate",children:l.title||l.name}),l.description&&n.jsx("p",{className:"text-xs text-[var(--color-text-muted)] truncate",children:l.description})]}),l.badge&&n.jsx(ht,{tone:l.badge.tone||"neutral",className:"text-xs",children:l.badge.text})]},u))}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("div",{className:"text-2xl mb-2",children:"📝"}),n.jsx("p",{className:"text-sm text-[var(--color-text-muted)]",children:"No items to display"})]})})})},kb=({widget:e,data:t,loading:s,error:r,onRefresh:a,onConfigure:i,onRemove:o})=>{const c=t?.progress||0,l=t?.total||100,u=t?.label||"Progress",d=Math.round(c/l*100);return n.jsx(Dn,{title:e.title,description:e.description,loading:s,error:r,onRefresh:a,onConfigure:i,onRemove:o,children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium",children:u}),n.jsxs("span",{className:"text-sm text-[var(--color-text-muted)]",children:[d,"%"]})]}),n.jsx("div",{className:"w-full bg-[var(--color-surface-muted)] rounded-full h-2",children:n.jsx("div",{className:"bg-[var(--color-semantic-primary-500)] h-2 rounded-full transition-all duration-300",style:{width:`${d}%`}})}),n.jsxs("div",{className:"flex items-center justify-between text-xs text-[var(--color-text-muted)]",children:[n.jsxs("span",{children:[c," of ",l]}),t?.eta&&n.jsxs("span",{children:["ETA: ",t.eta]})]})]})})},_b=()=>{Pt.register({type:"kpi",component:jb,defaultConfig:{showTrend:!0,showChange:!0,format:"number"},defaultSize:"medium",title:"KPI Card",description:"Display key performance indicators with trends",category:"metrics"}),Pt.register({type:"chart",component:Ol,defaultConfig:{chartType:"line",showLegend:!0,showGrid:!0},defaultSize:"large",title:"Chart",description:"Visualize data with interactive charts",category:"charts"}),Pt.register({type:"table",component:Nb,defaultConfig:{pageSize:10,sortable:!0,filterable:!1},defaultSize:"large",title:"Data Table",description:"Display tabular data with sorting and filtering",category:"tables"}),Pt.register({type:"list",component:pi,defaultConfig:{maxItems:10,showBadges:!0,clickable:!0},defaultSize:"medium",title:"Item List",description:"Display a list of items with badges and actions",category:"lists"}),Pt.register({type:"progress",component:kb,defaultConfig:{showPercentage:!0,showETA:!1,animated:!0},defaultSize:"small",title:"Progress Bar",description:"Show progress towards a goal or completion status",category:"metrics"}),Pt.register({type:"alert",component:pi,defaultConfig:{maxItems:5,showBadges:!0,severity:"all"},defaultSize:"medium",title:"Alerts",description:"Display recent alerts and notifications",category:"lists"}),Pt.register({type:"activity",component:pi,defaultConfig:{maxItems:8,showTimestamps:!0,showAvatars:!1},defaultSize:"medium",title:"Recent Activity",description:"Show recent user activities and events",category:"lists"}),Pt.register({type:"calendar",component:Ol,defaultConfig:{view:"month",showEvents:!0,showHolidays:!1},defaultSize:"large",title:"Calendar",description:"Display calendar with events and milestones",category:"charts"})};_b();const Tb=({widgets:e,editable:t=!1,className:s})=>{const{t:r}=Qt(),a=fe(),i=mb(),o=fb(),c=p.useCallback(async g=>{try{const f=bb(g,{position:{x:0,y:0,w:1,h:1}});await i.mutateAsync(f)}catch{}},[i]),l=p.useCallback(async g=>{try{await o.mutateAsync(g)}catch{}},[o]),u=p.useCallback(g=>{a.invalidateQueries({queryKey:["dashboard","widgets",g]})},[a]),d=p.useCallback(g=>{},[]),h=g=>{switch(g){case"small":return"md:col-span-1";case"medium":return"md:col-span-2";case"large":return"md:col-span-3";case"xlarge":return"md:col-span-4";default:return"md:col-span-2"}},m=g=>{switch(g){case"small":return"md:row-span-1";case"medium":return"md:row-span-2";case"large":return"md:row-span-3";case"xlarge":return"md:row-span-4";default:return"md:row-span-2"}};return e.length===0?n.jsx("div",{className:`space-y-4 ${s||""}`,children:n.jsx(J,{children:n.jsx(ee,{className:"p-8",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-4xl mb-4",children:"📊"}),n.jsx("h3",{className:"text-lg font-semibold text-[var(--color-text-primary)] mb-2",children:r("dashboard.noWidgets",{defaultValue:"No widgets yet"})}),n.jsx("p",{className:"text-[var(--color-text-muted)] mb-4",children:r("dashboard.noWidgetsDescription",{defaultValue:"Add widgets to customize your dashboard"})}),t&&n.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:Pt.getAll().map(g=>n.jsx(le,{variant:"outline",size:"sm",onClick:()=>c(g.type),children:g.title},g.type))})]})})})}):n.jsxs("div",{className:`space-y-4 ${s||""}`,children:[t&&n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("span",{className:"text-sm text-[var(--color-text-muted)] mr-2",children:r("dashboard.addWidget",{defaultValue:"Add widget:"})}),Pt.getAll().map(g=>n.jsx(le,{variant:"outline",size:"sm",onClick:()=>c(g.type),disabled:i.isPending,children:g.title},g.type))]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 auto-rows-min",children:e.map(g=>n.jsx(Sb,{widget:g,className:`${h(g.size)} ${m(g.size)}`,onRefresh:()=>u(g.id),onConfigure:()=>d(g.id),onRemove:t?()=>l(g.id):void 0,editable:t},g.id))})]})},Sb=({widget:e,className:t,onRefresh:s,onConfigure:r,onRemove:a,editable:i=!1})=>{const{data:o,isLoading:c,error:l}=db(e.id,!0);return n.jsx("div",{className:`${t||""} ${i?"group":""}`,children:n.jsx(wb,{widget:e,data:o?.data,loading:c,error:l?.message,onRefresh:s,onConfigure:r,onRemove:a})})},Cb=()=>{const{t:e}=Qt(),{data:t,isLoading:s,error:r}=ub();if(s)return n.jsx(Wh,{});if(r)return n.jsx(J,{children:n.jsx(ee,{className:"p-6",children:n.jsx("div",{className:"text-center text-[var(--color-text-muted)]",children:e("dashboard.metricsError",{defaultValue:"Failed to load metrics"})})})});if(!t?.data)return null;const{data:a}=t;return n.jsxs("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-4",children:[n.jsx(J,{children:n.jsx(ee,{className:"p-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm text-[var(--color-text-muted)]",children:e("dashboard.totalProjects",{defaultValue:"Total Projects"})}),n.jsx("p",{className:"text-2xl font-semibold text-[var(--color-text-primary)]",children:a.totalProjects}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs(ht,{tone:"success",children:[a.activeProjects," active"]})})]})})}),n.jsx(J,{children:n.jsx(ee,{className:"p-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm text-[var(--color-text-muted)]",children:e("dashboard.totalTasks",{defaultValue:"Total Tasks"})}),n.jsx("p",{className:"text-2xl font-semibold text-[var(--color-text-primary)]",children:a.totalTasks}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs(ht,{tone:"info",children:[a.completedTasks," completed"]})})]})})}),n.jsx(J,{children:n.jsx(ee,{className:"p-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm text-[var(--color-text-muted)]",children:e("dashboard.pendingTasks",{defaultValue:"Pending Tasks"})}),n.jsx("p",{className:"text-2xl font-semibold text-[var(--color-text-primary)]",children:a.pendingTasks}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs(ht,{tone:"warning",children:[a.overdueTasks," overdue"]})})]})})}),n.jsx(J,{children:n.jsx(ee,{className:"p-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm text-[var(--color-text-muted)]",children:e("dashboard.teamMembers",{defaultValue:"Team Members"})}),n.jsx("p",{className:"text-2xl font-semibold text-[var(--color-text-primary)]",children:a.teamMembers}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx(ht,{tone:"neutral",children:"Active"})})]})})})]})},Ab=()=>{const{t:e}=Qt(),{data:t,isLoading:s,error:r}=Kh();return s?n.jsxs(J,{children:[n.jsx(ye,{children:n.jsx(ve,{children:e("dashboard.alerts",{defaultValue:"Alerts"})})}),n.jsx(ee,{children:n.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((a,i)=>n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-4 bg-[var(--color-surface-muted)] rounded w-3/4 mb-2"}),n.jsx("div",{className:"h-3 bg-[var(--color-surface-muted)] rounded w-1/2"})]},i))})})]}):r?n.jsxs(J,{children:[n.jsx(ye,{children:n.jsx(ve,{children:e("dashboard.alerts",{defaultValue:"Alerts"})})}),n.jsx(ee,{children:n.jsx("div",{className:"text-center text-[var(--color-text-muted)]",children:e("dashboard.alertsError",{defaultValue:"Failed to load alerts"})})})]}):!t?.data||t.data.length===0?n.jsxs(J,{children:[n.jsx(ye,{children:n.jsx(ve,{children:e("dashboard.alerts",{defaultValue:"Alerts"})})}),n.jsx(ee,{children:n.jsx("div",{className:"text-center text-[var(--color-text-muted)]",children:e("dashboard.noAlerts",{defaultValue:"No alerts at this time"})})})]}):n.jsxs(J,{children:[n.jsxs(ye,{children:[n.jsx(ve,{children:e("dashboard.alerts",{defaultValue:"Alerts"})}),n.jsx(vt,{children:e("dashboard.alertsDescription",{defaultValue:"Recent notifications and alerts"})})]}),n.jsx(ee,{children:n.jsx("div",{className:"space-y-3",children:t.data.slice(0,5).map(a=>n.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-[var(--radius-md)] bg-[var(--color-surface-muted)]",children:[n.jsx("div",{className:`h-2 w-2 rounded-full mt-2 ${a.severity==="critical"?"bg-[var(--color-semantic-danger-500)]":a.severity==="high"?"bg-[var(--color-semantic-warning-500)]":"bg-[var(--color-semantic-info-500)]"}`}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-[var(--color-text-primary)] truncate",children:a.title}),n.jsx("p",{className:"text-xs text-[var(--color-text-muted)] truncate",children:a.message}),n.jsx("p",{className:"text-xs text-[var(--color-text-muted)] mt-1",children:new Date(a.createdAt).toLocaleDateString()})]}),n.jsx(ht,{tone:a.severity==="critical"?"danger":a.severity==="high"?"warning":"info",children:a.severity})]},a.id))})})]})},Pb=()=>{const{t:e}=Qt(),t=Vs(),{data:s,isLoading:r,error:a}=zh(),[i,o]=Z.useState(!1),c=fe(),l=()=>{c.invalidateQueries({queryKey:Be.all}),W.success(e("dashboard.refreshSuccess",{defaultValue:"Dashboard refreshed successfully"}))},u=h=>{switch(h){case"newProject":t("/app/projects"),W.success(e("dashboard.navigatingToProjects",{defaultValue:"Navigating to projects..."}));break;case"newTask":W(e("dashboard.newTaskComingSoon",{defaultValue:"New task functionality coming soon"}));break;case"addMember":W(e("dashboard.addMemberComingSoon",{defaultValue:"Add member functionality coming soon"}));break;case"reports":W(e("dashboard.reportsComingSoon",{defaultValue:"Reports functionality coming soon"}));break;default:W(e("dashboard.actionNotImplemented",{defaultValue:"This action is not yet implemented"}))}};if(r)return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-[var(--color-text-primary)]",children:e("dashboard.title",{defaultValue:"Dashboard"})}),n.jsx("p",{className:"text-[var(--color-text-muted)]",children:e("dashboard.description",{defaultValue:"Overview of your projects and tasks"})})]}),n.jsx(le,{variant:"outline",size:"sm",onClick:l,children:e("dashboard.refresh",{defaultValue:"Refresh"})})]}),n.jsx(ob,{})]});if(a)return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-[var(--color-text-primary)]",children:e("dashboard.title",{defaultValue:"Dashboard"})}),n.jsx("p",{className:"text-[var(--color-text-muted)]",children:e("dashboard.description",{defaultValue:"Overview of your projects and tasks"})})]})}),n.jsx(J,{children:n.jsxs(ee,{className:vs("text-center text-[var(--color-text-muted)]","p-6"),children:[n.jsx("p",{className:"text-lg font-medium mb-2",children:e("dashboard.errorTitle",{defaultValue:"Failed to load dashboard"})}),n.jsx("p",{className:"text-sm mb-4",children:e("dashboard.errorDescription",{defaultValue:"Please try refreshing the page"})}),n.jsx(le,{variant:"outline",size:"sm",children:e("dashboard.retry",{defaultValue:"Retry"})})]})})]});const d=s?.data?.widgets||[];return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-[var(--color-text-primary)]",children:e("dashboard.title",{defaultValue:"Dashboard"})}),n.jsx("p",{className:"text-[var(--color-text-muted)]",children:e("dashboard.description",{defaultValue:"Overview of your projects and tasks"})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(le,{variant:i?"primary":"outline",size:"sm",onClick:()=>o(!i),children:i?e("dashboard.done",{defaultValue:"Done"}):e("dashboard.customize",{defaultValue:"Customize"})}),n.jsx(le,{variant:"outline",size:"sm",onClick:l,children:e("dashboard.refresh",{defaultValue:"Refresh"})})]})]}),n.jsx(p.Suspense,{fallback:n.jsx(Wh,{}),children:n.jsx(Cb,{})}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[n.jsx(p.Suspense,{fallback:n.jsx("div",{className:"h-64 bg-[var(--color-surface-muted)] rounded-[var(--radius-lg)] animate-pulse"}),children:n.jsx(Ab,{})}),n.jsxs(J,{children:[n.jsxs(ye,{children:[n.jsx(ve,{children:e("dashboard.quickActions",{defaultValue:"Quick Actions"})}),n.jsx(vt,{children:e("dashboard.quickActionsDescription",{defaultValue:"Common tasks and shortcuts"})})]}),n.jsx(ee,{children:n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs(le,{variant:"outline",className:"h-20 flex-col gap-2",onClick:()=>u("newProject"),children:[n.jsx("span",{className:"text-lg",children:"📊"}),n.jsx("span",{className:"text-sm",children:e("dashboard.newProject",{defaultValue:"New Project"})})]}),n.jsxs(le,{variant:"outline",className:"h-20 flex-col gap-2",onClick:()=>u("newTask"),children:[n.jsx("span",{className:"text-lg",children:"✅"}),n.jsx("span",{className:"text-sm",children:e("dashboard.newTask",{defaultValue:"New Task"})})]}),n.jsxs(le,{variant:"outline",className:"h-20 flex-col gap-2",onClick:()=>u("addMember"),children:[n.jsx("span",{className:"text-lg",children:"👥"}),n.jsx("span",{className:"text-sm",children:e("dashboard.addMember",{defaultValue:"Add Member"})})]}),n.jsxs(le,{variant:"outline",className:"h-20 flex-col gap-2",onClick:()=>u("reports"),children:[n.jsx("span",{className:"text-lg",children:"📈"}),n.jsx("span",{className:"text-sm",children:e("dashboard.reports",{defaultValue:"Reports"})})]})]})})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-lg font-semibold text-[var(--color-text-primary)]",children:e("dashboard.widgets",{defaultValue:"Widgets"})}),i&&n.jsx(ht,{tone:"info",children:e("dashboard.editMode",{defaultValue:"Edit Mode"})})]}),n.jsx(Tb,{widgets:d,editable:i})]})]})},Eb=()=>{const{t:e}=Qt(),[t,s]=Wu(),[r,a]=p.useState("all"),[i,o]=p.useState(new Set),c=fe(),{data:l,isLoading:u,error:d}=Kh(),h=pb(),m=gb();p.useEffect(()=>{const k=t.get("filter");k&&["all","unread","read","critical","high","medium","low"].includes(k)&&a(k)},[t]);const g=k=>{a(k),s({filter:k})},f=()=>{c.invalidateQueries({queryKey:Be.alerts()}),W.success(e("alerts.refreshSuccess",{defaultValue:"Alerts refreshed successfully"}))},x=p.useMemo(()=>l?.data?l.data.filter(k=>{switch(r){case"unread":return k.status==="unread";case"read":return k.status==="read";case"critical":return k.severity==="critical";case"high":return k.severity==="high";case"medium":return k.severity==="medium";case"low":return k.severity==="low";default:return!0}}):[],[l?.data,r]),y=async k=>{try{await h.mutateAsync(k),W.success(e("alerts.markReadSuccess",{defaultValue:"Alert marked as read"}))}catch{W.error(e("alerts.markReadError",{defaultValue:"Failed to mark alert as read"}))}},v=async()=>{try{await m.mutateAsync(),W.success(e("alerts.markAllReadSuccess",{defaultValue:"All alerts marked as read"}))}catch{W.error(e("alerts.markAllReadError",{defaultValue:"Failed to mark all alerts as read"}))}},w=k=>{const z=new Set(i);z.has(k)?z.delete(k):z.add(k),o(z)},j=()=>{i.size===x.length?o(new Set):o(new Set(x.map(k=>k.id)))},N=async()=>{try{const k=Array.from(i).map(z=>h.mutateAsync(z));await Promise.all(k),o(new Set),W.success(e("alerts.bulkMarkReadSuccess",{defaultValue:"Selected alerts marked as read"}))}catch{W.error(e("alerts.bulkMarkReadError",{defaultValue:"Failed to mark selected alerts as read"}))}},T=k=>{switch(k){case"critical":return"danger";case"high":return"warning";case"medium":return"info";case"low":return"neutral";default:return"neutral"}},O=k=>{switch(k){case"critical":return"🚨";case"high":return"⚠️";case"medium":return"ℹ️";case"low":return"📝";default:return"📄"}};if(u)return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-[var(--color-text-primary)]",children:e("alerts.title",{defaultValue:"Alerts Center"})}),n.jsx("p",{className:"text-[var(--color-text-muted)]",children:e("alerts.description",{defaultValue:"Manage and monitor system alerts"})})]})}),n.jsx(cb,{})]});if(d)return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-[var(--color-text-primary)]",children:e("alerts.title",{defaultValue:"Alerts Center"})}),n.jsx("p",{className:"text-[var(--color-text-muted)]",children:e("alerts.description",{defaultValue:"Manage and monitor system alerts"})})]})}),n.jsx(J,{children:n.jsx(ee,{className:"p-6",children:n.jsxs("div",{className:"text-center text-[var(--color-text-muted)]",children:[n.jsx("p",{className:"text-lg font-medium mb-2",children:e("alerts.errorTitle",{defaultValue:"Failed to load alerts"})}),n.jsx("p",{className:"text-sm mb-4",children:e("alerts.errorDescription",{defaultValue:"Please try refreshing the page"})}),n.jsx(le,{variant:"outline",size:"sm",children:e("alerts.retry",{defaultValue:"Retry"})})]})})})]});const D=l?.data||[];return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-[var(--color-text-primary)]",children:e("alerts.title",{defaultValue:"Alerts Center"})}),n.jsx("p",{className:"text-[var(--color-text-muted)]",children:e("alerts.description",{defaultValue:"Manage and monitor system alerts"})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(le,{variant:"outline",size:"sm",onClick:v,disabled:m.isPending||D.length===0,children:e("alerts.markAllRead",{defaultValue:"Mark All Read"})}),n.jsx(le,{variant:"outline",size:"sm",onClick:f,children:e("alerts.refresh",{defaultValue:"Refresh"})})]})]}),n.jsxs(J,{children:[n.jsx(ye,{children:n.jsx(ve,{className:"text-lg",children:e("alerts.filters",{defaultValue:"Filters"})})}),n.jsx(ee,{children:n.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"all",label:e("alerts.filterAll",{defaultValue:"All"})},{key:"unread",label:e("alerts.filterUnread",{defaultValue:"Unread"})},{key:"read",label:e("alerts.filterRead",{defaultValue:"Read"})},{key:"critical",label:e("alerts.filterCritical",{defaultValue:"Critical"})},{key:"high",label:e("alerts.filterHigh",{defaultValue:"High"})},{key:"medium",label:e("alerts.filterMedium",{defaultValue:"Medium"})},{key:"low",label:e("alerts.filterLow",{defaultValue:"Low"})}].map(({key:k,label:z})=>n.jsx(le,{variant:r===k?"primary":"outline",size:"sm",onClick:()=>g(k),children:z},k))})})]}),i.size>0&&n.jsx(J,{children:n.jsx(ee,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"text-sm text-[var(--color-text-muted)]",children:[e("alerts.selectedCount",{defaultValue:"Selected"}),": ",i.size]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(le,{variant:"outline",size:"sm",onClick:N,disabled:h.isPending,children:e("alerts.bulkMarkRead",{defaultValue:"Mark as Read"})}),n.jsx(le,{variant:"outline",size:"sm",onClick:()=>o(new Set),children:e("alerts.clearSelection",{defaultValue:"Clear Selection"})})]})]})})}),n.jsx("div",{className:"space-y-4",children:x.length===0?n.jsx(J,{children:n.jsx(ee,{className:"p-8",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-4xl mb-4",children:"📭"}),n.jsx("h3",{className:"text-lg font-semibold text-[var(--color-text-primary)] mb-2",children:e("alerts.noAlerts",{defaultValue:"No alerts found"})}),n.jsx("p",{className:"text-[var(--color-text-muted)]",children:r==="all"?e("alerts.noAlertsDescription",{defaultValue:"No alerts at this time"}):e("alerts.noFilteredAlerts",{defaultValue:"No alerts match the current filter"})})]})})}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:i.size===x.length&&x.length>0,onChange:j,className:"rounded border-[var(--color-border-default)]"}),n.jsx("span",{className:"text-sm text-[var(--color-text-muted)]",children:e("alerts.selectAll",{defaultValue:"Select all"})})]}),x.map(k=>n.jsx(J,{className:`transition-all duration-200 ${k.status==="unread"?"border-l-4 border-l-[var(--color-semantic-primary-500)]":""}`,children:n.jsx(ee,{className:"p-4",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("input",{type:"checkbox",checked:i.has(k.id),onChange:()=>w(k.id),className:"mt-1 rounded border-[var(--color-border-default)]"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-lg",children:O(k.severity)}),n.jsx("h3",{className:"text-sm font-semibold text-[var(--color-text-primary)] truncate",children:k.title}),n.jsx(ht,{tone:T(k.severity),children:k.severity})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[k.status==="unread"&&n.jsx(ht,{tone:"primary",className:"text-xs",children:e("alerts.unread",{defaultValue:"Unread"})}),n.jsx("span",{className:"text-xs text-[var(--color-text-muted)]",children:new Date(k.createdAt).toLocaleDateString()})]})]}),n.jsx("p",{className:"text-sm text-[var(--color-text-secondary)] mt-2",children:k.message}),n.jsxs("div",{className:"flex items-center justify-between mt-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-xs text-[var(--color-text-muted)]",children:[n.jsxs("span",{children:[e("alerts.source",{defaultValue:"Source"}),": ",k.source]}),n.jsx("span",{children:"•"}),n.jsxs("span",{children:[e("alerts.type",{defaultValue:"Type"}),": ",k.type]})]}),n.jsx("div",{className:"flex items-center gap-2",children:k.status==="unread"&&n.jsx(le,{variant:"outline",size:"sm",onClick:()=>y(k.id),disabled:h.isPending,children:e("alerts.markRead",{defaultValue:"Mark as Read"})})})]})]})]})})},k.id))]})})]})};var Mn=e=>e.type==="checkbox",Ks=e=>e instanceof Date,ut=e=>e==null;const Hh=e=>typeof e=="object";var ze=e=>!ut(e)&&!Array.isArray(e)&&Hh(e)&&!Ks(e),Qh=e=>ze(e)&&e.target?Mn(e.target)?e.target.checked:e.target.value:e,Rb=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Zh=(e,t)=>e.has(Rb(t)),Db=e=>{const t=e.constructor&&e.constructor.prototype;return ze(t)&&t.hasOwnProperty("isPrototypeOf")},Jo=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ke(e){let t;const s=Array.isArray(e),r=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(Jo&&(e instanceof Blob||r))&&(s||ze(e)))if(t=s?[]:Object.create(Object.getPrototypeOf(e)),!s&&!Db(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=Ke(e[a]));else return e;return t}var Za=e=>/^\w*$/.test(e),Fe=e=>e===void 0,ec=e=>Array.isArray(e)?e.filter(Boolean):[],tc=e=>ec(e.replace(/["|']|\]/g,"").split(/\.|\[/)),I=(e,t,s)=>{if(!t||!ze(e))return s;const r=(Za(t)?[t]:tc(t)).reduce((a,i)=>ut(a)?a:a[i],e);return Fe(r)||r===e?Fe(e[t])?s:e[t]:r},yt=e=>typeof e=="boolean",je=(e,t,s)=>{let r=-1;const a=Za(t)?[t]:tc(t),i=a.length,o=i-1;for(;++r<i;){const c=a[r];let l=s;if(r!==o){const u=e[c];l=ze(u)||Array.isArray(u)?u:isNaN(+a[r+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;e[c]=l,e=e[c]}};const Sa={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Bt={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ms={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Xh=Z.createContext(null);Xh.displayName="HookFormContext";const sc=()=>Z.useContext(Xh);var Yh=(e,t,s,r=!0)=>{const a={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const o=i;return t._proxyFormState[o]!==Bt.all&&(t._proxyFormState[o]=!r||Bt.all),s&&(s[o]=!0),e[o]}});return a};const rc=typeof window<"u"?Z.useLayoutEffect:Z.useEffect;function Mb(e){const t=sc(),{control:s=t.control,disabled:r,name:a,exact:i}=e||{},[o,c]=Z.useState(s._formState),l=Z.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return rc(()=>s._subscribe({name:a,formState:l.current,exact:i,callback:u=>{!r&&c({...s._formState,...u})}}),[a,r,i]),Z.useEffect(()=>{l.current.isValid&&s._setValid(!0)},[s]),Z.useMemo(()=>Yh(o,s,l.current,!1),[o,s])}var bt=e=>typeof e=="string",Gh=(e,t,s,r,a)=>bt(e)?(r&&t.watch.add(e),I(s,e,a)):Array.isArray(e)?e.map(i=>(r&&t.watch.add(i),I(s,i))):(r&&(t.watchAll=!0),s),to=e=>ut(e)||!Hh(e);function fs(e,t,s=new WeakSet){if(to(e)||to(t))return e===t;if(Ks(e)&&Ks(t))return e.getTime()===t.getTime();const r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;if(s.has(e)||s.has(t))return!0;s.add(e),s.add(t);for(const i of r){const o=e[i];if(!a.includes(i))return!1;if(i!=="ref"){const c=t[i];if(Ks(o)&&Ks(c)||ze(o)&&ze(c)||Array.isArray(o)&&Array.isArray(c)?!fs(o,c,s):o!==c)return!1}}return!0}function Ob(e){const t=sc(),{control:s=t.control,name:r,defaultValue:a,disabled:i,exact:o,compute:c}=e||{},l=Z.useRef(a),u=Z.useRef(c),d=Z.useRef(void 0);u.current=c;const h=Z.useMemo(()=>s._getWatch(r,l.current),[s,r]),[m,g]=Z.useState(u.current?u.current(h):h);return rc(()=>s._subscribe({name:r,formState:{values:!0},exact:o,callback:f=>{if(!i){const x=Gh(r,s._names,f.values||s._formValues,!1,l.current);if(u.current){const y=u.current(x);fs(y,d.current)||(g(y),d.current=y)}else g(x)}}}),[s,i,r,o]),Z.useEffect(()=>s._removeUnmounted()),m}function Fb(e){const t=sc(),{name:s,disabled:r,control:a=t.control,shouldUnregister:i,defaultValue:o}=e,c=Zh(a._names.array,s),l=Z.useMemo(()=>I(a._formValues,s,I(a._defaultValues,s,o)),[a,s,o]),u=Ob({control:a,name:s,defaultValue:l,exact:!0}),d=Mb({control:a,name:s,exact:!0}),h=Z.useRef(e),m=Z.useRef(void 0),g=Z.useRef(a.register(s,{...e.rules,value:u,...yt(e.disabled)?{disabled:e.disabled}:{}}));h.current=e;const f=Z.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!I(d.errors,s)},isDirty:{enumerable:!0,get:()=>!!I(d.dirtyFields,s)},isTouched:{enumerable:!0,get:()=>!!I(d.touchedFields,s)},isValidating:{enumerable:!0,get:()=>!!I(d.validatingFields,s)},error:{enumerable:!0,get:()=>I(d.errors,s)}}),[d,s]),x=Z.useCallback(j=>g.current.onChange({target:{value:Qh(j),name:s},type:Sa.CHANGE}),[s]),y=Z.useCallback(()=>g.current.onBlur({target:{value:I(a._formValues,s),name:s},type:Sa.BLUR}),[s,a._formValues]),v=Z.useCallback(j=>{const N=I(a._fields,s);N&&j&&(N._f.ref={focus:()=>j.focus&&j.focus(),select:()=>j.select&&j.select(),setCustomValidity:T=>j.setCustomValidity(T),reportValidity:()=>j.reportValidity()})},[a._fields,s]),w=Z.useMemo(()=>({name:s,value:u,...yt(r)||d.disabled?{disabled:d.disabled||r}:{},onChange:x,onBlur:y,ref:v}),[s,r,d.disabled,x,y,v,u]);return Z.useEffect(()=>{const j=a._options.shouldUnregister||i,N=m.current;N&&N!==s&&!c&&a.unregister(N),a.register(s,{...h.current.rules,...yt(h.current.disabled)?{disabled:h.current.disabled}:{}});const T=(O,D)=>{const k=I(a._fields,O);k&&k._f&&(k._f.mount=D)};if(T(s,!0),j){const O=Ke(I(a._options.defaultValues,s,h.current.defaultValue));je(a._defaultValues,s,O),Fe(I(a._formValues,s))&&je(a._formValues,s,O)}return!c&&a.register(s),m.current=s,()=>{(c?j&&!a._state.action:j)?a.unregister(s):T(s,!1)}},[s,a,c,i]),Z.useEffect(()=>{a._setDisabledField({disabled:r,name:s})},[r,s,a]),Z.useMemo(()=>({field:w,formState:d,fieldState:f}),[w,d,f])}const es=e=>e.render(Fb(e));var Jh=(e,t,s,r,a)=>t?{...s[e],types:{...s[e]&&s[e].types?s[e].types:{},[r]:a||!0}}:{},on=e=>Array.isArray(e)?e:[e],Fl=()=>{let e=[];return{get observers(){return e},next:a=>{for(const i of e)i.next&&i.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(i=>i!==a)}}),unsubscribe:()=>{e=[]}}};function em(e,t){const s={};for(const r in e)if(e.hasOwnProperty(r)){const a=e[r],i=t[r];if(a&&ze(a)&&i){const o=em(a,i);ze(o)&&(s[r]=o)}else e[r]&&(s[r]=i)}return s}var dt=e=>ze(e)&&!Object.keys(e).length,nc=e=>e.type==="file",qt=e=>typeof e=="function",Ca=e=>{if(!Jo)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},tm=e=>e.type==="select-multiple",ac=e=>e.type==="radio",Lb=e=>ac(e)||Mn(e),gi=e=>Ca(e)&&e.isConnected;function Vb(e,t){const s=t.slice(0,-1).length;let r=0;for(;r<s;)e=Fe(e)?r++:e[t[r++]];return e}function Ub(e){for(const t in e)if(e.hasOwnProperty(t)&&!Fe(e[t]))return!1;return!0}function Ue(e,t){const s=Array.isArray(t)?t:Za(t)?[t]:tc(t),r=s.length===1?e:Vb(e,s),a=s.length-1,i=s[a];return r&&delete r[i],a!==0&&(ze(r)&&dt(r)||Array.isArray(r)&&Ub(r))&&Ue(e,s.slice(0,-1)),e}var Ib=e=>{for(const t in e)if(qt(e[t]))return!0;return!1};function sm(e){return Array.isArray(e)||ze(e)&&!Ib(e)}function so(e,t={}){for(const s in e)sm(e[s])?(t[s]=Array.isArray(e[s])?[]:{},so(e[s],t[s])):Fe(e[s])||(t[s]=!0);return t}function fr(e,t,s){s||(s=so(t));for(const r in e)sm(e[r])?Fe(t)||to(s[r])?s[r]=so(e[r],Array.isArray(e[r])?[]:{}):fr(e[r],ut(t)?{}:t[r],s[r]):s[r]=!fs(e[r],t[r]);return s}const Ll={value:!1,isValid:!1},Vl={value:!0,isValid:!0};var rm=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Fe(e[0].attributes.value)?Fe(e[0].value)||e[0].value===""?Vl:{value:e[0].value,isValid:!0}:Vl:Ll}return Ll},nm=(e,{valueAsNumber:t,valueAsDate:s,setValueAs:r})=>Fe(e)?e:t?e===""?NaN:e&&+e:s&&bt(e)?new Date(e):r?r(e):e;const Ul={isValid:!1,value:null};var am=e=>Array.isArray(e)?e.reduce((t,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:t,Ul):Ul;function Il(e){const t=e.ref;return nc(t)?t.files:ac(t)?am(e.refs).value:tm(t)?[...t.selectedOptions].map(({value:s})=>s):Mn(t)?rm(e.refs).value:nm(Fe(t.value)?e.ref.value:t.value,e)}var $b=(e,t,s,r)=>{const a={};for(const i of e){const o=I(t,i);o&&je(a,i,o._f)}return{criteriaMode:s,names:[...e],fields:a,shouldUseNativeValidation:r}},Aa=e=>e instanceof RegExp,Jr=e=>Fe(e)?e:Aa(e)?e.source:ze(e)?Aa(e.value)?e.value.source:e.value:e,$l=e=>({isOnSubmit:!e||e===Bt.onSubmit,isOnBlur:e===Bt.onBlur,isOnChange:e===Bt.onChange,isOnAll:e===Bt.all,isOnTouch:e===Bt.onTouched});const Bl="AsyncFunction";var Bb=e=>!!e&&!!e.validate&&!!(qt(e.validate)&&e.validate.constructor.name===Bl||ze(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Bl)),qb=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),ql=(e,t,s)=>!s&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const cn=(e,t,s,r)=>{for(const a of s||Object.keys(e)){const i=I(e,a);if(i){const{_f:o,...c}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],a)&&!r)return!0;if(o.ref&&t(o.ref,o.name)&&!r)return!0;if(cn(c,t))break}else if(ze(c)&&cn(c,t))break}}};function Wl(e,t,s){const r=I(e,s);if(r||Za(s))return{error:r,name:s};const a=s.split(".");for(;a.length;){const i=a.join("."),o=I(t,i),c=I(e,i);if(o&&!Array.isArray(o)&&s!==i)return{name:s};if(c&&c.type)return{name:i,error:c};if(c&&c.root&&c.root.type)return{name:`${i}.root`,error:c.root};a.pop()}return{name:s}}var Wb=(e,t,s,r)=>{s(e);const{name:a,...i}=e;return dt(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!r||Bt.all))},zb=(e,t,s)=>!e||!t||e===t||on(e).some(r=>r&&(s?r===t:r.startsWith(t)||t.startsWith(r))),Kb=(e,t,s,r,a)=>a.isOnAll?!1:!s&&a.isOnTouch?!(t||e):(s?r.isOnBlur:a.isOnBlur)?!e:(s?r.isOnChange:a.isOnChange)?e:!0,Hb=(e,t)=>!ec(I(e,t)).length&&Ue(e,t),Qb=(e,t,s)=>{const r=on(I(e,s));return je(r,"root",t[s]),je(e,s,r),e};function zl(e,t,s="validate"){if(bt(e)||Array.isArray(e)&&e.every(bt)||yt(e)&&!e)return{type:s,message:bt(e)?e:"",ref:t}}var ur=e=>ze(e)&&!Aa(e)?e:{value:e,message:""},Kl=async(e,t,s,r,a,i)=>{const{ref:o,refs:c,required:l,maxLength:u,minLength:d,min:h,max:m,pattern:g,validate:f,name:x,valueAsNumber:y,mount:v}=e._f,w=I(s,x);if(!v||t.has(x))return{};const j=c?c[0]:o,N=te=>{a&&j.reportValidity&&(j.setCustomValidity(yt(te)?"":te||""),j.reportValidity())},T={},O=ac(o),D=Mn(o),k=O||D,z=(y||nc(o))&&Fe(o.value)&&Fe(w)||Ca(o)&&o.value===""||w===""||Array.isArray(w)&&!w.length,ne=Jh.bind(null,x,r,T),ue=(te,re,V,S=ms.maxLength,E=ms.minLength)=>{const Q=te?re:V;T[x]={type:te?S:E,message:Q,ref:o,...ne(te?S:E,Q)}};if(i?!Array.isArray(w)||!w.length:l&&(!k&&(z||ut(w))||yt(w)&&!w||D&&!rm(c).isValid||O&&!am(c).isValid)){const{value:te,message:re}=bt(l)?{value:!!l,message:l}:ur(l);if(te&&(T[x]={type:ms.required,message:re,ref:j,...ne(ms.required,re)},!r))return N(re),T}if(!z&&(!ut(h)||!ut(m))){let te,re;const V=ur(m),S=ur(h);if(!ut(w)&&!isNaN(w)){const E=o.valueAsNumber||w&&+w;ut(V.value)||(te=E>V.value),ut(S.value)||(re=E<S.value)}else{const E=o.valueAsDate||new Date(w),Q=rt=>new Date(new Date().toDateString()+" "+rt),_e=o.type=="time",Ae=o.type=="week";bt(V.value)&&w&&(te=_e?Q(w)>Q(V.value):Ae?w>V.value:E>new Date(V.value)),bt(S.value)&&w&&(re=_e?Q(w)<Q(S.value):Ae?w<S.value:E<new Date(S.value))}if((te||re)&&(ue(!!te,V.message,S.message,ms.max,ms.min),!r))return N(T[x].message),T}if((u||d)&&!z&&(bt(w)||i&&Array.isArray(w))){const te=ur(u),re=ur(d),V=!ut(te.value)&&w.length>+te.value,S=!ut(re.value)&&w.length<+re.value;if((V||S)&&(ue(V,te.message,re.message),!r))return N(T[x].message),T}if(g&&!z&&bt(w)){const{value:te,message:re}=ur(g);if(Aa(te)&&!w.match(te)&&(T[x]={type:ms.pattern,message:re,ref:o,...ne(ms.pattern,re)},!r))return N(re),T}if(f){if(qt(f)){const te=await f(w,s),re=zl(te,j);if(re&&(T[x]={...re,...ne(ms.validate,re.message)},!r))return N(re.message),T}else if(ze(f)){let te={};for(const re in f){if(!dt(te)&&!r)break;const V=zl(await f[re](w,s),j,re);V&&(te={...V,...ne(re,V.message)},N(V.message),r&&(T[x]=te))}if(!dt(te)&&(T[x]={ref:j,...te},!r))return T}}return N(!0),T};const Zb={mode:Bt.onSubmit,reValidateMode:Bt.onChange,shouldFocusError:!0};function Xb(e={}){let t={...Zb,...e},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:qt(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},r={},a=ze(t.defaultValues)||ze(t.values)?Ke(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:Ke(a),o={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...d};const m={array:Fl(),state:Fl()},g=t.criteriaMode===Bt.all,f=b=>_=>{clearTimeout(u),u=setTimeout(b,_)},x=async b=>{if(!t.disabled&&(d.isValid||h.isValid||b)){const _=t.resolver?dt((await D()).errors):await z(r,!0);_!==s.isValid&&m.state.next({isValid:_})}},y=(b,_)=>{!t.disabled&&(d.isValidating||d.validatingFields||h.isValidating||h.validatingFields)&&((b||Array.from(c.mount)).forEach(A=>{A&&(_?je(s.validatingFields,A,_):Ue(s.validatingFields,A))}),m.state.next({validatingFields:s.validatingFields,isValidating:!dt(s.validatingFields)}))},v=(b,_=[],A,U,L=!0,F=!0)=>{if(U&&A&&!t.disabled){if(o.action=!0,F&&Array.isArray(I(r,b))){const X=A(I(r,b),U.argA,U.argB);L&&je(r,b,X)}if(F&&Array.isArray(I(s.errors,b))){const X=A(I(s.errors,b),U.argA,U.argB);L&&je(s.errors,b,X),Hb(s.errors,b)}if((d.touchedFields||h.touchedFields)&&F&&Array.isArray(I(s.touchedFields,b))){const X=A(I(s.touchedFields,b),U.argA,U.argB);L&&je(s.touchedFields,b,X)}(d.dirtyFields||h.dirtyFields)&&(s.dirtyFields=fr(a,i)),m.state.next({name:b,isDirty:ue(b,_),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else je(i,b,_)},w=(b,_)=>{je(s.errors,b,_),m.state.next({errors:s.errors})},j=b=>{s.errors=b,m.state.next({errors:s.errors,isValid:!1})},N=(b,_,A,U)=>{const L=I(r,b);if(L){const F=I(i,b,Fe(A)?I(a,b):A);Fe(F)||U&&U.defaultChecked||_?je(i,b,_?F:Il(L._f)):V(b,F),o.mount&&x()}},T=(b,_,A,U,L)=>{let F=!1,X=!1;const xe={name:b};if(!t.disabled){if(!A||U){(d.isDirty||h.isDirty)&&(X=s.isDirty,s.isDirty=xe.isDirty=ue(),F=X!==xe.isDirty);const Te=fs(I(a,b),_);X=!!I(s.dirtyFields,b),Te?Ue(s.dirtyFields,b):je(s.dirtyFields,b,!0),xe.dirtyFields=s.dirtyFields,F=F||(d.dirtyFields||h.dirtyFields)&&X!==!Te}if(A){const Te=I(s.touchedFields,b);Te||(je(s.touchedFields,b,A),xe.touchedFields=s.touchedFields,F=F||(d.touchedFields||h.touchedFields)&&Te!==A)}F&&L&&m.state.next(xe)}return F?xe:{}},O=(b,_,A,U)=>{const L=I(s.errors,b),F=(d.isValid||h.isValid)&&yt(_)&&s.isValid!==_;if(t.delayError&&A?(l=f(()=>w(b,A)),l(t.delayError)):(clearTimeout(u),l=null,A?je(s.errors,b,A):Ue(s.errors,b)),(A?!fs(L,A):L)||!dt(U)||F){const X={...U,...F&&yt(_)?{isValid:_}:{},errors:s.errors,name:b};s={...s,...X},m.state.next(X)}},D=async b=>{y(b,!0);const _=await t.resolver(i,t.context,$b(b||c.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return y(b),_},k=async b=>{const{errors:_}=await D(b);if(b)for(const A of b){const U=I(_,A);U?je(s.errors,A,U):Ue(s.errors,A)}else s.errors=_;return _},z=async(b,_,A={valid:!0})=>{for(const U in b){const L=b[U];if(L){const{_f:F,...X}=L;if(F){const xe=c.array.has(F.name),Te=L._f&&Bb(L._f);Te&&d.validatingFields&&y([F.name],!0);const lt=await Kl(L,c.disabled,i,g,t.shouldUseNativeValidation&&!_,xe);if(Te&&d.validatingFields&&y([F.name]),lt[F.name]&&(A.valid=!1,_))break;!_&&(I(lt,F.name)?xe?Qb(s.errors,lt,F.name):je(s.errors,F.name,lt[F.name]):Ue(s.errors,F.name))}!dt(X)&&await z(X,_,A)}}return A.valid},ne=()=>{for(const b of c.unMount){const _=I(r,b);_&&(_._f.refs?_._f.refs.every(A=>!gi(A)):!gi(_._f.ref))&&zr(b)}c.unMount=new Set},ue=(b,_)=>!t.disabled&&(b&&_&&je(i,b,_),!fs(rt(),a)),te=(b,_,A)=>Gh(b,c,{...o.mount?i:Fe(_)?a:bt(b)?{[b]:_}:_},A,_),re=b=>ec(I(o.mount?i:a,b,t.shouldUnregister?I(a,b,[]):[])),V=(b,_,A={})=>{const U=I(r,b);let L=_;if(U){const F=U._f;F&&(!F.disabled&&je(i,b,nm(_,F)),L=Ca(F.ref)&&ut(_)?"":_,tm(F.ref)?[...F.ref.options].forEach(X=>X.selected=L.includes(X.value)):F.refs?Mn(F.ref)?F.refs.forEach(X=>{(!X.defaultChecked||!X.disabled)&&(Array.isArray(L)?X.checked=!!L.find(xe=>xe===X.value):X.checked=L===X.value||!!L)}):F.refs.forEach(X=>X.checked=X.value===L):nc(F.ref)?F.ref.value="":(F.ref.value=L,F.ref.type||m.state.next({name:b,values:Ke(i)})))}(A.shouldDirty||A.shouldTouch)&&T(b,L,A.shouldTouch,A.shouldDirty,!0),A.shouldValidate&&Ae(b)},S=(b,_,A)=>{for(const U in _){if(!_.hasOwnProperty(U))return;const L=_[U],F=b+"."+U,X=I(r,F);(c.array.has(b)||ze(L)||X&&!X._f)&&!Ks(L)?S(F,L,A):V(F,L,A)}},E=(b,_,A={})=>{const U=I(r,b),L=c.array.has(b),F=Ke(_);je(i,b,F),L?(m.array.next({name:b,values:Ke(i)}),(d.isDirty||d.dirtyFields||h.isDirty||h.dirtyFields)&&A.shouldDirty&&m.state.next({name:b,dirtyFields:fr(a,i),isDirty:ue(b,F)})):U&&!U._f&&!ut(F)?S(b,F,A):V(b,F,A),ql(b,c)&&m.state.next({...s,name:b}),m.state.next({name:o.mount?b:void 0,values:Ke(i)})},Q=async b=>{o.mount=!0;const _=b.target;let A=_.name,U=!0;const L=I(r,A),F=Te=>{U=Number.isNaN(Te)||Ks(Te)&&isNaN(Te.getTime())||fs(Te,I(i,A,Te))},X=$l(t.mode),xe=$l(t.reValidateMode);if(L){let Te,lt;const or=_.type?Il(L._f):Qh(b),Xt=b.type===Sa.BLUR||b.type===Sa.FOCUS_OUT,P=!qb(L._f)&&!t.resolver&&!I(s.errors,A)&&!L._f.deps||Kb(Xt,I(s.touchedFields,A),s.isSubmitted,xe,X),q=ql(A,c,Xt);je(i,A,or),Xt?(!_||!_.readOnly)&&(L._f.onBlur&&L._f.onBlur(b),l&&l(0)):L._f.onChange&&L._f.onChange(b);const at=T(A,or,Xt),xt=!dt(at)||q;if(!Xt&&m.state.next({name:A,type:b.type,values:Ke(i)}),P)return(d.isValid||h.isValid)&&(t.mode==="onBlur"?Xt&&x():Xt||x()),xt&&m.state.next({name:A,...q?{}:at});if(!Xt&&q&&m.state.next({...s}),t.resolver){const{errors:Ft}=await D([A]);if(F(or),U){const _t=Wl(s.errors,r,A),Yt=Wl(Ft,r,_t.name||A);Te=Yt.error,A=Yt.name,lt=dt(Ft)}}else y([A],!0),Te=(await Kl(L,c.disabled,i,g,t.shouldUseNativeValidation))[A],y([A]),F(or),U&&(Te?lt=!1:(d.isValid||h.isValid)&&(lt=await z(r,!0)));U&&(L._f.deps&&(!Array.isArray(L._f.deps)||L._f.deps.length>0)&&Ae(L._f.deps),O(A,lt,Te,at))}},_e=(b,_)=>{if(I(s.errors,_)&&b.focus)return b.focus(),1},Ae=async(b,_={})=>{let A,U;const L=on(b);if(t.resolver){const F=await k(Fe(b)?b:L);A=dt(F),U=b?!L.some(X=>I(F,X)):A}else b?(U=(await Promise.all(L.map(async F=>{const X=I(r,F);return await z(X&&X._f?{[F]:X}:X)}))).every(Boolean),!(!U&&!s.isValid)&&x()):U=A=await z(r);return m.state.next({...!bt(b)||(d.isValid||h.isValid)&&A!==s.isValid?{}:{name:b},...t.resolver||!b?{isValid:A}:{},errors:s.errors}),_.shouldFocus&&!U&&cn(r,_e,b?L:c.mount),U},rt=(b,_)=>{let A={...o.mount?i:a};return _&&(A=em(_.dirtyFields?s.dirtyFields:s.touchedFields,A)),Fe(b)?A:bt(b)?I(A,b):b.map(U=>I(A,U))},R=(b,_)=>({invalid:!!I((_||s).errors,b),isDirty:!!I((_||s).dirtyFields,b),error:I((_||s).errors,b),isValidating:!!I(s.validatingFields,b),isTouched:!!I((_||s).touchedFields,b)}),Ee=b=>{b&&on(b).forEach(_=>Ue(s.errors,_)),m.state.next({errors:b?s.errors:{}})},nt=(b,_,A)=>{const U=(I(r,b,{_f:{}})._f||{}).ref,L=I(s.errors,b)||{},{ref:F,message:X,type:xe,...Te}=L;je(s.errors,b,{...Te,..._,ref:U}),m.state.next({name:b,errors:s.errors,isValid:!1}),A&&A.shouldFocus&&U&&U.focus&&U.focus()},gt=(b,_)=>qt(b)?m.state.subscribe({next:A=>"values"in A&&b(te(void 0,_),A)}):te(b,_,!0),Wr=b=>m.state.subscribe({next:_=>{zb(b.name,_.name,b.exact)&&Wb(_,b.formState||d,oe,b.reRenderRoot)&&b.callback({values:{...i},...s,..._,defaultValues:a})}}).unsubscribe,ar=b=>(o.mount=!0,h={...h,...b.formState},Wr({...b,formState:h})),zr=(b,_={})=>{for(const A of b?on(b):c.mount)c.mount.delete(A),c.array.delete(A),_.keepValue||(Ue(r,A),Ue(i,A)),!_.keepError&&Ue(s.errors,A),!_.keepDirty&&Ue(s.dirtyFields,A),!_.keepTouched&&Ue(s.touchedFields,A),!_.keepIsValidating&&Ue(s.validatingFields,A),!t.shouldUnregister&&!_.keepDefaultValue&&Ue(a,A);m.state.next({values:Ke(i)}),m.state.next({...s,..._.keepDirty?{isDirty:ue()}:{}}),!_.keepIsValid&&x()},Kr=({disabled:b,name:_})=>{(yt(b)&&o.mount||b||c.disabled.has(_))&&(b?c.disabled.add(_):c.disabled.delete(_))},bs=(b,_={})=>{let A=I(r,b);const U=yt(_.disabled)||yt(t.disabled);return je(r,b,{...A||{},_f:{...A&&A._f?A._f:{ref:{name:b}},name:b,mount:!0,..._}}),c.mount.add(b),A?Kr({disabled:yt(_.disabled)?_.disabled:t.disabled,name:b}):N(b,!0,_.value),{...U?{disabled:_.disabled||t.disabled}:{},...t.progressive?{required:!!_.required,min:Jr(_.min),max:Jr(_.max),minLength:Jr(_.minLength),maxLength:Jr(_.maxLength),pattern:Jr(_.pattern)}:{},name:b,onChange:Q,onBlur:Q,ref:L=>{if(L){bs(b,_),A=I(r,b);const F=Fe(L.value)&&L.querySelectorAll&&L.querySelectorAll("input,select,textarea")[0]||L,X=Lb(F),xe=A._f.refs||[];if(X?xe.find(Te=>Te===F):F===A._f.ref)return;je(r,b,{_f:{...A._f,...X?{refs:[...xe.filter(gi),F,...Array.isArray(I(a,b))?[{}]:[]],ref:{type:F.type,name:b}}:{ref:F}}}),N(b,!1,void 0,F)}else A=I(r,b,{}),A._f&&(A._f.mount=!1),(t.shouldUnregister||_.shouldUnregister)&&!(Zh(c.array,b)&&o.action)&&c.unMount.add(b)}}},Hr=()=>t.shouldFocusError&&cn(r,_e,c.mount),$n=b=>{yt(b)&&(m.state.next({disabled:b}),cn(r,(_,A)=>{const U=I(r,A);U&&(_.disabled=U._f.disabled||b,Array.isArray(U._f.refs)&&U._f.refs.forEach(L=>{L.disabled=U._f.disabled||b}))},0,!1))},ws=(b,_)=>async A=>{let U;A&&(A.preventDefault&&A.preventDefault(),A.persist&&A.persist());let L=Ke(i);if(m.state.next({isSubmitting:!0}),t.resolver){const{errors:F,values:X}=await D();s.errors=F,L=Ke(X)}else await z(r);if(c.disabled.size)for(const F of c.disabled)Ue(L,F);if(Ue(s.errors,"root"),dt(s.errors)){m.state.next({errors:{}});try{await b(L,A)}catch(F){U=F}}else _&&await _({...s.errors},A),Hr(),setTimeout(Hr);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:dt(s.errors)&&!U,submitCount:s.submitCount+1,errors:s.errors}),U)throw U},ni=(b,_={})=>{I(r,b)&&(Fe(_.defaultValue)?E(b,Ke(I(a,b))):(E(b,_.defaultValue),je(a,b,Ke(_.defaultValue))),_.keepTouched||Ue(s.touchedFields,b),_.keepDirty||(Ue(s.dirtyFields,b),s.isDirty=_.defaultValue?ue(b,Ke(I(a,b))):ue()),_.keepError||(Ue(s.errors,b),d.isValid&&x()),m.state.next({...s}))},js=(b,_={})=>{const A=b?Ke(b):a,U=Ke(A),L=dt(b),F=L?a:U;if(_.keepDefaultValues||(a=A),!_.keepValues){if(_.keepDirtyValues){const X=new Set([...c.mount,...Object.keys(fr(a,i))]);for(const xe of Array.from(X))I(s.dirtyFields,xe)?je(F,xe,I(i,xe)):E(xe,I(F,xe))}else{if(Jo&&Fe(b))for(const X of c.mount){const xe=I(r,X);if(xe&&xe._f){const Te=Array.isArray(xe._f.refs)?xe._f.refs[0]:xe._f.ref;if(Ca(Te)){const lt=Te.closest("form");if(lt){lt.reset();break}}}}if(_.keepFieldsRef)for(const X of c.mount)E(X,I(F,X));else r={}}i=t.shouldUnregister?_.keepDefaultValues?Ke(a):{}:Ke(F),m.array.next({values:{...F}}),m.state.next({values:{...F}})}c={mount:_.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!_.keepIsValid||!!_.keepDirtyValues,o.watch=!!t.shouldUnregister,m.state.next({submitCount:_.keepSubmitCount?s.submitCount:0,isDirty:L?!1:_.keepDirty?s.isDirty:!!(_.keepDefaultValues&&!fs(b,a)),isSubmitted:_.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:L?{}:_.keepDirtyValues?_.keepDefaultValues&&i?fr(a,i):s.dirtyFields:_.keepDefaultValues&&b?fr(a,b):_.keepDirty?s.dirtyFields:{},touchedFields:_.keepTouched?s.touchedFields:{},errors:_.keepErrors?s.errors:{},isSubmitSuccessful:_.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},ir=(b,_)=>js(qt(b)?b(i):b,_),Is=(b,_={})=>{const A=I(r,b),U=A&&A._f;if(U){const L=U.refs?U.refs[0]:U.ref;L.focus&&(L.focus(),_.shouldSelect&&qt(L.select)&&L.select())}},oe=b=>{s={...s,...b}},Bn={control:{register:bs,unregister:zr,getFieldState:R,handleSubmit:ws,setError:nt,_subscribe:Wr,_runSchema:D,_focusError:Hr,_getWatch:te,_getDirty:ue,_setValid:x,_setFieldArray:v,_setDisabledField:Kr,_setErrors:j,_getFieldArray:re,_reset:js,_resetDefaultValues:()=>qt(t.defaultValues)&&t.defaultValues().then(b=>{ir(b,t.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:ne,_disableForm:$n,_subjects:m,_proxyFormState:d,get _fields(){return r},get _formValues(){return i},get _state(){return o},set _state(b){o=b},get _defaultValues(){return a},get _names(){return c},set _names(b){c=b},get _formState(){return s},get _options(){return t},set _options(b){t={...t,...b}}},subscribe:ar,trigger:Ae,register:bs,handleSubmit:ws,watch:gt,setValue:E,getValues:rt,reset:ir,resetField:ni,clearErrors:Ee,unregister:zr,setError:nt,setFocus:Is,getFieldState:R};return{...Bn,formControl:Bn}}function Xa(e={}){const t=Z.useRef(void 0),s=Z.useRef(void 0),[r,a]=Z.useState({isDirty:!1,isValidating:!1,isLoading:qt(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:qt(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:r},e.defaultValues&&!qt(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...c}=Xb(e);t.current={...c,formState:r}}const i=t.current.control;return i._options=e,rc(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(c=>({...c,isReady:!0})),i._formState.isReady=!0,o},[i]),Z.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),Z.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),Z.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),Z.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),Z.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==r.isDirty&&i._subjects.state.next({isDirty:o})}},[i,r.isDirty]),Z.useEffect(()=>{e.values&&!fs(e.values,s.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),s.current=e.values,a(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),Z.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=Yh(r,i),t.current}const Hl=(e,t,s)=>{if(e&&"reportValidity"in e){const r=I(s,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},im=(e,t)=>{for(const s in t.fields){const r=t.fields[s];r&&r.ref&&"reportValidity"in r.ref?Hl(r.ref,s,e):r.refs&&r.refs.forEach(a=>Hl(a,s,e))}},Yb=(e,t)=>{t.shouldUseNativeValidation&&im(e,t);const s={};for(const r in e){const a=I(t.fields,r),i=Object.assign(e[r]||{},{ref:a&&a.ref});if(Gb(t.names||Object.keys(e),r)){const o=Object.assign({},I(s,r));je(o,"root",i),je(s,r,o)}else je(s,r,i)}return s},Gb=(e,t)=>e.some(s=>s.startsWith(t+"."));var Jb=function(e,t){for(var s={};e.length;){var r=e[0],a=r.code,i=r.message,o=r.path.join(".");if(!s[o])if("unionErrors"in r){var c=r.unionErrors[0].errors[0];s[o]={message:c.message,type:c.code}}else s[o]={message:i,type:a};if("unionErrors"in r&&r.unionErrors.forEach(function(d){return d.errors.forEach(function(h){return e.push(h)})}),t){var l=s[o].types,u=l&&l[r.code];s[o]=Jh(o,t,s,a,u?[].concat(u,r.message):r.message)}e.shift()}return s},Ya=function(e,t,s){return s===void 0&&(s={}),function(r,a,i){try{return Promise.resolve((function(o,c){try{var l=Promise.resolve(e[s.mode==="sync"?"parse":"parseAsync"](r,t)).then(function(u){return i.shouldUseNativeValidation&&im({},i),{errors:{},values:s.raw?r:u}})}catch(u){return c(u)}return l&&l.then?l.then(void 0,c):l})(0,function(o){if((function(c){return Array.isArray(c?.errors)})(o))return{values:{},errors:Yb(Jb(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}};const ew={primary:{light:{ramp:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a"},contrast:"#ffffff"},dark:{ramp:{50:"#0b1226",100:"#102046",200:"#132b5c",300:"#17387b",400:"#1b469a",500:"#2255b3",600:"#376de0",700:"#5a89f0",800:"#88a8f6",900:"#c3d4fb"},contrast:"#0b1120"}},secondary:{light:{ramp:{50:"#f5f3ff",100:"#ede9fe",200:"#ddd6fe",300:"#c4b5fd",400:"#a855f7",500:"#9333ea",600:"#7e22ce",700:"#6b21a8",800:"#581c87",900:"#43146b"},contrast:"#ffffff"},dark:{ramp:{50:"#161037",100:"#22165c",200:"#301c80",300:"#3d23a3",400:"#4d2fc7",500:"#5f3fe2",600:"#7b5cf3",700:"#9d7ffc",800:"#c3abff",900:"#e3d9ff"},contrast:"#0b1120"}},success:{light:{ramp:{50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b"},contrast:"#ffffff"},dark:{ramp:{50:"#052e21",100:"#084734",200:"#0c5f46",300:"#11775a",400:"#1a8f6f",500:"#24a481",600:"#34be97",700:"#5fd6b1",800:"#92e7cd",900:"#c8f6e5"},contrast:"#0b1120"}},warning:{light:{ramp:{50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f"},contrast:"#0b1120"},dark:{ramp:{50:"#2a1900",100:"#3d2200",200:"#502d00",300:"#633a00",400:"#7c4c00",500:"#995f00",600:"#b77707",700:"#d89826",800:"#f3b84f",900:"#fde4a3"},contrast:"#0b1120"}},danger:{light:{ramp:{50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d"},contrast:"#ffffff"},dark:{ramp:{50:"#2c0a14",100:"#3f111d",200:"#561a27",300:"#6c2431",400:"#892f3e",500:"#a53b4a",600:"#c75261",700:"#e56f7c",800:"#f59aa7",900:"#ffd2d8"},contrast:"#0b1120"}},info:{light:{ramp:{50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e"},contrast:"#ffffff"},dark:{ramp:{50:"#0b2233",100:"#0f3148",200:"#13425f",300:"#155078",400:"#1a6293",500:"#1f75ae",600:"#2f91cc",700:"#54abd8",800:"#86c6e8",900:"#c9e8f6"},contrast:"#0b1120"}},neutral:{light:{ramp:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5f5",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a"},contrast:"#0f172a"},dark:{ramp:{50:"#111827",100:"#1f2937",200:"#273341",300:"#323f4c",400:"#3f4c58",500:"#4b5864",600:"#5b6774",700:"#748190",800:"#9aa5b1",900:"#cbd4dd"},contrast:"#f8fafc"}}},tw={light:{base:"#f4f6fb",card:"#ffffff",muted:"#f1f5f9",subtle:"#e2e8f0",overlay:"rgba(15, 23, 42, 0.55)"},dark:{base:"#0b1120",card:"#111827",muted:"#1f2937",subtle:"#1e293b",overlay:"rgba(15, 23, 42, 0.72)"}},sw={light:{primary:"#0f172a",secondary:"#334155",muted:"#64748b",contrast:"#f8fafc"},dark:{primary:"#f8fafc",secondary:"#e2e8f0",muted:"#94a3b8",contrast:"#0b1120"}},rw={light:{subtle:"#e2e8f0",default:"#cbd5f5",strong:"#94a3b8",focus:"rgba(59, 130, 246, 0.45)"},dark:{subtle:"#1e293b",default:"#334155",strong:"#475569",focus:"rgba(59, 130, 246, 0.65)"}},Ql=e=>({semantic:Object.entries(ew).reduce((s,[r,a])=>(s[r]={...a[e].ramp,contrast:a[e].contrast},s),{}),surface:tw[e],text:sw[e],border:rw[e]}),om={none:"0px",xxs:"0.125rem",xs:"0.25rem",sm:"0.5rem",md:"0.75rem",lg:"1rem",xl:"1.5rem","2xl":"2rem","3xl":"3rem"},Wt=om,cm={none:"0px",sm:"0.25rem",md:"0.5rem",lg:"0.75rem",xl:"1rem",pill:"9999px"},rs=cm,Hn={fontFamily:{sans:'"Inter", "Segoe UI", system-ui, -apple-system, BlinkMacSystemFont, "Helvetica Neue", Arial, sans-serif',mono:'"JetBrains Mono", "Fira Code", "SFMono-Regular", ui-monospace, Menlo, Monaco, "Liberation Mono", "Courier New", monospace'},fontSize:{xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem"},lineHeight:{tight:"1.25",snug:"1.35",normal:"1.5",relaxed:"1.65"},fontWeight:{regular:"400",medium:"500",semibold:"600",bold:"700"}},Vt=(e,t,s)=>{Object.entries(t).forEach(([r,a])=>{const i=e?`${e}-${r}`:r;if(typeof a=="object"&&a!==null){Vt(i,a,s);return}s[`--${i}`]=String(a)})},nw={light:Ql("light"),dark:Ql("dark")},aw=e=>{const t=nw[e],s={};return Vt("color-semantic",t.semantic,s),Vt("color-surface",t.surface,s),Vt("color-text",t.text,s),Vt("color-border",t.border,s),Vt("space",om,s),Vt("radius",cm,s),Vt("font-family",Hn.fontFamily,s),Vt("font-size",Hn.fontSize,s),Vt("line-height",Hn.lineHeight,s),Vt("font-weight",Hn.fontWeight,s),s},Pa=(e,t=document.documentElement)=>{const s=aw(e);return Object.entries(s).forEach(([r,a])=>t.style.setProperty(r,a)),t.dataset.theme=e,s},iw=e=>e==="light"?"dark":"light";var ge;(function(e){e.assertEqual=a=>{};function t(a){}e.assertIs=t;function s(a){throw new Error}e.assertNever=s,e.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(c=>typeof a[a[c]]!="number"),o={};for(const c of i)o[c]=a[c];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},e.find=(a,i)=>{for(const o of a)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function r(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=r,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(ge||(ge={}));var Zl;(function(e){e.mergeShapes=(t,s)=>({...t,...s})})(Zl||(Zl={}));const K=ge.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),_s=e=>{switch(typeof e){case"undefined":return K.undefined;case"string":return K.string;case"number":return Number.isNaN(e)?K.nan:K.number;case"boolean":return K.boolean;case"function":return K.function;case"bigint":return K.bigint;case"symbol":return K.symbol;case"object":return Array.isArray(e)?K.array:e===null?K.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?K.promise:typeof Map<"u"&&e instanceof Map?K.map:typeof Set<"u"&&e instanceof Set?K.set:typeof Date<"u"&&e instanceof Date?K.date:K.object;default:return K.unknown}},M=ge.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class gs extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const s=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,s):this.__proto__=s,this.name="ZodError",this.issues=t}format(t){const s=t||function(i){return i.message},r={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)r._errors.push(s(o));else{let c=r,l=0;for(;l<o.path.length;){const u=o.path[l];l===o.path.length-1?(c[u]=c[u]||{_errors:[]},c[u]._errors.push(s(o))):c[u]=c[u]||{_errors:[]},c=c[u],l++}}};return a(this),r}static assert(t){if(!(t instanceof gs))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ge.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=s=>s.message){const s={},r=[];for(const a of this.issues)if(a.path.length>0){const i=a.path[0];s[i]=s[i]||[],s[i].push(t(a))}else r.push(t(a));return{formErrors:r,fieldErrors:s}}get formErrors(){return this.flatten()}}gs.create=e=>new gs(e);const ro=(e,t)=>{let s;switch(e.code){case M.invalid_type:e.received===K.undefined?s="Required":s=`Expected ${e.expected}, received ${e.received}`;break;case M.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(e.expected,ge.jsonStringifyReplacer)}`;break;case M.unrecognized_keys:s=`Unrecognized key(s) in object: ${ge.joinValues(e.keys,", ")}`;break;case M.invalid_union:s="Invalid input";break;case M.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${ge.joinValues(e.options)}`;break;case M.invalid_enum_value:s=`Invalid enum value. Expected ${ge.joinValues(e.options)}, received '${e.received}'`;break;case M.invalid_arguments:s="Invalid function arguments";break;case M.invalid_return_type:s="Invalid function return type";break;case M.invalid_date:s="Invalid date";break;case M.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(s=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(s=`${s} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?s=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?s=`Invalid input: must end with "${e.validation.endsWith}"`:ge.assertNever(e.validation):e.validation!=="regex"?s=`Invalid ${e.validation}`:s="Invalid";break;case M.too_small:e.type==="array"?s=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?s=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?s=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?s=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?s=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:s="Invalid input";break;case M.too_big:e.type==="array"?s=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?s=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?s=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?s=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?s=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:s="Invalid input";break;case M.custom:s="Invalid input";break;case M.invalid_intersection_types:s="Intersection results could not be merged";break;case M.not_multiple_of:s=`Number must be a multiple of ${e.multipleOf}`;break;case M.not_finite:s="Number must be finite";break;default:s=t.defaultError,ge.assertNever(e)}return{message:s}};let ow=ro;function cw(){return ow}const lw=e=>{const{data:t,path:s,errorMaps:r,issueData:a}=e,i=[...s,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let c="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)c=u(o,{data:t,defaultError:c}).message;return{...a,path:i,message:c}};function B(e,t){const s=cw(),r=lw({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,s,s===ro?void 0:ro].filter(a=>!!a)});e.common.issues.push(r)}class jt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,s){const r=[];for(const a of s){if(a.status==="aborted")return ae;a.status==="dirty"&&t.dirty(),r.push(a.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,s){const r=[];for(const a of s){const i=await a.key,o=await a.value;r.push({key:i,value:o})}return jt.mergeObjectSync(t,r)}static mergeObjectSync(t,s){const r={};for(const a of s){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return ae;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(r[i.value]=o.value)}return{status:t.value,value:r}}}const ae=Object.freeze({status:"aborted"}),rn=e=>({status:"dirty",value:e}),Ot=e=>({status:"valid",value:e}),Xl=e=>e.status==="aborted",Yl=e=>e.status==="dirty",Ar=e=>e.status==="valid",Ea=e=>typeof Promise<"u"&&e instanceof Promise;var H;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t?.message})(H||(H={}));class Ms{constructor(t,s,r,a){this._cachedPath=[],this.parent=t,this.data=s,this._path=r,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Gl=(e,t)=>{if(Ar(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const s=new gs(e.common.issues);return this._error=s,this._error}}};function de(e){if(!e)return{};const{errorMap:t,invalid_type_error:s,required_error:r,description:a}=e;if(t&&(s||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,c)=>{const{message:l}=e;return o.code==="invalid_enum_value"?{message:l??c.defaultError}:typeof c.data>"u"?{message:l??r??c.defaultError}:o.code!=="invalid_type"?{message:c.defaultError}:{message:l??s??c.defaultError}},description:a}}class pe{get description(){return this._def.description}_getType(t){return _s(t.data)}_getOrReturnCtx(t,s){return s||{common:t.parent.common,data:t.data,parsedType:_s(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new jt,ctx:{common:t.parent.common,data:t.data,parsedType:_s(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const s=this._parse(t);if(Ea(s))throw new Error("Synchronous parse encountered promise.");return s}_parseAsync(t){const s=this._parse(t);return Promise.resolve(s)}parse(t,s){const r=this.safeParse(t,s);if(r.success)return r.data;throw r.error}safeParse(t,s){const r={common:{issues:[],async:s?.async??!1,contextualErrorMap:s?.errorMap},path:s?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:_s(t)},a=this._parseSync({data:t,path:r.path,parent:r});return Gl(r,a)}"~validate"(t){const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:_s(t)};if(!this["~standard"].async)try{const r=this._parseSync({data:t,path:[],parent:s});return Ar(r)?{value:r.value}:{issues:s.common.issues}}catch(r){r?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:s}).then(r=>Ar(r)?{value:r.value}:{issues:s.common.issues})}async parseAsync(t,s){const r=await this.safeParseAsync(t,s);if(r.success)return r.data;throw r.error}async safeParseAsync(t,s){const r={common:{issues:[],contextualErrorMap:s?.errorMap,async:!0},path:s?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:_s(t)},a=this._parse({data:t,path:r.path,parent:r}),i=await(Ea(a)?a:Promise.resolve(a));return Gl(r,i)}refine(t,s){const r=a=>typeof s=="string"||typeof s>"u"?{message:s}:typeof s=="function"?s(a):s;return this._refinement((a,i)=>{const o=t(a),c=()=>i.addIssue({code:M.custom,...r(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(c(),!1)):o?!0:(c(),!1)})}refinement(t,s){return this._refinement((r,a)=>t(r)?!0:(a.addIssue(typeof s=="function"?s(r,a):s),!1))}_refinement(t){return new Rr({schema:this,typeName:ie.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s=>this["~validate"](s)}}optional(){return Es.create(this,this._def)}nullable(){return Dr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return as.create(this)}promise(){return Oa.create(this,this._def)}or(t){return Da.create([this,t],this._def)}and(t){return Ma.create(this,t,this._def)}transform(t){return new Rr({...de(this._def),schema:this,typeName:ie.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const s=typeof t=="function"?t:()=>t;return new io({...de(this._def),innerType:this,defaultValue:s,typeName:ie.ZodDefault})}brand(){return new Rw({typeName:ie.ZodBranded,type:this,...de(this._def)})}catch(t){const s=typeof t=="function"?t:()=>t;return new oo({...de(this._def),innerType:this,catchValue:s,typeName:ie.ZodCatch})}describe(t){const s=this.constructor;return new s({...this._def,description:t})}pipe(t){return ic.create(this,t)}readonly(){return co.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const dw=/^c[^\s-]{8,}$/i,uw=/^[0-9a-z]+$/,hw=/^[0-9A-HJKMNP-TV-Z]{26}$/i,mw=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,fw=/^[a-z0-9_-]{21}$/i,pw=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,gw=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,xw=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,yw="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let xi;const vw=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,bw=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ww=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,jw=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Nw=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,kw=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,lm="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",_w=new RegExp(`^${lm}$`);function dm(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const s=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${s}`}function Tw(e){return new RegExp(`^${dm(e)}$`)}function Sw(e){let t=`${lm}T${dm(e)}`;const s=[];return s.push(e.local?"Z?":"Z"),e.offset&&s.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${s.join("|")})`,new RegExp(`^${t}$`)}function Cw(e,t){return!!((t==="v4"||!t)&&vw.test(e)||(t==="v6"||!t)&&ww.test(e))}function Aw(e,t){if(!pw.test(e))return!1;try{const[s]=e.split(".");if(!s)return!1;const r=s.replace(/-/g,"+").replace(/_/g,"/").padEnd(s.length+(4-s.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||"typ"in a&&a?.typ!=="JWT"||!a.alg||t&&a.alg!==t)}catch{return!1}}function Pw(e,t){return!!((t==="v4"||!t)&&bw.test(e)||(t==="v6"||!t)&&jw.test(e))}class Cs extends pe{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==K.string){const i=this._getOrReturnCtx(t);return B(i,{code:M.invalid_type,expected:K.string,received:i.parsedType}),ae}const r=new jt;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),B(a,{code:M.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),B(a,{code:M.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,c=t.data.length<i.value;(o||c)&&(a=this._getOrReturnCtx(t,a),o?B(a,{code:M.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):c&&B(a,{code:M.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")xw.test(t.data)||(a=this._getOrReturnCtx(t,a),B(a,{validation:"email",code:M.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")xi||(xi=new RegExp(yw,"u")),xi.test(t.data)||(a=this._getOrReturnCtx(t,a),B(a,{validation:"emoji",code:M.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")mw.test(t.data)||(a=this._getOrReturnCtx(t,a),B(a,{validation:"uuid",code:M.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")fw.test(t.data)||(a=this._getOrReturnCtx(t,a),B(a,{validation:"nanoid",code:M.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")dw.test(t.data)||(a=this._getOrReturnCtx(t,a),B(a,{validation:"cuid",code:M.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")uw.test(t.data)||(a=this._getOrReturnCtx(t,a),B(a,{validation:"cuid2",code:M.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")hw.test(t.data)||(a=this._getOrReturnCtx(t,a),B(a,{validation:"ulid",code:M.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),B(a,{validation:"url",code:M.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),B(a,{validation:"regex",code:M.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),B(a,{code:M.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),B(a,{code:M.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),B(a,{code:M.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?Sw(i).test(t.data)||(a=this._getOrReturnCtx(t,a),B(a,{code:M.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?_w.test(t.data)||(a=this._getOrReturnCtx(t,a),B(a,{code:M.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?Tw(i).test(t.data)||(a=this._getOrReturnCtx(t,a),B(a,{code:M.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?gw.test(t.data)||(a=this._getOrReturnCtx(t,a),B(a,{validation:"duration",code:M.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?Cw(t.data,i.version)||(a=this._getOrReturnCtx(t,a),B(a,{validation:"ip",code:M.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?Aw(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),B(a,{validation:"jwt",code:M.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?Pw(t.data,i.version)||(a=this._getOrReturnCtx(t,a),B(a,{validation:"cidr",code:M.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?Nw.test(t.data)||(a=this._getOrReturnCtx(t,a),B(a,{validation:"base64",code:M.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?kw.test(t.data)||(a=this._getOrReturnCtx(t,a),B(a,{validation:"base64url",code:M.invalid_string,message:i.message}),r.dirty()):ge.assertNever(i);return{status:r.value,value:t.data}}_regex(t,s,r){return this.refinement(a=>t.test(a),{validation:s,code:M.invalid_string,...H.errToObj(r)})}_addCheck(t){return new Cs({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...H.errToObj(t)})}url(t){return this._addCheck({kind:"url",...H.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...H.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...H.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...H.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...H.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...H.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...H.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...H.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...H.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...H.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...H.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...H.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof t?.precision>"u"?null:t?.precision,offset:t?.offset??!1,local:t?.local??!1,...H.errToObj(t?.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof t?.precision>"u"?null:t?.precision,...H.errToObj(t?.message)})}duration(t){return this._addCheck({kind:"duration",...H.errToObj(t)})}regex(t,s){return this._addCheck({kind:"regex",regex:t,...H.errToObj(s)})}includes(t,s){return this._addCheck({kind:"includes",value:t,position:s?.position,...H.errToObj(s?.message)})}startsWith(t,s){return this._addCheck({kind:"startsWith",value:t,...H.errToObj(s)})}endsWith(t,s){return this._addCheck({kind:"endsWith",value:t,...H.errToObj(s)})}min(t,s){return this._addCheck({kind:"min",value:t,...H.errToObj(s)})}max(t,s){return this._addCheck({kind:"max",value:t,...H.errToObj(s)})}length(t,s){return this._addCheck({kind:"length",value:t,...H.errToObj(s)})}nonempty(t){return this.min(1,H.errToObj(t))}trim(){return new Cs({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Cs({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Cs({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const s of this._def.checks)s.kind==="min"&&(t===null||s.value>t)&&(t=s.value);return t}get maxLength(){let t=null;for(const s of this._def.checks)s.kind==="max"&&(t===null||s.value<t)&&(t=s.value);return t}}Cs.create=e=>new Cs({checks:[],typeName:ie.ZodString,coerce:e?.coerce??!1,...de(e)});function Ew(e,t){const s=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=s>r?s:r,i=Number.parseInt(e.toFixed(a).replace(".","")),o=Number.parseInt(t.toFixed(a).replace(".",""));return i%o/10**a}class Pr extends pe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==K.number){const i=this._getOrReturnCtx(t);return B(i,{code:M.invalid_type,expected:K.number,received:i.parsedType}),ae}let r;const a=new jt;for(const i of this._def.checks)i.kind==="int"?ge.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),B(r,{code:M.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),B(r,{code:M.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),B(r,{code:M.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?Ew(t.data,i.value)!==0&&(r=this._getOrReturnCtx(t,r),B(r,{code:M.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),B(r,{code:M.not_finite,message:i.message}),a.dirty()):ge.assertNever(i);return{status:a.value,value:t.data}}gte(t,s){return this.setLimit("min",t,!0,H.toString(s))}gt(t,s){return this.setLimit("min",t,!1,H.toString(s))}lte(t,s){return this.setLimit("max",t,!0,H.toString(s))}lt(t,s){return this.setLimit("max",t,!1,H.toString(s))}setLimit(t,s,r,a){return new Pr({...this._def,checks:[...this._def.checks,{kind:t,value:s,inclusive:r,message:H.toString(a)}]})}_addCheck(t){return new Pr({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:H.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:H.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:H.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:H.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:H.toString(t)})}multipleOf(t,s){return this._addCheck({kind:"multipleOf",value:t,message:H.toString(s)})}finite(t){return this._addCheck({kind:"finite",message:H.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:H.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:H.toString(t)})}get minValue(){let t=null;for(const s of this._def.checks)s.kind==="min"&&(t===null||s.value>t)&&(t=s.value);return t}get maxValue(){let t=null;for(const s of this._def.checks)s.kind==="max"&&(t===null||s.value<t)&&(t=s.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&ge.isInteger(t.value))}get isFinite(){let t=null,s=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(s===null||r.value>s)&&(s=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(s)&&Number.isFinite(t)}}Pr.create=e=>new Pr({checks:[],typeName:ie.ZodNumber,coerce:e?.coerce||!1,...de(e)});class xn extends pe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==K.bigint)return this._getInvalidInput(t);let r;const a=new jt;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),B(r,{code:M.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),B(r,{code:M.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),B(r,{code:M.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):ge.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const s=this._getOrReturnCtx(t);return B(s,{code:M.invalid_type,expected:K.bigint,received:s.parsedType}),ae}gte(t,s){return this.setLimit("min",t,!0,H.toString(s))}gt(t,s){return this.setLimit("min",t,!1,H.toString(s))}lte(t,s){return this.setLimit("max",t,!0,H.toString(s))}lt(t,s){return this.setLimit("max",t,!1,H.toString(s))}setLimit(t,s,r,a){return new xn({...this._def,checks:[...this._def.checks,{kind:t,value:s,inclusive:r,message:H.toString(a)}]})}_addCheck(t){return new xn({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:H.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:H.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:H.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:H.toString(t)})}multipleOf(t,s){return this._addCheck({kind:"multipleOf",value:t,message:H.toString(s)})}get minValue(){let t=null;for(const s of this._def.checks)s.kind==="min"&&(t===null||s.value>t)&&(t=s.value);return t}get maxValue(){let t=null;for(const s of this._def.checks)s.kind==="max"&&(t===null||s.value<t)&&(t=s.value);return t}}xn.create=e=>new xn({checks:[],typeName:ie.ZodBigInt,coerce:e?.coerce??!1,...de(e)});class no extends pe{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==K.boolean){const r=this._getOrReturnCtx(t);return B(r,{code:M.invalid_type,expected:K.boolean,received:r.parsedType}),ae}return Ot(t.data)}}no.create=e=>new no({typeName:ie.ZodBoolean,coerce:e?.coerce||!1,...de(e)});class Ra extends pe{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==K.date){const i=this._getOrReturnCtx(t);return B(i,{code:M.invalid_type,expected:K.date,received:i.parsedType}),ae}if(Number.isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return B(i,{code:M.invalid_date}),ae}const r=new jt;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),B(a,{code:M.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),B(a,{code:M.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):ge.assertNever(i);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Ra({...this._def,checks:[...this._def.checks,t]})}min(t,s){return this._addCheck({kind:"min",value:t.getTime(),message:H.toString(s)})}max(t,s){return this._addCheck({kind:"max",value:t.getTime(),message:H.toString(s)})}get minDate(){let t=null;for(const s of this._def.checks)s.kind==="min"&&(t===null||s.value>t)&&(t=s.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const s of this._def.checks)s.kind==="max"&&(t===null||s.value<t)&&(t=s.value);return t!=null?new Date(t):null}}Ra.create=e=>new Ra({checks:[],coerce:e?.coerce||!1,typeName:ie.ZodDate,...de(e)});class Jl extends pe{_parse(t){if(this._getType(t)!==K.symbol){const r=this._getOrReturnCtx(t);return B(r,{code:M.invalid_type,expected:K.symbol,received:r.parsedType}),ae}return Ot(t.data)}}Jl.create=e=>new Jl({typeName:ie.ZodSymbol,...de(e)});class ed extends pe{_parse(t){if(this._getType(t)!==K.undefined){const r=this._getOrReturnCtx(t);return B(r,{code:M.invalid_type,expected:K.undefined,received:r.parsedType}),ae}return Ot(t.data)}}ed.create=e=>new ed({typeName:ie.ZodUndefined,...de(e)});class td extends pe{_parse(t){if(this._getType(t)!==K.null){const r=this._getOrReturnCtx(t);return B(r,{code:M.invalid_type,expected:K.null,received:r.parsedType}),ae}return Ot(t.data)}}td.create=e=>new td({typeName:ie.ZodNull,...de(e)});class sd extends pe{constructor(){super(...arguments),this._any=!0}_parse(t){return Ot(t.data)}}sd.create=e=>new sd({typeName:ie.ZodAny,...de(e)});class rd extends pe{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Ot(t.data)}}rd.create=e=>new rd({typeName:ie.ZodUnknown,...de(e)});class Os extends pe{_parse(t){const s=this._getOrReturnCtx(t);return B(s,{code:M.invalid_type,expected:K.never,received:s.parsedType}),ae}}Os.create=e=>new Os({typeName:ie.ZodNever,...de(e)});class nd extends pe{_parse(t){if(this._getType(t)!==K.undefined){const r=this._getOrReturnCtx(t);return B(r,{code:M.invalid_type,expected:K.void,received:r.parsedType}),ae}return Ot(t.data)}}nd.create=e=>new nd({typeName:ie.ZodVoid,...de(e)});class as extends pe{_parse(t){const{ctx:s,status:r}=this._processInputParams(t),a=this._def;if(s.parsedType!==K.array)return B(s,{code:M.invalid_type,expected:K.array,received:s.parsedType}),ae;if(a.exactLength!==null){const o=s.data.length>a.exactLength.value,c=s.data.length<a.exactLength.value;(o||c)&&(B(s,{code:o?M.too_big:M.too_small,minimum:c?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&s.data.length<a.minLength.value&&(B(s,{code:M.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&s.data.length>a.maxLength.value&&(B(s,{code:M.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),s.common.async)return Promise.all([...s.data].map((o,c)=>a.type._parseAsync(new Ms(s,o,s.path,c)))).then(o=>jt.mergeArray(r,o));const i=[...s.data].map((o,c)=>a.type._parseSync(new Ms(s,o,s.path,c)));return jt.mergeArray(r,i)}get element(){return this._def.type}min(t,s){return new as({...this._def,minLength:{value:t,message:H.toString(s)}})}max(t,s){return new as({...this._def,maxLength:{value:t,message:H.toString(s)}})}length(t,s){return new as({...this._def,exactLength:{value:t,message:H.toString(s)}})}nonempty(t){return this.min(1,t)}}as.create=(e,t)=>new as({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ie.ZodArray,...de(t)});function pr(e){if(e instanceof Ie){const t={};for(const s in e.shape){const r=e.shape[s];t[s]=Es.create(pr(r))}return new Ie({...e._def,shape:()=>t})}else return e instanceof as?new as({...e._def,type:pr(e.element)}):e instanceof Es?Es.create(pr(e.unwrap())):e instanceof Dr?Dr.create(pr(e.unwrap())):e instanceof sr?sr.create(e.items.map(t=>pr(t))):e}class Ie extends pe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),s=ge.objectKeys(t);return this._cached={shape:t,keys:s},this._cached}_parse(t){if(this._getType(t)!==K.object){const u=this._getOrReturnCtx(t);return B(u,{code:M.invalid_type,expected:K.object,received:u.parsedType}),ae}const{status:r,ctx:a}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),c=[];if(!(this._def.catchall instanceof Os&&this._def.unknownKeys==="strip"))for(const u in a.data)o.includes(u)||c.push(u);const l=[];for(const u of o){const d=i[u],h=a.data[u];l.push({key:{status:"valid",value:u},value:d._parse(new Ms(a,h,a.path,u)),alwaysSet:u in a.data})}if(this._def.catchall instanceof Os){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of c)l.push({key:{status:"valid",value:d},value:{status:"valid",value:a.data[d]}});else if(u==="strict")c.length>0&&(B(a,{code:M.unrecognized_keys,keys:c}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of c){const h=a.data[d];l.push({key:{status:"valid",value:d},value:u._parse(new Ms(a,h,a.path,d)),alwaysSet:d in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of l){const h=await d.key,m=await d.value;u.push({key:h,value:m,alwaysSet:d.alwaysSet})}return u}).then(u=>jt.mergeObjectSync(r,u)):jt.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(t){return H.errToObj,new Ie({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(s,r)=>{const a=this._def.errorMap?.(s,r).message??r.defaultError;return s.code==="unrecognized_keys"?{message:H.errToObj(t).message??a}:{message:a}}}:{}})}strip(){return new Ie({...this._def,unknownKeys:"strip"})}passthrough(){return new Ie({...this._def,unknownKeys:"passthrough"})}extend(t){return new Ie({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Ie({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:ie.ZodObject})}setKey(t,s){return this.augment({[t]:s})}catchall(t){return new Ie({...this._def,catchall:t})}pick(t){const s={};for(const r of ge.objectKeys(t))t[r]&&this.shape[r]&&(s[r]=this.shape[r]);return new Ie({...this._def,shape:()=>s})}omit(t){const s={};for(const r of ge.objectKeys(this.shape))t[r]||(s[r]=this.shape[r]);return new Ie({...this._def,shape:()=>s})}deepPartial(){return pr(this)}partial(t){const s={};for(const r of ge.objectKeys(this.shape)){const a=this.shape[r];t&&!t[r]?s[r]=a:s[r]=a.optional()}return new Ie({...this._def,shape:()=>s})}required(t){const s={};for(const r of ge.objectKeys(this.shape))if(t&&!t[r])s[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Es;)i=i._def.innerType;s[r]=i}return new Ie({...this._def,shape:()=>s})}keyof(){return um(ge.objectKeys(this.shape))}}Ie.create=(e,t)=>new Ie({shape:()=>e,unknownKeys:"strip",catchall:Os.create(),typeName:ie.ZodObject,...de(t)});Ie.strictCreate=(e,t)=>new Ie({shape:()=>e,unknownKeys:"strict",catchall:Os.create(),typeName:ie.ZodObject,...de(t)});Ie.lazycreate=(e,t)=>new Ie({shape:e,unknownKeys:"strip",catchall:Os.create(),typeName:ie.ZodObject,...de(t)});class Da extends pe{_parse(t){const{ctx:s}=this._processInputParams(t),r=this._def.options;function a(i){for(const c of i)if(c.result.status==="valid")return c.result;for(const c of i)if(c.result.status==="dirty")return s.common.issues.push(...c.ctx.common.issues),c.result;const o=i.map(c=>new gs(c.ctx.common.issues));return B(s,{code:M.invalid_union,unionErrors:o}),ae}if(s.common.async)return Promise.all(r.map(async i=>{const o={...s,common:{...s.common,issues:[]},parent:null};return{result:await i._parseAsync({data:s.data,path:s.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const l of r){const u={...s,common:{...s.common,issues:[]},parent:null},d=l._parseSync({data:s.data,path:s.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return s.common.issues.push(...i.ctx.common.issues),i.result;const c=o.map(l=>new gs(l));return B(s,{code:M.invalid_union,unionErrors:c}),ae}}get options(){return this._def.options}}Da.create=(e,t)=>new Da({options:e,typeName:ie.ZodUnion,...de(t)});function ao(e,t){const s=_s(e),r=_s(t);if(e===t)return{valid:!0,data:e};if(s===K.object&&r===K.object){const a=ge.objectKeys(t),i=ge.objectKeys(e).filter(c=>a.indexOf(c)!==-1),o={...e,...t};for(const c of i){const l=ao(e[c],t[c]);if(!l.valid)return{valid:!1};o[c]=l.data}return{valid:!0,data:o}}else if(s===K.array&&r===K.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const o=e[i],c=t[i],l=ao(o,c);if(!l.valid)return{valid:!1};a.push(l.data)}return{valid:!0,data:a}}else return s===K.date&&r===K.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Ma extends pe{_parse(t){const{status:s,ctx:r}=this._processInputParams(t),a=(i,o)=>{if(Xl(i)||Xl(o))return ae;const c=ao(i.value,o.value);return c.valid?((Yl(i)||Yl(o))&&s.dirty(),{status:s.value,value:c.data}):(B(r,{code:M.invalid_intersection_types}),ae)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Ma.create=(e,t,s)=>new Ma({left:e,right:t,typeName:ie.ZodIntersection,...de(s)});class sr extends pe{_parse(t){const{status:s,ctx:r}=this._processInputParams(t);if(r.parsedType!==K.array)return B(r,{code:M.invalid_type,expected:K.array,received:r.parsedType}),ae;if(r.data.length<this._def.items.length)return B(r,{code:M.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ae;!this._def.rest&&r.data.length>this._def.items.length&&(B(r,{code:M.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.dirty());const i=[...r.data].map((o,c)=>{const l=this._def.items[c]||this._def.rest;return l?l._parse(new Ms(r,o,r.path,c)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>jt.mergeArray(s,o)):jt.mergeArray(s,i)}get items(){return this._def.items}rest(t){return new sr({...this._def,rest:t})}}sr.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new sr({items:e,typeName:ie.ZodTuple,rest:null,...de(t)})};class ad extends pe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:s,ctx:r}=this._processInputParams(t);if(r.parsedType!==K.map)return B(r,{code:M.invalid_type,expected:K.map,received:r.parsedType}),ae;const a=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([c,l],u)=>({key:a._parse(new Ms(r,c,r.path,[u,"key"])),value:i._parse(new Ms(r,l,r.path,[u,"value"]))}));if(r.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const l of o){const u=await l.key,d=await l.value;if(u.status==="aborted"||d.status==="aborted")return ae;(u.status==="dirty"||d.status==="dirty")&&s.dirty(),c.set(u.value,d.value)}return{status:s.value,value:c}})}else{const c=new Map;for(const l of o){const u=l.key,d=l.value;if(u.status==="aborted"||d.status==="aborted")return ae;(u.status==="dirty"||d.status==="dirty")&&s.dirty(),c.set(u.value,d.value)}return{status:s.value,value:c}}}}ad.create=(e,t,s)=>new ad({valueType:t,keyType:e,typeName:ie.ZodMap,...de(s)});class yn extends pe{_parse(t){const{status:s,ctx:r}=this._processInputParams(t);if(r.parsedType!==K.set)return B(r,{code:M.invalid_type,expected:K.set,received:r.parsedType}),ae;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(B(r,{code:M.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),s.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(B(r,{code:M.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),s.dirty());const i=this._def.valueType;function o(l){const u=new Set;for(const d of l){if(d.status==="aborted")return ae;d.status==="dirty"&&s.dirty(),u.add(d.value)}return{status:s.value,value:u}}const c=[...r.data.values()].map((l,u)=>i._parse(new Ms(r,l,r.path,u)));return r.common.async?Promise.all(c).then(l=>o(l)):o(c)}min(t,s){return new yn({...this._def,minSize:{value:t,message:H.toString(s)}})}max(t,s){return new yn({...this._def,maxSize:{value:t,message:H.toString(s)}})}size(t,s){return this.min(t,s).max(t,s)}nonempty(t){return this.min(1,t)}}yn.create=(e,t)=>new yn({valueType:e,minSize:null,maxSize:null,typeName:ie.ZodSet,...de(t)});class id extends pe{get schema(){return this._def.getter()}_parse(t){const{ctx:s}=this._processInputParams(t);return this._def.getter()._parse({data:s.data,path:s.path,parent:s})}}id.create=(e,t)=>new id({getter:e,typeName:ie.ZodLazy,...de(t)});class od extends pe{_parse(t){if(t.data!==this._def.value){const s=this._getOrReturnCtx(t);return B(s,{received:s.data,code:M.invalid_literal,expected:this._def.value}),ae}return{status:"valid",value:t.data}}get value(){return this._def.value}}od.create=(e,t)=>new od({value:e,typeName:ie.ZodLiteral,...de(t)});function um(e,t){return new Er({values:e,typeName:ie.ZodEnum,...de(t)})}class Er extends pe{_parse(t){if(typeof t.data!="string"){const s=this._getOrReturnCtx(t),r=this._def.values;return B(s,{expected:ge.joinValues(r),received:s.parsedType,code:M.invalid_type}),ae}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const s=this._getOrReturnCtx(t),r=this._def.values;return B(s,{received:s.data,code:M.invalid_enum_value,options:r}),ae}return Ot(t.data)}get options(){return this._def.values}get enum(){const t={};for(const s of this._def.values)t[s]=s;return t}get Values(){const t={};for(const s of this._def.values)t[s]=s;return t}get Enum(){const t={};for(const s of this._def.values)t[s]=s;return t}extract(t,s=this._def){return Er.create(t,{...this._def,...s})}exclude(t,s=this._def){return Er.create(this.options.filter(r=>!t.includes(r)),{...this._def,...s})}}Er.create=um;class cd extends pe{_parse(t){const s=ge.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==K.string&&r.parsedType!==K.number){const a=ge.objectValues(s);return B(r,{expected:ge.joinValues(a),received:r.parsedType,code:M.invalid_type}),ae}if(this._cache||(this._cache=new Set(ge.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const a=ge.objectValues(s);return B(r,{received:r.data,code:M.invalid_enum_value,options:a}),ae}return Ot(t.data)}get enum(){return this._def.values}}cd.create=(e,t)=>new cd({values:e,typeName:ie.ZodNativeEnum,...de(t)});class Oa extends pe{unwrap(){return this._def.type}_parse(t){const{ctx:s}=this._processInputParams(t);if(s.parsedType!==K.promise&&s.common.async===!1)return B(s,{code:M.invalid_type,expected:K.promise,received:s.parsedType}),ae;const r=s.parsedType===K.promise?s.data:Promise.resolve(s.data);return Ot(r.then(a=>this._def.type.parseAsync(a,{path:s.path,errorMap:s.common.contextualErrorMap})))}}Oa.create=(e,t)=>new Oa({type:e,typeName:ie.ZodPromise,...de(t)});class Rr extends pe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ie.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:s,ctx:r}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:o=>{B(r,o),o.fatal?s.abort():s.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async c=>{if(s.value==="aborted")return ae;const l=await this._def.schema._parseAsync({data:c,path:r.path,parent:r});return l.status==="aborted"?ae:l.status==="dirty"||s.value==="dirty"?rn(l.value):l});{if(s.value==="aborted")return ae;const c=this._def.schema._parseSync({data:o,path:r.path,parent:r});return c.status==="aborted"?ae:c.status==="dirty"||s.value==="dirty"?rn(c.value):c}}if(a.type==="refinement"){const o=c=>{const l=a.refinement(c,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return c.status==="aborted"?ae:(c.status==="dirty"&&s.dirty(),o(c.value),{status:s.value,value:c.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>c.status==="aborted"?ae:(c.status==="dirty"&&s.dirty(),o(c.value).then(()=>({status:s.value,value:c.value}))))}if(a.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Ar(o))return ae;const c=a.transform(o.value,i);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:s.value,value:c}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Ar(o)?Promise.resolve(a.transform(o.value,i)).then(c=>({status:s.value,value:c})):ae);ge.assertNever(a)}}Rr.create=(e,t,s)=>new Rr({schema:e,typeName:ie.ZodEffects,effect:t,...de(s)});Rr.createWithPreprocess=(e,t,s)=>new Rr({schema:t,effect:{type:"preprocess",transform:e},typeName:ie.ZodEffects,...de(s)});class Es extends pe{_parse(t){return this._getType(t)===K.undefined?Ot(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Es.create=(e,t)=>new Es({innerType:e,typeName:ie.ZodOptional,...de(t)});class Dr extends pe{_parse(t){return this._getType(t)===K.null?Ot(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Dr.create=(e,t)=>new Dr({innerType:e,typeName:ie.ZodNullable,...de(t)});class io extends pe{_parse(t){const{ctx:s}=this._processInputParams(t);let r=s.data;return s.parsedType===K.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:s.path,parent:s})}removeDefault(){return this._def.innerType}}io.create=(e,t)=>new io({innerType:e,typeName:ie.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...de(t)});class oo extends pe{_parse(t){const{ctx:s}=this._processInputParams(t),r={...s,common:{...s.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Ea(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new gs(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new gs(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}oo.create=(e,t)=>new oo({innerType:e,typeName:ie.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...de(t)});class ld extends pe{_parse(t){if(this._getType(t)!==K.nan){const r=this._getOrReturnCtx(t);return B(r,{code:M.invalid_type,expected:K.nan,received:r.parsedType}),ae}return{status:"valid",value:t.data}}}ld.create=e=>new ld({typeName:ie.ZodNaN,...de(e)});class Rw extends pe{_parse(t){const{ctx:s}=this._processInputParams(t),r=s.data;return this._def.type._parse({data:r,path:s.path,parent:s})}unwrap(){return this._def.type}}class ic extends pe{_parse(t){const{status:s,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?ae:i.status==="dirty"?(s.dirty(),rn(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?ae:a.status==="dirty"?(s.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(t,s){return new ic({in:t,out:s,typeName:ie.ZodPipeline})}}class co extends pe{_parse(t){const s=this._def.innerType._parse(t),r=a=>(Ar(a)&&(a.value=Object.freeze(a.value)),a);return Ea(s)?s.then(a=>r(a)):r(s)}unwrap(){return this._def.innerType}}co.create=(e,t)=>new co({innerType:e,typeName:ie.ZodReadonly,...de(t)});var ie;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(ie||(ie={}));const vn=Cs.create,Dw=Pr.create,gr=no.create;Os.create;as.create;const Tr=Ie.create;Da.create;Ma.create;sr.create;const Qn=Er.create;Oa.create;Es.create;Dr.create;const Mw=Tr({theme:Qn(["light","dark","auto"]),layout:Qn(["grid","list","compact"]),density:Qn(["comfortable","compact","spacious"]),refreshInterval:Dw().min(30).max(300),notifications:Tr({enabled:gr(),sound:gr(),desktop:gr()}),widgets:Tr({defaultSize:Qn(["small","medium","large","xlarge"]),autoRefresh:gr(),showTitles:gr()})}),yi={theme:"auto",layout:"grid",density:"comfortable",refreshInterval:60,notifications:{enabled:!0,sound:!0,desktop:!0},widgets:{defaultSize:"medium",autoRefresh:!0,showTitles:!0}},Ow=({initialData:e=yi,onSubmit:t,isLoading:s=!1})=>{const{t:r}=Qt(),{mode:a,setMode:i}=Ko(),{control:o,handleSubmit:c,formState:{errors:l,isDirty:u},reset:d}=Xa({resolver:Ya(Mw),defaultValues:{...yi,...e}}),h=async f=>{try{await t(f)}catch{}},m=f=>{i(f),Pa(f)},g=()=>{d({...yi,...e})};return n.jsxs("form",{onSubmit:c(h),className:"space-y-6",children:[n.jsxs(J,{children:[n.jsxs(ye,{children:[n.jsx(ve,{children:r("preferences.theme.title",{defaultValue:"Theme Settings"})}),n.jsx(vt,{children:r("preferences.theme.description",{defaultValue:"Customize the appearance of your dashboard"})})]}),n.jsxs(ee,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium text-[var(--color-text-primary)]",children:r("preferences.theme.mode",{defaultValue:"Theme Mode"})}),n.jsx(es,{name:"theme",control:o,render:({field:f})=>n.jsx("div",{className:"flex gap-2",children:["light","dark","auto"].map(x=>n.jsx(le,{type:"button",variant:f.value===x?"primary":"outline",size:"sm",onClick:()=>f.onChange(x),children:r(`preferences.theme.${x}`,{defaultValue:x})},x))})}),l.theme&&n.jsx("p",{className:"text-sm text-[var(--color-semantic-danger-500)]",children:l.theme.message})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium text-[var(--color-text-primary)]",children:r("preferences.theme.preview",{defaultValue:"Preview"})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(le,{type:"button",variant:"outline",size:"sm",onClick:()=>m("light"),className:a==="light"?"ring-2 ring-[var(--color-semantic-primary-500)]":"",children:["☀️ ",r("preferences.theme.light",{defaultValue:"Light"})]}),n.jsxs(le,{type:"button",variant:"outline",size:"sm",onClick:()=>m("dark"),className:a==="dark"?"ring-2 ring-[var(--color-semantic-primary-500)]":"",children:["🌙 ",r("preferences.theme.dark",{defaultValue:"Dark"})]})]})]})]})]}),n.jsxs(J,{children:[n.jsxs(ye,{children:[n.jsx(ve,{children:r("preferences.layout.title",{defaultValue:"Layout Settings"})}),n.jsx(vt,{children:r("preferences.layout.description",{defaultValue:"Configure how content is displayed"})})]}),n.jsxs(ee,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium text-[var(--color-text-primary)]",children:r("preferences.layout.type",{defaultValue:"Layout Type"})}),n.jsx(es,{name:"layout",control:o,render:({field:f})=>n.jsx("div",{className:"flex gap-2",children:["grid","list","compact"].map(x=>n.jsx(le,{type:"button",variant:f.value===x?"primary":"outline",size:"sm",onClick:()=>f.onChange(x),children:r(`preferences.layout.${x}`,{defaultValue:x})},x))})}),l.layout&&n.jsx("p",{className:"text-sm text-[var(--color-semantic-danger-500)]",children:l.layout.message})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium text-[var(--color-text-primary)]",children:r("preferences.layout.density",{defaultValue:"Density"})}),n.jsx(es,{name:"density",control:o,render:({field:f})=>n.jsx("div",{className:"flex gap-2",children:["comfortable","compact","spacious"].map(x=>n.jsx(le,{type:"button",variant:f.value===x?"primary":"outline",size:"sm",onClick:()=>f.onChange(x),children:r(`preferences.layout.${x}`,{defaultValue:x})},x))})}),l.density&&n.jsx("p",{className:"text-sm text-[var(--color-semantic-danger-500)]",children:l.density.message})]})]})]}),n.jsxs(J,{children:[n.jsxs(ye,{children:[n.jsx(ve,{children:r("preferences.notifications.title",{defaultValue:"Notification Settings"})}),n.jsx(vt,{children:r("preferences.notifications.description",{defaultValue:"Configure how you receive notifications"})})]}),n.jsx(ee,{className:"space-y-4",children:n.jsxs("div",{className:"space-y-3",children:[n.jsx(es,{name:"notifications.enabled",control:o,render:({field:f})=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-[var(--color-text-primary)]",children:r("preferences.notifications.enabled",{defaultValue:"Enable Notifications"})}),n.jsx("p",{className:"text-xs text-[var(--color-text-muted)]",children:r("preferences.notifications.enabledDescription",{defaultValue:"Receive system notifications"})})]}),n.jsx("input",{type:"checkbox",checked:f.value,onChange:f.onChange,className:"rounded border-[var(--color-border-default)]"})]})}),n.jsx(es,{name:"notifications.sound",control:o,render:({field:f})=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-[var(--color-text-primary)]",children:r("preferences.notifications.sound",{defaultValue:"Sound Notifications"})}),n.jsx("p",{className:"text-xs text-[var(--color-text-muted)]",children:r("preferences.notifications.soundDescription",{defaultValue:"Play sound for notifications"})})]}),n.jsx("input",{type:"checkbox",checked:f.value,onChange:f.onChange,className:"rounded border-[var(--color-border-default)]"})]})}),n.jsx(es,{name:"notifications.desktop",control:o,render:({field:f})=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-[var(--color-text-primary)]",children:r("preferences.notifications.desktop",{defaultValue:"Desktop Notifications"})}),n.jsx("p",{className:"text-xs text-[var(--color-text-muted)]",children:r("preferences.notifications.desktopDescription",{defaultValue:"Show desktop notifications"})})]}),n.jsx("input",{type:"checkbox",checked:f.value,onChange:f.onChange,className:"rounded border-[var(--color-border-default)]"})]})})]})})]}),n.jsxs(J,{children:[n.jsxs(ye,{children:[n.jsx(ve,{children:r("preferences.widgets.title",{defaultValue:"Widget Settings"})}),n.jsx(vt,{children:r("preferences.widgets.description",{defaultValue:"Configure widget behavior and appearance"})})]}),n.jsxs(ee,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium text-[var(--color-text-primary)]",children:r("preferences.widgets.defaultSize",{defaultValue:"Default Widget Size"})}),n.jsx(es,{name:"widgets.defaultSize",control:o,render:({field:f})=>n.jsx("div",{className:"flex gap-2",children:["small","medium","large","xlarge"].map(x=>n.jsx(le,{type:"button",variant:f.value===x?"primary":"outline",size:"sm",onClick:()=>f.onChange(x),children:r(`preferences.widgets.${x}`,{defaultValue:x})},x))})}),l.widgets?.defaultSize&&n.jsx("p",{className:"text-sm text-[var(--color-semantic-danger-500)]",children:l.widgets.defaultSize.message})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(es,{name:"widgets.autoRefresh",control:o,render:({field:f})=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-[var(--color-text-primary)]",children:r("preferences.widgets.autoRefresh",{defaultValue:"Auto Refresh Widgets"})}),n.jsx("p",{className:"text-xs text-[var(--color-text-muted)]",children:r("preferences.widgets.autoRefreshDescription",{defaultValue:"Automatically refresh widget data"})})]}),n.jsx("input",{type:"checkbox",checked:f.value,onChange:f.onChange,className:"rounded border-[var(--color-border-default)]"})]})}),n.jsx(es,{name:"widgets.showTitles",control:o,render:({field:f})=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-[var(--color-text-primary)]",children:r("preferences.widgets.showTitles",{defaultValue:"Show Widget Titles"})}),n.jsx("p",{className:"text-xs text-[var(--color-text-muted)]",children:r("preferences.widgets.showTitlesDescription",{defaultValue:"Display titles on widgets"})})]}),n.jsx("input",{type:"checkbox",checked:f.value,onChange:f.onChange,className:"rounded border-[var(--color-border-default)]"})]})})]})]})]}),n.jsxs(J,{children:[n.jsxs(ye,{children:[n.jsx(ve,{children:r("preferences.refresh.title",{defaultValue:"Refresh Settings"})}),n.jsx(vt,{children:r("preferences.refresh.description",{defaultValue:"Configure data refresh intervals"})})]}),n.jsx(ee,{className:"space-y-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium text-[var(--color-text-primary)]",children:r("preferences.refresh.interval",{defaultValue:"Refresh Interval (seconds)"})}),n.jsx(es,{name:"refreshInterval",control:o,render:({field:f})=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"range",min:"30",max:"300",step:"30",value:f.value,onChange:x=>f.onChange(parseInt(x.target.value)),className:"flex-1"}),n.jsxs(ht,{tone:"info",children:[f.value,"s"]})]})}),l.refreshInterval&&n.jsx("p",{className:"text-sm text-[var(--color-semantic-danger-500)]",children:l.refreshInterval.message})]})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center gap-2",children:u&&n.jsx(ht,{tone:"warning",children:r("preferences.unsavedChanges",{defaultValue:"Unsaved changes"})})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(le,{type:"button",variant:"outline",onClick:g,disabled:!u,children:r("preferences.reset",{defaultValue:"Reset"})}),n.jsx(le,{type:"submit",loading:s,disabled:!u,children:r("preferences.save",{defaultValue:"Save Preferences"})})]})]})]})},Fw=()=>{const{t:e}=Qt(),{mode:t,setMode:s}=Ko(),[r,a]=p.useState(!1),{data:i}=hb(),o=xb(),c=yb(),l=async()=>{try{await c.mutateAsync(),a(!0),setTimeout(()=>a(!1),3e3)}catch{}},u=async h=>{try{if(await o.mutateAsync(h),h.theme!=="auto")s(h.theme),Pa(h.theme);else{const m=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";s(m),Pa(m)}localStorage.setItem("user-preferences",JSON.stringify(h)),a(!0),setTimeout(()=>a(!1),3e3)}catch{}},d=i?.data||{};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-[var(--color-text-primary)]",children:e("preferences.title",{defaultValue:"Preferences"})}),n.jsx("p",{className:"text-[var(--color-text-muted)]",children:e("preferences.description",{defaultValue:"Customize your dashboard experience"})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[r&&n.jsxs("div",{className:"text-sm text-[var(--color-semantic-success-500)]",children:["✅ ",e("preferences.saved",{defaultValue:"Preferences saved!"})]}),n.jsx(le,{variant:"outline",size:"sm",onClick:l,children:e("preferences.resetToDefaults",{defaultValue:"Reset to Defaults"})})]})]}),n.jsx(J,{children:n.jsx(ee,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-[var(--color-text-primary)]",children:e("preferences.currentTheme",{defaultValue:"Current Theme"})}),n.jsx("p",{className:"text-xs text-[var(--color-text-muted)]",children:e("preferences.currentThemeDescription",{defaultValue:"Active theme mode"})})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs("span",{className:"text-sm text-[var(--color-text-muted)]",children:[t==="light"?"☀️":"🌙"," ",t]})})]})})}),n.jsx(Ow,{initialData:d,onSubmit:u,isLoading:o.isPending}),n.jsxs(J,{children:[n.jsx(ye,{children:n.jsx(ve,{className:"text-lg",children:e("preferences.help.title",{defaultValue:"Need Help?"})})}),n.jsx(ee,{children:n.jsxs("div",{className:"space-y-2 text-sm text-[var(--color-text-muted)]",children:[n.jsx("p",{children:e("preferences.help.description",{defaultValue:"Your preferences are automatically saved and synced across all your devices."})}),n.jsx("p",{children:e("preferences.help.theme",{defaultValue:"Auto theme will follow your system preference (light/dark mode)."})}),n.jsx("p",{children:e("preferences.help.refresh",{defaultValue:"Refresh intervals are applied to all dashboard widgets and data."})})]})})]})]})},lo=oh()((e,t)=>{const s=()=>{try{if(typeof window>"u")return;const r=Ve.getState(),a=localStorage.getItem("auth_token");e({user:r.user,token:a,isAuthenticated:r.isAuthenticated,isLoading:r.isLoading,error:r.error})}catch(r){typeof window<"u"&&(window.__e2e_logs||(window.__e2e_logs=[]),window.__e2e_logs.push({scope:"shared-auth-adapter",event:"sync-error",error:String(r)}))}};return{user:null,token:typeof window<"u"?localStorage.getItem("auth_token"):null,isAuthenticated:!1,isLoading:!1,error:null,login:async(r,a)=>{await Ve.getState().login({email:r,password:a}),s()},logout:async()=>{await Ve.getState().logout(),s()},setUser:r=>{Ve.getState().setUser(r),s()},setToken:r=>{try{typeof window<"u"&&(localStorage.setItem("auth_token",r),$.defaults.headers.common.Authorization=`Bearer ${r}`),Ve.getState().checkAuth().then(()=>s())}catch(a){typeof window<"u"&&(window.__e2e_logs||(window.__e2e_logs=[]),window.__e2e_logs.push({scope:"shared-auth-adapter",event:"setToken-error",error:String(a)}))}},setError:r=>{Ve.getState().clearError(),s()},setLoading:r=>{},clearAuth:()=>{try{typeof window<"u"&&(localStorage.removeItem("auth_token"),delete $.defaults.headers.common.Authorization),Ve.getState().logout().then(()=>s())}catch(r){typeof window<"u"&&(window.__e2e_logs||(window.__e2e_logs=[]),window.__e2e_logs.push({scope:"shared-auth-adapter",event:"clearAuth-error",error:String(r)}))}},refreshUser:async()=>{await Ve.getState().checkAuth(),s()}}});let vi=!1,Lw=null;function dd(){try{if(typeof window>"u")return;const e=lo.getState(),t=Ve.getState(),s=localStorage.getItem("auth_token");lo.setState({user:t.user,token:s,isAuthenticated:t.isAuthenticated,isLoading:t.isLoading,error:t.error})}catch(e){typeof window<"u"&&(window.__e2e_logs||(window.__e2e_logs=[]),window.__e2e_logs.push({scope:"shared-auth-adapter",event:"sync-error",error:String(e)}))}}function Vw(){if(!vi)try{if(vi=!0,typeof window>"u")return;dd(),Lw=Ve.subscribe(e=>{dd()}),window.__e2e_logs||(window.__e2e_logs=[]),window.__e2e_logs.push({scope:"shared-auth-adapter",event:"init-ok"})}catch(e){typeof window<"u"&&(window.__e2e_logs||(window.__e2e_logs=[]),window.__e2e_logs.push({scope:"shared-auth-adapter",event:"init-error",error:String(e)})),vi=!1}}const Uw=()=>{const{user:e,token:t,isAuthenticated:s,isLoading:r,error:a,login:i,logout:o,setUser:c,setToken:l,setError:u,setLoading:d,clearAuth:h,refreshUser:m}=lo();return{user:e,token:t,isAuthenticated:s,isLoading:r,error:a,login:i,logout:o,setUser:c,setToken:l,setError:u,setLoading:d,clearAuth:h,refreshUser:m}},Iw=Tr({email:vn().email("Invalid email address"),password:vn().min(6,"Password must be at least 6 characters"),remember:gr().optional()}),$w=()=>{const{t:e}=Qt(),t=Vs(),{login:s,isLoading:r,error:a,isAuthenticated:i}=Uw(),[o,c]=p.useState(!1),{register:l,handleSubmit:u,formState:{errors:d}}=Xa({resolver:Ya(Iw),defaultValues:{email:"",password:"",remember:!1}});p.useEffect(()=>{i&&t("/app/dashboard")},[i,t]);const h=async m=>{try{await s(m.email,m.password),t("/app/dashboard")}catch{}};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[var(--color-surface-base)] py-12 px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"max-w-md w-full space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-3xl font-bold text-[var(--color-text-primary)]",children:e("auth.login.title",{defaultValue:"Welcome back"})}),n.jsx("p",{className:"mt-2 text-[var(--color-text-muted)]",children:e("auth.login.subtitle",{defaultValue:"Sign in to your account"})})]}),n.jsxs(J,{children:[n.jsxs(ye,{children:[n.jsx(ve,{children:e("auth.login.formTitle",{defaultValue:"Sign In"})}),n.jsx(vt,{children:e("auth.login.formDescription",{defaultValue:"Enter your credentials to access your account"})})]}),n.jsxs(ee,{children:[n.jsxs("form",{onSubmit:u(h),className:"space-y-6",children:[a&&n.jsx("div",{className:"p-3 rounded-[var(--radius-md)] bg-[var(--color-semantic-danger-50)] border border-[var(--color-semantic-danger-200)]",children:n.jsx("p",{className:"text-sm text-[var(--color-semantic-danger-700)]",children:a})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{htmlFor:"email",className:"text-sm font-medium text-[var(--color-text-primary)]",children:e("auth.login.email",{defaultValue:"Email Address"})}),n.jsx("input",{...l("email"),type:"email",id:"email",autoComplete:"email",className:"w-full px-3 py-2 border border-[var(--color-border-default)] rounded-[var(--radius-md)] focus:outline-none focus:ring-2 focus:ring-[var(--color-semantic-primary-500)] focus:border-transparent",placeholder:e("auth.login.emailPlaceholder",{defaultValue:"Enter your email"})}),d.email&&n.jsx("p",{className:"text-sm text-[var(--color-semantic-danger-500)]",children:d.email.message})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-[var(--color-text-primary)]",children:e("auth.login.password",{defaultValue:"Password"})}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{...l("password"),type:o?"text":"password",id:"password",autoComplete:"current-password",className:"w-full px-3 py-2 pr-10 border border-[var(--color-border-default)] rounded-[var(--radius-md)] focus:outline-none focus:ring-2 focus:ring-[var(--color-semantic-primary-500)] focus:border-transparent",placeholder:e("auth.login.passwordPlaceholder",{defaultValue:"Enter your password"})}),n.jsx("button",{type:"button",onClick:()=>c(!o),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-[var(--color-text-muted)] hover:text-[var(--color-text-primary)]","aria-label":o?"Hide password":"Show password",children:o?"👁️":"👁️‍🗨️"})]}),d.password&&n.jsx("p",{className:"text-sm text-[var(--color-semantic-danger-500)]",children:d.password.message})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{...l("remember"),type:"checkbox",id:"remember",className:"h-4 w-4 text-[var(--color-semantic-primary-500)] focus:ring-[var(--color-semantic-primary-500)] border-[var(--color-border-default)] rounded"}),n.jsx("label",{htmlFor:"remember",className:"ml-2 block text-sm text-[var(--color-text-secondary)]",children:e("auth.login.remember",{defaultValue:"Remember me"})})]}),n.jsx(Kt,{to:"/forgot-password",className:"text-sm text-[var(--color-semantic-primary-500)] hover:text-[var(--color-semantic-primary-600)]",children:e("auth.login.forgotPassword",{defaultValue:"Forgot password?"})})]}),n.jsx(le,{type:"submit",className:"w-full",loading:r,disabled:r,children:e("auth.login.submit",{defaultValue:"Sign In"})})]}),n.jsxs("div",{className:"mt-6",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("div",{className:"w-full border-t border-[var(--color-border-subtle)]"})}),n.jsx("div",{className:"relative flex justify-center text-sm",children:n.jsx("span",{className:"px-2 bg-[var(--color-surface-base)] text-[var(--color-text-muted)]",children:e("auth.login.or",{defaultValue:"Or"})})})]}),n.jsx("div",{className:"mt-6 text-center",children:n.jsxs("p",{className:"text-sm text-[var(--color-text-muted)]",children:[e("auth.login.noAccount",{defaultValue:"Don't have an account?"})," ",n.jsx(Kt,{to:"/register",className:"text-[var(--color-semantic-primary-500)] hover:text-[var(--color-semantic-primary-600)]",children:e("auth.login.signUp",{defaultValue:"Sign up"})})]})})]})]})]}),n.jsx("div",{className:"text-center",children:n.jsx("p",{className:"text-xs text-[var(--color-text-muted)]",children:e("auth.login.terms",{defaultValue:"By signing in, you agree to our Terms of Service and Privacy Policy"})})})]})})},hm={login:async e=>(await $.post("/api/v1/auth/login",e)).data,logout:async()=>{await $.post("/api/v1/auth/logout")},me:async()=>(await $.get("/api/v1/auth/me")).data,forgotPassword:async e=>{await $.post("/api/v1/auth/password/forgot",e)},resetPassword:async e=>{await $.post("/api/v1/auth/password/reset",e)},verifyTwoFactor:async e=>(await $.post("/api/v1/auth/2fa/verify",e)).data,resendTwoFactor:async()=>{await $.post("/api/v1/auth/2fa/resend")},getCsrfCookie:async()=>{await $.get("/sanctum/csrf-cookie")}},Bw=Tr({email:vn().email("Invalid email address")}),qw=()=>{const{t:e}=Qt(),[t,s]=p.useState(!1),[r,a]=p.useState(!1),[i,o]=p.useState(null),{register:c,handleSubmit:l,formState:{errors:u}}=Xa({resolver:Ya(Bw),defaultValues:{email:""}}),d=async h=>{s(!0),o(null);try{await hm.forgotPassword(h),a(!0)}catch(m){const g=m.response?.data?.message||"Failed to send reset email";o(g)}finally{s(!1)}};return r?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[var(--color-surface-base)] py-12 px-4 sm:px-6 lg:px-8",children:n.jsx("div",{className:"max-w-md w-full space-y-8",children:n.jsxs(J,{children:[n.jsxs(ye,{children:[n.jsxs(ve,{className:"text-center text-[var(--color-semantic-success-600)]",children:["✅ ",e("auth.forgotPassword.successTitle",{defaultValue:"Email Sent!"})]}),n.jsx(vt,{className:"text-center",children:e("auth.forgotPassword.successDescription",{defaultValue:"Check your email for password reset instructions"})})]}),n.jsx(ee,{children:n.jsxs("div",{className:"text-center space-y-4",children:[n.jsx("p",{className:"text-sm text-[var(--color-text-muted)]",children:e("auth.forgotPassword.successMessage",{defaultValue:"We've sent a password reset link to your email address. Please check your inbox and follow the instructions to reset your password."})}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx(Kt,{to:"/login",className:"text-sm text-[var(--color-semantic-primary-500)] hover:text-[var(--color-semantic-primary-600)]",children:e("auth.forgotPassword.backToLogin",{defaultValue:"Back to Sign In"})}),n.jsx(le,{variant:"outline",onClick:()=>a(!1),className:"w-full",children:e("auth.forgotPassword.tryAgain",{defaultValue:"Try Again"})})]})]})})]})})}):n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[var(--color-surface-base)] py-12 px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"max-w-md w-full space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-3xl font-bold text-[var(--color-text-primary)]",children:e("auth.forgotPassword.title",{defaultValue:"Forgot Password?"})}),n.jsx("p",{className:"mt-2 text-[var(--color-text-muted)]",children:e("auth.forgotPassword.subtitle",{defaultValue:"Enter your email to receive reset instructions"})})]}),n.jsxs(J,{children:[n.jsxs(ye,{children:[n.jsx(ve,{children:e("auth.forgotPassword.formTitle",{defaultValue:"Reset Password"})}),n.jsx(vt,{children:e("auth.forgotPassword.formDescription",{defaultValue:"We'll send you a link to reset your password"})})]}),n.jsxs(ee,{children:[n.jsxs("form",{onSubmit:l(d),className:"space-y-6",children:[i&&n.jsx("div",{className:"p-3 rounded-[var(--radius-md)] bg-[var(--color-semantic-danger-50)] border border-[var(--color-semantic-danger-200)]",children:n.jsx("p",{className:"text-sm text-[var(--color-semantic-danger-700)]",children:i})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{htmlFor:"email",className:"text-sm font-medium text-[var(--color-text-primary)]",children:e("auth.forgotPassword.email",{defaultValue:"Email Address"})}),n.jsx("input",{...c("email"),type:"email",id:"email",autoComplete:"email",className:"w-full px-3 py-2 border border-[var(--color-border-default)] rounded-[var(--radius-md)] focus:outline-none focus:ring-2 focus:ring-[var(--color-semantic-primary-500)] focus:border-transparent",placeholder:e("auth.forgotPassword.emailPlaceholder",{defaultValue:"Enter your email"})}),u.email&&n.jsx("p",{className:"text-sm text-[var(--color-semantic-danger-500)]",children:u.email.message})]}),n.jsx(le,{type:"submit",className:"w-full",loading:t,disabled:t,children:e("auth.forgotPassword.submit",{defaultValue:"Send Reset Link"})})]}),n.jsx("div",{className:"mt-6 text-center",children:n.jsx(Kt,{to:"/login",className:"text-sm text-[var(--color-semantic-primary-500)] hover:text-[var(--color-semantic-primary-600)]",children:e("auth.forgotPassword.backToLogin",{defaultValue:"Back to Sign In"})})})]})]})]})})},Ww=Tr({password:vn().min(8,"Password must be at least 8 characters"),password_confirmation:vn()}).refine(e=>e.password===e.password_confirmation,{message:"Passwords don't match",path:["password_confirmation"]}),zw=()=>{const{t:e}=Qt(),t=Vs(),[s]=Wu(),[r,a]=p.useState(!1),[i,o]=p.useState(!1),[c,l]=p.useState(null),[u,d]=p.useState(!1),[h,m]=p.useState(!1),g=s.get("token"),f=s.get("email"),{register:x,handleSubmit:y,formState:{errors:v}}=Xa({resolver:Ya(Ww),defaultValues:{password:"",password_confirmation:""}});p.useEffect(()=>{(!g||!f)&&t("/forgot-password")},[g,f,t]);const w=async j=>{if(!(!g||!f)){a(!0),l(null);try{await hm.resetPassword({email:f,token:g,password:j.password,password_confirmation:j.password_confirmation}),o(!0)}catch(N){const T=N.response?.data?.message||"Failed to reset password";l(T)}finally{a(!1)}}};return i?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[var(--color-surface-base)] py-12 px-4 sm:px-6 lg:px-8",children:n.jsx("div",{className:"max-w-md w-full space-y-8",children:n.jsxs(J,{children:[n.jsxs(ye,{children:[n.jsxs(ve,{className:"text-center text-[var(--color-semantic-success-600)]",children:["✅ ",e("auth.resetPassword.successTitle",{defaultValue:"Password Reset!"})]}),n.jsx(vt,{className:"text-center",children:e("auth.resetPassword.successDescription",{defaultValue:"Your password has been successfully reset"})})]}),n.jsx(ee,{children:n.jsxs("div",{className:"text-center space-y-4",children:[n.jsx("p",{className:"text-sm text-[var(--color-text-muted)]",children:e("auth.resetPassword.successMessage",{defaultValue:"You can now sign in with your new password."})}),n.jsx(Kt,{to:"/login",children:n.jsx(le,{className:"w-full",children:e("auth.resetPassword.signIn",{defaultValue:"Sign In"})})})]})})]})})}):!g||!f?null:n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[var(--color-surface-base)] py-12 px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"max-w-md w-full space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-3xl font-bold text-[var(--color-text-primary)]",children:e("auth.resetPassword.title",{defaultValue:"Reset Password"})}),n.jsx("p",{className:"mt-2 text-[var(--color-text-muted)]",children:e("auth.resetPassword.subtitle",{defaultValue:"Enter your new password"})})]}),n.jsxs(J,{children:[n.jsxs(ye,{children:[n.jsx(ve,{children:e("auth.resetPassword.formTitle",{defaultValue:"New Password"})}),n.jsx(vt,{children:e("auth.resetPassword.formDescription",{defaultValue:"Choose a strong password for your account"})})]}),n.jsxs(ee,{children:[n.jsxs("form",{onSubmit:y(w),className:"space-y-6",children:[c&&n.jsx("div",{className:"p-3 rounded-[var(--radius-md)] bg-[var(--color-semantic-danger-50)] border border-[var(--color-semantic-danger-200)]",children:n.jsx("p",{className:"text-sm text-[var(--color-semantic-danger-700)]",children:c})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-[var(--color-text-primary)]",children:e("auth.resetPassword.password",{defaultValue:"New Password"})}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{...x("password"),type:u?"text":"password",id:"password",autoComplete:"new-password",className:"w-full px-3 py-2 pr-10 border border-[var(--color-border-default)] rounded-[var(--radius-md)] focus:outline-none focus:ring-2 focus:ring-[var(--color-semantic-primary-500)] focus:border-transparent",placeholder:e("auth.resetPassword.passwordPlaceholder",{defaultValue:"Enter new password"})}),n.jsx("button",{type:"button",onClick:()=>d(!u),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-[var(--color-text-muted)] hover:text-[var(--color-text-primary)]","aria-label":u?"Hide password":"Show password",children:u?"👁️":"👁️‍🗨️"})]}),v.password&&n.jsx("p",{className:"text-sm text-[var(--color-semantic-danger-500)]",children:v.password.message})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{htmlFor:"password_confirmation",className:"text-sm font-medium text-[var(--color-text-primary)]",children:e("auth.resetPassword.confirmPassword",{defaultValue:"Confirm Password"})}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{...x("password_confirmation"),type:h?"text":"password",id:"password_confirmation",autoComplete:"new-password",className:"w-full px-3 py-2 pr-10 border border-[var(--color-border-default)] rounded-[var(--radius-md)] focus:outline-none focus:ring-2 focus:ring-[var(--color-semantic-primary-500)] focus:border-transparent",placeholder:e("auth.resetPassword.confirmPasswordPlaceholder",{defaultValue:"Confirm new password"})}),n.jsx("button",{type:"button",onClick:()=>m(!h),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-[var(--color-text-muted)] hover:text-[var(--color-text-primary)]","aria-label":h?"Hide password":"Show password",children:h?"👁️":"👁️‍🗨️"})]}),v.password_confirmation&&n.jsx("p",{className:"text-sm text-[var(--color-semantic-danger-500)]",children:v.password_confirmation.message})]}),n.jsx("div",{className:"text-xs text-[var(--color-text-muted)]",children:n.jsx("p",{children:e("auth.resetPassword.passwordRequirements",{defaultValue:"Password must be at least 8 characters long"})})}),n.jsx(le,{type:"submit",className:"w-full",loading:r,disabled:r,children:e("auth.resetPassword.submit",{defaultValue:"Reset Password"})})]}),n.jsx("div",{className:"mt-6 text-center",children:n.jsx(Kt,{to:"/login",className:"text-sm text-[var(--color-semantic-primary-500)] hover:text-[var(--color-semantic-primary-600)]",children:e("auth.resetPassword.backToLogin",{defaultValue:"Back to Sign In"})})})]})]})]})})},mm=p.createContext({});function Kw(e){const t=p.useRef(null);return t.current===null&&(t.current=e()),t.current}const oc=typeof window<"u",Hw=oc?p.useLayoutEffect:p.useEffect,cc=p.createContext(null);function lc(e,t){e.indexOf(t)===-1&&e.push(t)}function dc(e,t){const s=e.indexOf(t);s>-1&&e.splice(s,1)}const xs=(e,t,s)=>s>t?t:s<e?e:s;let uc=()=>{};const ys={},fm=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function pm(e){return typeof e=="object"&&e!==null}const gm=e=>/^0[^.\s]+$/u.test(e);function hc(e){let t;return()=>(t===void 0&&(t=e()),t)}const Mt=e=>e,Qw=(e,t)=>s=>t(e(s)),On=(...e)=>e.reduce(Qw),bn=(e,t,s)=>{const r=t-e;return r===0?1:(s-e)/r};class mc{constructor(){this.subscriptions=[]}add(t){return lc(this.subscriptions,t),()=>dc(this.subscriptions,t)}notify(t,s,r){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,s,r);else for(let i=0;i<a;i++){const o=this.subscriptions[i];o&&o(t,s,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const is=e=>e*1e3,os=e=>e/1e3;function xm(e,t){return t?e*(1e3/t):0}const ym=(e,t,s)=>(((1-3*s+3*t)*e+(3*s-6*t))*e+3*t)*e,Zw=1e-7,Xw=12;function Yw(e,t,s,r,a){let i,o,c=0;do o=t+(s-t)/2,i=ym(o,r,a)-e,i>0?s=o:t=o;while(Math.abs(i)>Zw&&++c<Xw);return o}function Fn(e,t,s,r){if(e===t&&s===r)return Mt;const a=i=>Yw(i,0,1,e,s);return i=>i===0||i===1?i:ym(a(i),t,r)}const vm=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,bm=e=>t=>1-e(1-t),wm=Fn(.33,1.53,.69,.99),fc=bm(wm),jm=vm(fc),Nm=e=>(e*=2)<1?.5*fc(e):.5*(2-Math.pow(2,-10*(e-1))),pc=e=>1-Math.sin(Math.acos(e)),km=bm(pc),_m=vm(pc),Gw=Fn(.42,0,1,1),Jw=Fn(0,0,.58,1),Tm=Fn(.42,0,.58,1),ej=e=>Array.isArray(e)&&typeof e[0]!="number",Sm=e=>Array.isArray(e)&&typeof e[0]=="number",tj={linear:Mt,easeIn:Gw,easeInOut:Tm,easeOut:Jw,circIn:pc,circInOut:_m,circOut:km,backIn:fc,backInOut:jm,backOut:wm,anticipate:Nm},sj=e=>typeof e=="string",ud=e=>{if(Sm(e)){uc(e.length===4);const[t,s,r,a]=e;return Fn(t,s,r,a)}else if(sj(e))return tj[e];return e},Zn=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function rj(e,t){let s=new Set,r=new Set,a=!1,i=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function l(d){o.has(d)&&(u.schedule(d),e()),d(c)}const u={schedule:(d,h=!1,m=!1)=>{const f=m&&a?s:r;return h&&o.add(d),f.has(d)||f.add(d),d},cancel:d=>{r.delete(d),o.delete(d)},process:d=>{if(c=d,a){i=!0;return}a=!0,[s,r]=[r,s],s.forEach(l),s.clear(),a=!1,i&&(i=!1,u.process(d))}};return u}const nj=40;function Cm(e,t){let s=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>s=!0,o=Zn.reduce((j,N)=>(j[N]=rj(i),j),{}),{setup:c,read:l,resolveKeyframes:u,preUpdate:d,update:h,preRender:m,render:g,postRender:f}=o,x=()=>{const j=ys.useManualTiming?a.timestamp:performance.now();s=!1,ys.useManualTiming||(a.delta=r?1e3/60:Math.max(Math.min(j-a.timestamp,nj),1)),a.timestamp=j,a.isProcessing=!0,c.process(a),l.process(a),u.process(a),d.process(a),h.process(a),m.process(a),g.process(a),f.process(a),a.isProcessing=!1,s&&t&&(r=!1,e(x))},y=()=>{s=!0,r=!0,a.isProcessing||e(x)};return{schedule:Zn.reduce((j,N)=>{const T=o[N];return j[N]=(O,D=!1,k=!1)=>(s||y(),T.schedule(O,D,k)),j},{}),cancel:j=>{for(let N=0;N<Zn.length;N++)o[Zn[N]].cancel(j)},state:a,steps:o}}const{schedule:Re,cancel:Fs,state:Je,steps:bi}=Cm(typeof requestAnimationFrame<"u"?requestAnimationFrame:Mt,!0);let ua;function aj(){ua=void 0}const mt={now:()=>(ua===void 0&&mt.set(Je.isProcessing||ys.useManualTiming?Je.timestamp:performance.now()),ua),set:e=>{ua=e,queueMicrotask(aj)}},Am=e=>t=>typeof t=="string"&&t.startsWith(e),gc=Am("--"),ij=Am("var(--"),xc=e=>ij(e)?oj.test(e.split("/*")[0].trim()):!1,oj=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ir={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},wn={...Ir,transform:e=>xs(0,1,e)},Xn={...Ir,default:1},ln=e=>Math.round(e*1e5)/1e5,yc=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function cj(e){return e==null}const lj=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,vc=(e,t)=>s=>!!(typeof s=="string"&&lj.test(s)&&s.startsWith(e)||t&&!cj(s)&&Object.prototype.hasOwnProperty.call(s,t)),Pm=(e,t,s)=>r=>{if(typeof r!="string")return r;const[a,i,o,c]=r.match(yc);return{[e]:parseFloat(a),[t]:parseFloat(i),[s]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},dj=e=>xs(0,255,e),wi={...Ir,transform:e=>Math.round(dj(e))},Hs={test:vc("rgb","red"),parse:Pm("red","green","blue"),transform:({red:e,green:t,blue:s,alpha:r=1})=>"rgba("+wi.transform(e)+", "+wi.transform(t)+", "+wi.transform(s)+", "+ln(wn.transform(r))+")"};function uj(e){let t="",s="",r="",a="";return e.length>5?(t=e.substring(1,3),s=e.substring(3,5),r=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),s=e.substring(2,3),r=e.substring(3,4),a=e.substring(4,5),t+=t,s+=s,r+=r,a+=a),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}}const uo={test:vc("#"),parse:uj,transform:Hs.transform},Ln=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),ks=Ln("deg"),cs=Ln("%"),se=Ln("px"),hj=Ln("vh"),mj=Ln("vw"),hd={...cs,parse:e=>cs.parse(e)/100,transform:e=>cs.transform(e*100)},xr={test:vc("hsl","hue"),parse:Pm("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:s,alpha:r=1})=>"hsla("+Math.round(e)+", "+cs.transform(ln(t))+", "+cs.transform(ln(s))+", "+ln(wn.transform(r))+")"},$e={test:e=>Hs.test(e)||uo.test(e)||xr.test(e),parse:e=>Hs.test(e)?Hs.parse(e):xr.test(e)?xr.parse(e):uo.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Hs.transform(e):xr.transform(e),getAnimatableNone:e=>{const t=$e.parse(e);return t.alpha=0,$e.transform(t)}},fj=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function pj(e){return isNaN(e)&&typeof e=="string"&&(e.match(yc)?.length||0)+(e.match(fj)?.length||0)>0}const Em="number",Rm="color",gj="var",xj="var(",md="${}",yj=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function jn(e){const t=e.toString(),s=[],r={color:[],number:[],var:[]},a=[];let i=0;const c=t.replace(yj,l=>($e.test(l)?(r.color.push(i),a.push(Rm),s.push($e.parse(l))):l.startsWith(xj)?(r.var.push(i),a.push(gj),s.push(l)):(r.number.push(i),a.push(Em),s.push(parseFloat(l))),++i,md)).split(md);return{values:s,split:c,indexes:r,types:a}}function Dm(e){return jn(e).values}function Mm(e){const{split:t,types:s}=jn(e),r=t.length;return a=>{let i="";for(let o=0;o<r;o++)if(i+=t[o],a[o]!==void 0){const c=s[o];c===Em?i+=ln(a[o]):c===Rm?i+=$e.transform(a[o]):i+=a[o]}return i}}const vj=e=>typeof e=="number"?0:$e.test(e)?$e.getAnimatableNone(e):e;function bj(e){const t=Dm(e);return Mm(e)(t.map(vj))}const Ls={test:pj,parse:Dm,createTransformer:Mm,getAnimatableNone:bj};function ji(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(t-e)*6*s:s<1/2?t:s<2/3?e+(t-e)*(2/3-s)*6:e}function wj({hue:e,saturation:t,lightness:s,alpha:r}){e/=360,t/=100,s/=100;let a=0,i=0,o=0;if(!t)a=i=o=s;else{const c=s<.5?s*(1+t):s+t-s*t,l=2*s-c;a=ji(l,c,e+1/3),i=ji(l,c,e),o=ji(l,c,e-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function Fa(e,t){return s=>s>0?t:e}const De=(e,t,s)=>e+(t-e)*s,Ni=(e,t,s)=>{const r=e*e,a=s*(t*t-r)+r;return a<0?0:Math.sqrt(a)},jj=[uo,Hs,xr],Nj=e=>jj.find(t=>t.test(e));function fd(e){const t=Nj(e);if(!t)return!1;let s=t.parse(e);return t===xr&&(s=wj(s)),s}const pd=(e,t)=>{const s=fd(e),r=fd(t);if(!s||!r)return Fa(e,t);const a={...s};return i=>(a.red=Ni(s.red,r.red,i),a.green=Ni(s.green,r.green,i),a.blue=Ni(s.blue,r.blue,i),a.alpha=De(s.alpha,r.alpha,i),Hs.transform(a))},ho=new Set(["none","hidden"]);function kj(e,t){return ho.has(e)?s=>s<=0?e:t:s=>s>=1?t:e}function _j(e,t){return s=>De(e,t,s)}function bc(e){return typeof e=="number"?_j:typeof e=="string"?xc(e)?Fa:$e.test(e)?pd:Cj:Array.isArray(e)?Om:typeof e=="object"?$e.test(e)?pd:Tj:Fa}function Om(e,t){const s=[...e],r=s.length,a=e.map((i,o)=>bc(i)(i,t[o]));return i=>{for(let o=0;o<r;o++)s[o]=a[o](i);return s}}function Tj(e,t){const s={...e,...t},r={};for(const a in s)e[a]!==void 0&&t[a]!==void 0&&(r[a]=bc(e[a])(e[a],t[a]));return a=>{for(const i in r)s[i]=r[i](a);return s}}function Sj(e,t){const s=[],r={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const i=t.types[a],o=e.indexes[i][r[i]],c=e.values[o]??0;s[a]=c,r[i]++}return s}const Cj=(e,t)=>{const s=Ls.createTransformer(t),r=jn(e),a=jn(t);return r.indexes.var.length===a.indexes.var.length&&r.indexes.color.length===a.indexes.color.length&&r.indexes.number.length>=a.indexes.number.length?ho.has(e)&&!a.values.length||ho.has(t)&&!r.values.length?kj(e,t):On(Om(Sj(r,a),a.values),s):Fa(e,t)};function Fm(e,t,s){return typeof e=="number"&&typeof t=="number"&&typeof s=="number"?De(e,t,s):bc(e)(e,t)}const Aj=e=>{const t=({timestamp:s})=>e(s);return{start:(s=!0)=>Re.update(t,s),stop:()=>Fs(t),now:()=>Je.isProcessing?Je.timestamp:mt.now()}},Lm=(e,t,s=10)=>{let r="";const a=Math.max(Math.round(t/s),2);for(let i=0;i<a;i++)r+=Math.round(e(i/(a-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},La=2e4;function wc(e){let t=0;const s=50;let r=e.next(t);for(;!r.done&&t<La;)t+=s,r=e.next(t);return t>=La?1/0:t}function Pj(e,t=100,s){const r=s({...e,keyframes:[0,t]}),a=Math.min(wc(r),La);return{type:"keyframes",ease:i=>r.next(a*i).value/t,duration:os(a)}}const Ej=5;function Vm(e,t,s){const r=Math.max(t-Ej,0);return xm(s-e(r),t-r)}const Oe={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ki=.001;function Rj({duration:e=Oe.duration,bounce:t=Oe.bounce,velocity:s=Oe.velocity,mass:r=Oe.mass}){let a,i,o=1-t;o=xs(Oe.minDamping,Oe.maxDamping,o),e=xs(Oe.minDuration,Oe.maxDuration,os(e)),o<1?(a=u=>{const d=u*o,h=d*e,m=d-s,g=mo(u,o),f=Math.exp(-h);return ki-m/g*f},i=u=>{const h=u*o*e,m=h*s+s,g=Math.pow(o,2)*Math.pow(u,2)*e,f=Math.exp(-h),x=mo(Math.pow(u,2),o);return(-a(u)+ki>0?-1:1)*((m-g)*f)/x}):(a=u=>{const d=Math.exp(-u*e),h=(u-s)*e+1;return-ki+d*h},i=u=>{const d=Math.exp(-u*e),h=(s-u)*(e*e);return d*h});const c=5/e,l=Mj(a,i,c);if(e=is(e),isNaN(l))return{stiffness:Oe.stiffness,damping:Oe.damping,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:e}}}const Dj=12;function Mj(e,t,s){let r=s;for(let a=1;a<Dj;a++)r=r-e(r)/t(r);return r}function mo(e,t){return e*Math.sqrt(1-t*t)}const Oj=["duration","bounce"],Fj=["stiffness","damping","mass"];function gd(e,t){return t.some(s=>e[s]!==void 0)}function Lj(e){let t={velocity:Oe.velocity,stiffness:Oe.stiffness,damping:Oe.damping,mass:Oe.mass,isResolvedFromDuration:!1,...e};if(!gd(e,Fj)&&gd(e,Oj))if(e.visualDuration){const s=e.visualDuration,r=2*Math.PI/(s*1.2),a=r*r,i=2*xs(.05,1,1-(e.bounce||0))*Math.sqrt(a);t={...t,mass:Oe.mass,stiffness:a,damping:i}}else{const s=Rj(e);t={...t,...s,mass:Oe.mass},t.isResolvedFromDuration=!0}return t}function Va(e=Oe.visualDuration,t=Oe.bounce){const s=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:a}=s;const i=s.keyframes[0],o=s.keyframes[s.keyframes.length-1],c={done:!1,value:i},{stiffness:l,damping:u,mass:d,duration:h,velocity:m,isResolvedFromDuration:g}=Lj({...s,velocity:-os(s.velocity||0)}),f=m||0,x=u/(2*Math.sqrt(l*d)),y=o-i,v=os(Math.sqrt(l/d)),w=Math.abs(y)<5;r||(r=w?Oe.restSpeed.granular:Oe.restSpeed.default),a||(a=w?Oe.restDelta.granular:Oe.restDelta.default);let j;if(x<1){const T=mo(v,x);j=O=>{const D=Math.exp(-x*v*O);return o-D*((f+x*v*y)/T*Math.sin(T*O)+y*Math.cos(T*O))}}else if(x===1)j=T=>o-Math.exp(-v*T)*(y+(f+v*y)*T);else{const T=v*Math.sqrt(x*x-1);j=O=>{const D=Math.exp(-x*v*O),k=Math.min(T*O,300);return o-D*((f+x*v*y)*Math.sinh(k)+T*y*Math.cosh(k))/T}}const N={calculatedDuration:g&&h||null,next:T=>{const O=j(T);if(g)c.done=T>=h;else{let D=T===0?f:0;x<1&&(D=T===0?is(f):Vm(j,T,O));const k=Math.abs(D)<=r,z=Math.abs(o-O)<=a;c.done=k&&z}return c.value=c.done?o:O,c},toString:()=>{const T=Math.min(wc(N),La),O=Lm(D=>N.next(T*D).value,T,30);return T+"ms "+O},toTransition:()=>{}};return N}Va.applyToOptions=e=>{const t=Pj(e,100,Va);return e.ease=t.ease,e.duration=is(t.duration),e.type="keyframes",e};function fo({keyframes:e,velocity:t=0,power:s=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:c,max:l,restDelta:u=.5,restSpeed:d}){const h=e[0],m={done:!1,value:h},g=k=>c!==void 0&&k<c||l!==void 0&&k>l,f=k=>c===void 0?l:l===void 0||Math.abs(c-k)<Math.abs(l-k)?c:l;let x=s*t;const y=h+x,v=o===void 0?y:o(y);v!==y&&(x=v-h);const w=k=>-x*Math.exp(-k/r),j=k=>v+w(k),N=k=>{const z=w(k),ne=j(k);m.done=Math.abs(z)<=u,m.value=m.done?v:ne};let T,O;const D=k=>{g(m.value)&&(T=k,O=Va({keyframes:[m.value,f(m.value)],velocity:Vm(j,k,m.value),damping:a,stiffness:i,restDelta:u,restSpeed:d}))};return D(0),{calculatedDuration:null,next:k=>{let z=!1;return!O&&T===void 0&&(z=!0,N(k),D(k)),T!==void 0&&k>=T?O.next(k-T):(!z&&N(k),m)}}}function Vj(e,t,s){const r=[],a=s||ys.mix||Fm,i=e.length-1;for(let o=0;o<i;o++){let c=a(e[o],e[o+1]);if(t){const l=Array.isArray(t)?t[o]||Mt:t;c=On(l,c)}r.push(c)}return r}function Uj(e,t,{clamp:s=!0,ease:r,mixer:a}={}){const i=e.length;if(uc(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const c=Vj(t,r,a),l=c.length,u=d=>{if(o&&d<e[0])return t[0];let h=0;if(l>1)for(;h<e.length-2&&!(d<e[h+1]);h++);const m=bn(e[h],e[h+1],d);return c[h](m)};return s?d=>u(xs(e[0],e[i-1],d)):u}function Ij(e,t){const s=e[e.length-1];for(let r=1;r<=t;r++){const a=bn(0,t,r);e.push(De(s,1,a))}}function $j(e){const t=[0];return Ij(t,e.length-1),t}function Bj(e,t){return e.map(s=>s*t)}function qj(e,t){return e.map(()=>t||Tm).splice(0,e.length-1)}function dn({duration:e=300,keyframes:t,times:s,ease:r="easeInOut"}){const a=ej(r)?r.map(ud):ud(r),i={done:!1,value:t[0]},o=Bj(s&&s.length===t.length?s:$j(t),e),c=Uj(o,t,{ease:Array.isArray(a)?a:qj(t,a)});return{calculatedDuration:e,next:l=>(i.value=c(l),i.done=l>=e,i)}}const Wj=e=>e!==null;function jc(e,{repeat:t,repeatType:s="loop"},r,a=1){const i=e.filter(Wj),c=a<0||t&&s!=="loop"&&t%2===1?0:i.length-1;return!c||r===void 0?i[c]:r}const zj={decay:fo,inertia:fo,tween:dn,keyframes:dn,spring:Va};function Um(e){typeof e.type=="string"&&(e.type=zj[e.type])}class Nc{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,s){return this.finished.then(t,s)}}const Kj=e=>e/100;class kc extends Nc{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:s}=this.options;s&&s.updatedAt!==mt.now()&&this.tick(mt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;Um(t);const{type:s=dn,repeat:r=0,repeatDelay:a=0,repeatType:i,velocity:o=0}=t;let{keyframes:c}=t;const l=s||dn;l!==dn&&typeof c[0]!="number"&&(this.mixKeyframes=On(Kj,Fm(c[0],c[1])),c=[0,100]);const u=l({...t,keyframes:c});i==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...c].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=wc(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+a,this.totalDuration=this.resolvedDuration*(r+1)-a,this.generator=u}updateTime(t){const s=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(t,s=!1){const{generator:r,totalDuration:a,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:m,repeatDelay:g,type:f,onUpdate:x,finalKeyframe:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-a/this.speed,this.startTime)),s?this.currentTime=t:this.updateTime(t);const v=this.currentTime-u*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?v<0:v>a;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let j=this.currentTime,N=r;if(h){const k=Math.min(this.currentTime,a)/c;let z=Math.floor(k),ne=k%1;!ne&&k>=1&&(ne=1),ne===1&&z--,z=Math.min(z,h+1),!!(z%2)&&(m==="reverse"?(ne=1-ne,g&&(ne-=g/c)):m==="mirror"&&(N=o)),j=xs(0,1,ne)*c}const T=w?{done:!1,value:d[0]}:N.next(j);i&&(T.value=i(T.value));let{done:O}=T;!w&&l!==null&&(O=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return D&&f!==fo&&(T.value=jc(d,this.options,y,this.speed)),x&&x(T.value),D&&this.finish(),T}then(t,s){return this.finished.then(t,s)}get duration(){return os(this.calculatedDuration)}get time(){return os(this.currentTime)}set time(t){t=is(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(mt.now());const s=this.playbackSpeed!==t;this.playbackSpeed=t,s&&(this.time=os(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=Aj,startTime:s}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=s??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(mt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function Hj(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Qs=e=>e*180/Math.PI,po=e=>{const t=Qs(Math.atan2(e[1],e[0]));return go(t)},Qj={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:po,rotateZ:po,skewX:e=>Qs(Math.atan(e[1])),skewY:e=>Qs(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},go=e=>(e=e%360,e<0&&(e+=360),e),xd=po,yd=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),vd=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Zj={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:yd,scaleY:vd,scale:e=>(yd(e)+vd(e))/2,rotateX:e=>go(Qs(Math.atan2(e[6],e[5]))),rotateY:e=>go(Qs(Math.atan2(-e[2],e[0]))),rotateZ:xd,rotate:xd,skewX:e=>Qs(Math.atan(e[4])),skewY:e=>Qs(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function xo(e){return e.includes("scale")?1:0}function yo(e,t){if(!e||e==="none")return xo(t);const s=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,a;if(s)r=Zj,a=s;else{const c=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Qj,a=c}if(!a)return xo(t);const i=r[t],o=a[1].split(",").map(Yj);return typeof i=="function"?i(o):o[i]}const Xj=(e,t)=>{const{transform:s="none"}=getComputedStyle(e);return yo(s,t)};function Yj(e){return parseFloat(e.trim())}const $r=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Br=new Set($r),bd=e=>e===Ir||e===se,Gj=new Set(["x","y","z"]),Jj=$r.filter(e=>!Gj.has(e));function e1(e){const t=[];return Jj.forEach(s=>{const r=e.getValue(s);r!==void 0&&(t.push([s,r.get()]),r.set(s.startsWith("scale")?1:0))}),t}const Ys={width:({x:e},{paddingLeft:t="0",paddingRight:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),height:({y:e},{paddingTop:t="0",paddingBottom:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>yo(t,"x"),y:(e,{transform:t})=>yo(t,"y")};Ys.translateX=Ys.x;Ys.translateY=Ys.y;const Gs=new Set;let vo=!1,bo=!1,wo=!1;function Im(){if(bo){const e=Array.from(Gs).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),s=new Map;t.forEach(r=>{const a=e1(r);a.length&&(s.set(r,a),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const a=s.get(r);a&&a.forEach(([i,o])=>{r.getValue(i)?.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}bo=!1,vo=!1,Gs.forEach(e=>e.complete(wo)),Gs.clear()}function $m(){Gs.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(bo=!0)})}function t1(){wo=!0,$m(),Im(),wo=!1}class _c{constructor(t,s,r,a,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=s,this.name=r,this.motionValue=a,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Gs.add(this),vo||(vo=!0,Re.read($m),Re.resolveKeyframes(Im))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:s,element:r,motionValue:a}=this;if(t[0]===null){const i=a?.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&s){const c=r.readValue(s,o);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=o),a&&i===void 0&&a.set(t[0])}Hj(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Gs.delete(this)}cancel(){this.state==="scheduled"&&(Gs.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const s1=e=>e.startsWith("--");function r1(e,t,s){s1(t)?e.style.setProperty(t,s):e.style[t]=s}const n1=hc(()=>window.ScrollTimeline!==void 0),a1={};function i1(e,t){const s=hc(e);return()=>a1[t]??s()}const Bm=i1(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),nn=([e,t,s,r])=>`cubic-bezier(${e}, ${t}, ${s}, ${r})`,wd={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:nn([0,.65,.55,1]),circOut:nn([.55,0,1,.45]),backIn:nn([.31,.01,.66,-.59]),backOut:nn([.33,1.53,.69,.99])};function qm(e,t){if(e)return typeof e=="function"?Bm()?Lm(e,t):"ease-out":Sm(e)?nn(e):Array.isArray(e)?e.map(s=>qm(s,t)||wd.easeOut):wd[e]}function o1(e,t,s,{delay:r=0,duration:a=300,repeat:i=0,repeatType:o="loop",ease:c="easeOut",times:l}={},u=void 0){const d={[t]:s};l&&(d.offset=l);const h=qm(c,a);Array.isArray(h)&&(d.easing=h);const m={delay:r,duration:a,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return u&&(m.pseudoElement=u),e.animate(d,m)}function Wm(e){return typeof e=="function"&&"applyToOptions"in e}function c1({type:e,...t}){return Wm(e)&&Bm()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class l1 extends Nc{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:s,name:r,keyframes:a,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:c,onComplete:l}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,uc(typeof t.type!="string");const u=c1(t);this.animation=o1(s,r,a,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const d=jc(a,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(d):r1(s,r,d),this.animation.cancel()}l?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return os(Number(t))}get time(){return os(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=is(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:s}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&n1()?(this.animation.timeline=t,Mt):s(this)}}const zm={anticipate:Nm,backInOut:jm,circInOut:_m};function d1(e){return e in zm}function u1(e){typeof e.ease=="string"&&d1(e.ease)&&(e.ease=zm[e.ease])}const jd=10;class h1 extends l1{constructor(t){u1(t),Um(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:s,onUpdate:r,onComplete:a,element:i,...o}=this.options;if(!s)return;if(t!==void 0){s.set(t);return}const c=new kc({...o,autoplay:!1}),l=is(this.finishedTime??this.time);s.setWithVelocity(c.sample(l-jd).value,c.sample(l).value,jd),c.stop()}}const Nd=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Ls.test(e)||e==="0")&&!e.startsWith("url("));function m1(e){const t=e[0];if(e.length===1)return!0;for(let s=0;s<e.length;s++)if(e[s]!==t)return!0}function f1(e,t,s,r){const a=e[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=Nd(a,t),c=Nd(i,t);return!o||!c?!1:m1(e)||(s==="spring"||Wm(s))&&r}function jo(e){e.duration=0,e.type}const p1=new Set(["opacity","clipPath","filter","transform"]),g1=hc(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function x1(e){const{motionValue:t,name:s,repeatDelay:r,repeatType:a,damping:i,type:o}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return g1()&&s&&p1.has(s)&&(s!=="transform"||!u)&&!l&&!r&&a!=="mirror"&&i!==0&&o!=="inertia"}const y1=40;class v1 extends Nc{constructor({autoplay:t=!0,delay:s=0,type:r="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:o="loop",keyframes:c,name:l,motionValue:u,element:d,...h}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=mt.now();const m={autoplay:t,delay:s,type:r,repeat:a,repeatDelay:i,repeatType:o,name:l,motionValue:u,element:d,...h},g=d?.KeyframeResolver||_c;this.keyframeResolver=new g(c,(f,x,y)=>this.onKeyframesResolved(f,x,m,!y),l,u,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,s,r,a){this.keyframeResolver=void 0;const{name:i,type:o,velocity:c,delay:l,isHandoff:u,onUpdate:d}=r;this.resolvedAt=mt.now(),f1(t,i,o,c)||((ys.instantAnimations||!l)&&d?.(jc(t,r,s)),t[0]=t[t.length-1],jo(r),r.repeat=0);const m={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>y1?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...r,keyframes:t},g=!u&&x1(m)?new h1({...m,element:m.motionValue.owner.current}):new kc(m);g.finished.then(()=>this.notifyFinished()).catch(Mt),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(t,s){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),t1()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const b1=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function w1(e){const t=b1.exec(e);if(!t)return[,];const[,s,r,a]=t;return[`--${s??r}`,a]}function Km(e,t,s=1){const[r,a]=w1(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const o=i.trim();return fm(o)?parseFloat(o):o}return xc(a)?Km(a,t,s+1):a}function Tc(e,t){return e?.[t]??e?.default??e}const Hm=new Set(["width","height","top","left","right","bottom",...$r]),j1={test:e=>e==="auto",parse:e=>e},Qm=e=>t=>t.test(e),Zm=[Ir,se,cs,ks,mj,hj,j1],kd=e=>Zm.find(Qm(e));function N1(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||gm(e):!0}const k1=new Set(["brightness","contrast","saturate","opacity"]);function _1(e){const[t,s]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=s.match(yc)||[];if(!r)return e;const a=s.replace(r,"");let i=k1.has(t)?1:0;return r!==s&&(i*=100),t+"("+i+a+")"}const T1=/\b([a-z-]*)\(.*?\)/gu,No={...Ls,getAnimatableNone:e=>{const t=e.match(T1);return t?t.map(_1).join(" "):e}},_d={...Ir,transform:Math.round},S1={rotate:ks,rotateX:ks,rotateY:ks,rotateZ:ks,scale:Xn,scaleX:Xn,scaleY:Xn,scaleZ:Xn,skew:ks,skewX:ks,skewY:ks,distance:se,translateX:se,translateY:se,translateZ:se,x:se,y:se,z:se,perspective:se,transformPerspective:se,opacity:wn,originX:hd,originY:hd,originZ:se},Sc={borderWidth:se,borderTopWidth:se,borderRightWidth:se,borderBottomWidth:se,borderLeftWidth:se,borderRadius:se,radius:se,borderTopLeftRadius:se,borderTopRightRadius:se,borderBottomRightRadius:se,borderBottomLeftRadius:se,width:se,maxWidth:se,height:se,maxHeight:se,top:se,right:se,bottom:se,left:se,padding:se,paddingTop:se,paddingRight:se,paddingBottom:se,paddingLeft:se,margin:se,marginTop:se,marginRight:se,marginBottom:se,marginLeft:se,backgroundPositionX:se,backgroundPositionY:se,...S1,zIndex:_d,fillOpacity:wn,strokeOpacity:wn,numOctaves:_d},C1={...Sc,color:$e,backgroundColor:$e,outlineColor:$e,fill:$e,stroke:$e,borderColor:$e,borderTopColor:$e,borderRightColor:$e,borderBottomColor:$e,borderLeftColor:$e,filter:No,WebkitFilter:No},Xm=e=>C1[e];function Ym(e,t){let s=Xm(e);return s!==No&&(s=Ls),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const A1=new Set(["auto","none","0"]);function P1(e,t,s){let r=0,a;for(;r<e.length&&!a;){const i=e[r];typeof i=="string"&&!A1.has(i)&&jn(i).values.length&&(a=e[r]),r++}if(a&&s)for(const i of t)e[i]=Ym(s,a)}class E1 extends _c{constructor(t,s,r,a,i){super(t,s,r,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:s,name:r}=this;if(!s||!s.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),xc(u))){const d=Km(u,s.current);d!==void 0&&(t[l]=d),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Hm.has(r)||t.length!==2)return;const[a,i]=t,o=kd(a),c=kd(i);if(o!==c)if(bd(o)&&bd(c))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else Ys[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:s}=this,r=[];for(let a=0;a<t.length;a++)(t[a]===null||N1(t[a]))&&r.push(a);r.length&&P1(t,r,s)}measureInitialState(){const{element:t,unresolvedKeyframes:s,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ys[r](t.measureViewportBox(),window.getComputedStyle(t.current)),s[0]=this.measuredOrigin;const a=s[s.length-1];a!==void 0&&t.getValue(r,a).jump(a,!1)}measureEndState(){const{element:t,name:s,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const a=t.getValue(s);a&&a.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=Ys[s](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,l])=>{t.getValue(c).set(l)}),this.resolveNoneKeyframes()}}function R1(e,t,s){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const a=s?.[e]??r.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}const Gm=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function D1(e){return pm(e)&&"offsetHeight"in e}const Td=30,M1=e=>!isNaN(parseFloat(e));class O1{constructor(t,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const a=mt.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=s.owner}setCurrent(t){this.current=t,this.updatedAt=mt.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=M1(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,s){this.events[t]||(this.events[t]=new mc);const r=this.events[t].add(s);return t==="change"?()=>{r(),Re.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,s){this.passiveEffect=t,this.stopPassiveEffect=s}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,s,r){this.set(s),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,s=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=mt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Td)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,Td);return xm(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(t){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=t(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Mr(e,t){return new O1(e,t)}const{schedule:Cc}=Cm(queueMicrotask,!1),Ut={x:!1,y:!1};function Jm(){return Ut.x||Ut.y}function F1(e){return e==="x"||e==="y"?Ut[e]?null:(Ut[e]=!0,()=>{Ut[e]=!1}):Ut.x||Ut.y?null:(Ut.x=Ut.y=!0,()=>{Ut.x=Ut.y=!1})}function ef(e,t){const s=R1(e),r=new AbortController,a={passive:!0,...t,signal:r.signal};return[s,a,()=>r.abort()]}function Sd(e){return!(e.pointerType==="touch"||Jm())}function L1(e,t,s={}){const[r,a,i]=ef(e,s),o=c=>{if(!Sd(c))return;const{target:l}=c,u=t(l,c);if(typeof u!="function"||!l)return;const d=h=>{Sd(h)&&(u(h),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,a)};return r.forEach(c=>{c.addEventListener("pointerenter",o,a)}),i}const tf=(e,t)=>t?e===t?!0:tf(e,t.parentElement):!1,Ac=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,V1=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function U1(e){return V1.has(e.tagName)||e.tabIndex!==-1}const ha=new WeakSet;function Cd(e){return t=>{t.key==="Enter"&&e(t)}}function _i(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const I1=(e,t)=>{const s=e.currentTarget;if(!s)return;const r=Cd(()=>{if(ha.has(s))return;_i(s,"down");const a=Cd(()=>{_i(s,"up")}),i=()=>_i(s,"cancel");s.addEventListener("keyup",a,t),s.addEventListener("blur",i,t)});s.addEventListener("keydown",r,t),s.addEventListener("blur",()=>s.removeEventListener("keydown",r),t)};function Ad(e){return Ac(e)&&!Jm()}function $1(e,t,s={}){const[r,a,i]=ef(e,s),o=c=>{const l=c.currentTarget;if(!Ad(c))return;ha.add(l);const u=t(l,c),d=(g,f)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",m),ha.has(l)&&ha.delete(l),Ad(g)&&typeof u=="function"&&u(g,{success:f})},h=g=>{d(g,l===window||l===document||s.useGlobalTarget||tf(l,g.target))},m=g=>{d(g,!1)};window.addEventListener("pointerup",h,a),window.addEventListener("pointercancel",m,a)};return r.forEach(c=>{(s.useGlobalTarget?window:c).addEventListener("pointerdown",o,a),D1(c)&&(c.addEventListener("focus",u=>I1(u,a)),!U1(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),i}function sf(e){return pm(e)&&"ownerSVGElement"in e}function B1(e){return sf(e)&&e.tagName==="svg"}const tt=e=>!!(e&&e.getVelocity),q1=[...Zm,$e,Ls],W1=e=>q1.find(Qm(e)),rf=p.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function z1(e=!0){const t=p.useContext(cc);if(t===null)return[!0,null];const{isPresent:s,onExitComplete:r,register:a}=t,i=p.useId();p.useEffect(()=>{if(e)return a(i)},[e]);const o=p.useCallback(()=>e&&r&&r(i),[i,r,e]);return!s&&r?[!1,o]:[!0]}const nf=p.createContext({strict:!1}),Pd={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Or={};for(const e in Pd)Or[e]={isEnabled:t=>Pd[e].some(s=>!!t[s])};function K1(e){for(const t in e)Or[t]={...Or[t],...e[t]}}const H1=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ua(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||H1.has(e)}let af=e=>!Ua(e);function Q1(e){typeof e=="function"&&(af=t=>t.startsWith("on")?!Ua(t):e(t))}try{Q1(require("@emotion/is-prop-valid").default)}catch{}function Z1(e,t,s){const r={};for(const a in e)a==="values"&&typeof e.values=="object"||(af(a)||s===!0&&Ua(a)||!t&&!Ua(a)||e.draggable&&a.startsWith("onDrag"))&&(r[a]=e[a]);return r}const Ga=p.createContext({});function Ja(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Nn(e){return typeof e=="string"||Array.isArray(e)}const Pc=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ec=["initial",...Pc];function ei(e){return Ja(e.animate)||Ec.some(t=>Nn(e[t]))}function of(e){return!!(ei(e)||e.variants)}function X1(e,t){if(ei(e)){const{initial:s,animate:r}=e;return{initial:s===!1||Nn(s)?s:void 0,animate:Nn(r)?r:void 0}}return e.inherit!==!1?t:{}}function Y1(e){const{initial:t,animate:s}=X1(e,p.useContext(Ga));return p.useMemo(()=>({initial:t,animate:s}),[Ed(t),Ed(s)])}function Ed(e){return Array.isArray(e)?e.join(" "):e}const kn={};function G1(e){for(const t in e)kn[t]=e[t],gc(t)&&(kn[t].isCSSVariable=!0)}function cf(e,{layout:t,layoutId:s}){return Br.has(e)||e.startsWith("origin")||(t||s!==void 0)&&(!!kn[e]||e==="opacity")}const J1={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},eN=$r.length;function tN(e,t,s){let r="",a=!0;for(let i=0;i<eN;i++){const o=$r[i],c=e[o];if(c===void 0)continue;let l=!0;if(typeof c=="number"?l=c===(o.startsWith("scale")?1:0):l=parseFloat(c)===0,!l||s){const u=Gm(c,Sc[o]);if(!l){a=!1;const d=J1[o]||o;r+=`${d}(${u}) `}s&&(t[o]=u)}}return r=r.trim(),s?r=s(t,a?"":r):a&&(r="none"),r}function Rc(e,t,s){const{style:r,vars:a,transformOrigin:i}=e;let o=!1,c=!1;for(const l in t){const u=t[l];if(Br.has(l)){o=!0;continue}else if(gc(l)){a[l]=u;continue}else{const d=Gm(u,Sc[l]);l.startsWith("origin")?(c=!0,i[l]=d):r[l]=d}}if(t.transform||(o||s?r.transform=tN(t,e.transform,s):r.transform&&(r.transform="none")),c){const{originX:l="50%",originY:u="50%",originZ:d=0}=i;r.transformOrigin=`${l} ${u} ${d}`}}const Dc=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function lf(e,t,s){for(const r in t)!tt(t[r])&&!cf(r,s)&&(e[r]=t[r])}function sN({transformTemplate:e},t){return p.useMemo(()=>{const s=Dc();return Rc(s,t,e),Object.assign({},s.vars,s.style)},[t])}function rN(e,t){const s=e.style||{},r={};return lf(r,s,e),Object.assign(r,sN(e,t)),r}function nN(e,t){const s={},r=rN(e,t);return e.drag&&e.dragListener!==!1&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=r,s}const aN={offset:"stroke-dashoffset",array:"stroke-dasharray"},iN={offset:"strokeDashoffset",array:"strokeDasharray"};function oN(e,t,s=1,r=0,a=!0){e.pathLength=1;const i=a?aN:iN;e[i.offset]=se.transform(-r);const o=se.transform(t),c=se.transform(s);e[i.array]=`${o} ${c}`}function df(e,{attrX:t,attrY:s,attrScale:r,pathLength:a,pathSpacing:i=1,pathOffset:o=0,...c},l,u,d){if(Rc(e,c,u),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:m}=e;h.transform&&(m.transform=h.transform,delete h.transform),(m.transform||h.transformOrigin)&&(m.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),m.transform&&(m.transformBox=d?.transformBox??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),s!==void 0&&(h.y=s),r!==void 0&&(h.scale=r),a!==void 0&&oN(h,a,i,o,!1)}const uf=()=>({...Dc(),attrs:{}}),hf=e=>typeof e=="string"&&e.toLowerCase()==="svg";function cN(e,t,s,r){const a=p.useMemo(()=>{const i=uf();return df(i,t,hf(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};lf(i,e.style,e),a.style={...i,...a.style}}return a}const lN=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Mc(e){return typeof e!="string"||e.includes("-")?!1:!!(lN.indexOf(e)>-1||/[A-Z]/u.test(e))}function dN(e,t,s,{latestValues:r},a,i=!1){const c=(Mc(e)?cN:nN)(t,r,a,e),l=Z1(t,typeof e=="string",i),u=e!==p.Fragment?{...l,...c,ref:s}:{},{children:d}=t,h=p.useMemo(()=>tt(d)?d.get():d,[d]);return p.createElement(e,{...u,children:h})}function Rd(e){const t=[{},{}];return e?.values.forEach((s,r)=>{t[0][r]=s.get(),t[1][r]=s.getVelocity()}),t}function Oc(e,t,s,r){if(typeof t=="function"){const[a,i]=Rd(r);t=t(s!==void 0?s:e.custom,a,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[a,i]=Rd(r);t=t(s!==void 0?s:e.custom,a,i)}return t}function ma(e){return tt(e)?e.get():e}function uN({scrapeMotionValuesFromProps:e,createRenderState:t},s,r,a){return{latestValues:hN(s,r,a,e),renderState:t()}}function hN(e,t,s,r){const a={},i=r(e,{});for(const m in i)a[m]=ma(i[m]);let{initial:o,animate:c}=e;const l=ei(e),u=of(e);t&&u&&!l&&e.inherit!==!1&&(o===void 0&&(o=t.initial),c===void 0&&(c=t.animate));let d=s?s.initial===!1:!1;d=d||o===!1;const h=d?c:o;if(h&&typeof h!="boolean"&&!Ja(h)){const m=Array.isArray(h)?h:[h];for(let g=0;g<m.length;g++){const f=Oc(e,m[g]);if(f){const{transitionEnd:x,transition:y,...v}=f;for(const w in v){let j=v[w];if(Array.isArray(j)){const N=d?j.length-1:0;j=j[N]}j!==null&&(a[w]=j)}for(const w in x)a[w]=x[w]}}}return a}const mf=e=>(t,s)=>{const r=p.useContext(Ga),a=p.useContext(cc),i=()=>uN(e,t,r,a);return s?i():Kw(i)};function Fc(e,t,s){const{style:r}=e,a={};for(const i in r)(tt(r[i])||t.style&&tt(t.style[i])||cf(i,e)||s?.getValue(i)?.liveStyle!==void 0)&&(a[i]=r[i]);return a}const mN=mf({scrapeMotionValuesFromProps:Fc,createRenderState:Dc});function ff(e,t,s){const r=Fc(e,t,s);for(const a in e)if(tt(e[a])||tt(t[a])){const i=$r.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;r[i]=e[a]}return r}const fN=mf({scrapeMotionValuesFromProps:ff,createRenderState:uf}),pN=Symbol.for("motionComponentSymbol");function yr(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function gN(e,t,s){return p.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),s&&(typeof s=="function"?s(r):yr(s)&&(s.current=r))},[t])}const Lc=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),xN="framerAppearId",pf="data-"+Lc(xN),gf=p.createContext({});function yN(e,t,s,r,a){const{visualElement:i}=p.useContext(Ga),o=p.useContext(nf),c=p.useContext(cc),l=p.useContext(rf).reducedMotion,u=p.useRef(null);r=r||o.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:i,props:s,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:l}));const d=u.current,h=p.useContext(gf);d&&!d.projection&&a&&(d.type==="html"||d.type==="svg")&&vN(u.current,s,a,h);const m=p.useRef(!1);p.useInsertionEffect(()=>{d&&m.current&&d.update(s,c)});const g=s[pf],f=p.useRef(!!g&&!window.MotionHandoffIsComplete?.(g)&&window.MotionHasOptimisedAnimation?.(g));return Hw(()=>{d&&(m.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),f.current&&d.animationState&&d.animationState.animateChanges())}),p.useEffect(()=>{d&&(!f.current&&d.animationState&&d.animationState.animateChanges(),f.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(g)}),f.current=!1),d.enteringChildren=void 0)}),d}function vN(e,t,s,r){const{layoutId:a,layout:i,drag:o,dragConstraints:c,layoutScroll:l,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new s(e.latestValues,t["data-framer-portal-id"]?void 0:xf(e.parent)),e.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!o||c&&yr(c),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:u})}function xf(e){if(e)return e.options.allowProjection!==!1?e.projection:xf(e.parent)}function Ti(e,{forwardMotionProps:t=!1}={},s,r){s&&K1(s);const a=Mc(e)?fN:mN;function i(c,l){let u;const d={...p.useContext(rf),...c,layoutId:bN(c)},{isStatic:h}=d,m=Y1(c),g=a(c,h);if(!h&&oc){wN();const f=jN(d);u=f.MeasureLayout,m.visualElement=yN(e,g,d,r,f.ProjectionNode)}return n.jsxs(Ga.Provider,{value:m,children:[u&&m.visualElement?n.jsx(u,{visualElement:m.visualElement,...d}):null,dN(e,c,gN(g,m.visualElement,l),g,h,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=p.forwardRef(i);return o[pN]=e,o}function bN({layoutId:e}){const t=p.useContext(mm).id;return t&&e!==void 0?t+"-"+e:e}function wN(e,t){p.useContext(nf).strict}function jN(e){const{drag:t,layout:s}=Or;if(!t&&!s)return{};const r={...t,...s};return{MeasureLayout:t?.isEnabled(e)||s?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function NN(e,t){if(typeof Proxy>"u")return Ti;const s=new Map,r=(i,o)=>Ti(i,o,e,t),a=(i,o)=>r(i,o);return new Proxy(a,{get:(i,o)=>o==="create"?r:(s.has(o)||s.set(o,Ti(o,void 0,e,t)),s.get(o))})}function yf({top:e,left:t,right:s,bottom:r}){return{x:{min:t,max:s},y:{min:e,max:r}}}function kN({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function _N(e,t){if(!t)return e;const s=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:r.y,right:r.x}}function Si(e){return e===void 0||e===1}function ko({scale:e,scaleX:t,scaleY:s}){return!Si(e)||!Si(t)||!Si(s)}function qs(e){return ko(e)||vf(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function vf(e){return Dd(e.x)||Dd(e.y)}function Dd(e){return e&&e!=="0%"}function Ia(e,t,s){const r=e-s,a=t*r;return s+a}function Md(e,t,s,r,a){return a!==void 0&&(e=Ia(e,a,r)),Ia(e,s,r)+t}function _o(e,t=0,s=1,r,a){e.min=Md(e.min,t,s,r,a),e.max=Md(e.max,t,s,r,a)}function bf(e,{x:t,y:s}){_o(e.x,t.translate,t.scale,t.originPoint),_o(e.y,s.translate,s.scale,s.originPoint)}const Od=.999999999999,Fd=1.0000000000001;function TN(e,t,s,r=!1){const a=s.length;if(!a)return;t.x=t.y=1;let i,o;for(let c=0;c<a;c++){i=s[c],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&br(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,bf(e,o)),r&&qs(i.latestValues)&&br(e,i.latestValues))}t.x<Fd&&t.x>Od&&(t.x=1),t.y<Fd&&t.y>Od&&(t.y=1)}function vr(e,t){e.min=e.min+t,e.max=e.max+t}function Ld(e,t,s,r,a=.5){const i=De(e.min,e.max,a);_o(e,t,s,i,r)}function br(e,t){Ld(e.x,t.x,t.scaleX,t.scale,t.originX),Ld(e.y,t.y,t.scaleY,t.scale,t.originY)}function wf(e,t){return yf(_N(e.getBoundingClientRect(),t))}function SN(e,t,s){const r=wf(e,s),{scroll:a}=t;return a&&(vr(r.x,a.offset.x),vr(r.y,a.offset.y)),r}const Vd=()=>({translate:0,scale:1,origin:0,originPoint:0}),wr=()=>({x:Vd(),y:Vd()}),Ud=()=>({min:0,max:0}),Le=()=>({x:Ud(),y:Ud()}),To={current:null},jf={current:!1};function CN(){if(jf.current=!0,!!oc)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>To.current=e.matches;e.addEventListener("change",t),t()}else To.current=!1}const AN=new WeakMap;function PN(e,t,s){for(const r in t){const a=t[r],i=s[r];if(tt(a))e.addValue(r,a);else if(tt(i))e.addValue(r,Mr(a,{owner:e}));else if(i!==a)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(a):o.hasAnimated||o.set(a)}else{const o=e.getStaticValue(r);e.addValue(r,Mr(o!==void 0?o:a,{owner:e}))}}for(const r in s)t[r]===void 0&&e.removeValue(r);return t}const Id=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class EN{scrapeMotionValuesFromProps(t,s,r){return{}}constructor({parent:t,props:s,presenceContext:r,reducedMotionConfig:a,blockInitialAnimation:i,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=_c,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=mt.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Re.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=s.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=s,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=c,this.blockInitialAnimation=!!i,this.isControllingVariants=ei(s),this.isVariantNode=of(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(s,{},this);for(const m in h){const g=h[m];l[m]!==void 0&&tt(g)&&g.set(l[m])}}mount(t){this.current=t,AN.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,r)=>this.bindToMotionValue(r,s)),jf.current||CN(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:To.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Fs(this.notifyUpdate),Fs(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const s=this.features[t];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,s){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Br.has(t);r&&this.onBindTransform&&this.onBindTransform();const a=s.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Re.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,s)),this.valueSubscriptions.set(t,()=>{a(),i&&i(),s.owner&&s.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Or){const s=Or[t];if(!s)continue;const{isEnabled:r,Feature:a}=s;if(!this.features[t]&&a&&r(this.props)&&(this.features[t]=new a(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Le()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,s){this.latestValues[t]=s}update(t,s){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let r=0;r<Id.length;r++){const a=Id[r];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,o=t[i];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=PN(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(t),()=>s.variantChildren.delete(t)}addValue(t,s){const r=this.values.get(t);s!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,s),this.values.set(t,s),this.latestValues[t]=s.get())}removeValue(t){this.values.delete(t);const s=this.valueSubscriptions.get(t);s&&(s(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,s){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&s!==void 0&&(r=Mr(s===null?void 0:s,{owner:this}),this.addValue(t,r)),r}readValue(t,s){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(fm(r)||gm(r))?r=parseFloat(r):!W1(r)&&Ls.test(s)&&(r=Ym(t,s)),this.setBaseTarget(t,tt(r)?r.get():r)),tt(r)?r.get():r}setBaseTarget(t,s){this.baseTarget[t]=s}getBaseTarget(t){const{initial:s}=this.props;let r;if(typeof s=="string"||typeof s=="object"){const i=Oc(this.props,s,this.presenceContext?.custom);i&&(r=i[t])}if(s&&r!==void 0)return r;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!tt(a)?a:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,s){return this.events[t]||(this.events[t]=new mc),this.events[t].add(s)}notify(t,...s){this.events[t]&&this.events[t].notify(...s)}scheduleRenderMicrotask(){Cc.render(this.render)}}class Nf extends EN{constructor(){super(...arguments),this.KeyframeResolver=E1}sortInstanceNodePosition(t,s){return t.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(t,s){return t.style?t.style[s]:void 0}removeValueFromRenderState(t,{vars:s,style:r}){delete s[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;tt(t)&&(this.childSubscription=t.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function kf(e,{style:t,vars:s},r,a){const i=e.style;let o;for(o in t)i[o]=t[o];a?.applyProjectionStyles(i,r);for(o in s)i.setProperty(o,s[o])}function RN(e){return window.getComputedStyle(e)}class DN extends Nf{constructor(){super(...arguments),this.type="html",this.renderInstance=kf}readValueFromInstance(t,s){if(Br.has(s))return this.projection?.isProjecting?xo(s):Xj(t,s);{const r=RN(t),a=(gc(s)?r.getPropertyValue(s):r[s])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:s}){return wf(t,s)}build(t,s,r){Rc(t,s,r.transformTemplate)}scrapeMotionValuesFromProps(t,s,r){return Fc(t,s,r)}}const _f=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function MN(e,t,s,r){kf(e,t,void 0,r);for(const a in t.attrs)e.setAttribute(_f.has(a)?a:Lc(a),t.attrs[a])}class ON extends Nf{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Le}getBaseTargetFromProps(t,s){return t[s]}readValueFromInstance(t,s){if(Br.has(s)){const r=Xm(s);return r&&r.default||0}return s=_f.has(s)?s:Lc(s),t.getAttribute(s)}scrapeMotionValuesFromProps(t,s,r){return ff(t,s,r)}build(t,s,r){df(t,s,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,s,r,a){MN(t,s,r,a)}mount(t){this.isSVGTag=hf(t.tagName),super.mount(t)}}const FN=(e,t)=>Mc(e)?new ON(t):new DN(t,{allowProjection:e!==p.Fragment});function Sr(e,t,s){const r=e.getProps();return Oc(r,t,s!==void 0?s:r.custom,e)}const So=e=>Array.isArray(e);function LN(e,t,s){e.hasValue(t)?e.getValue(t).set(s):e.addValue(t,Mr(s))}function VN(e){return So(e)?e[e.length-1]||0:e}function UN(e,t){const s=Sr(e,t);let{transitionEnd:r={},transition:a={},...i}=s||{};i={...i,...r};for(const o in i){const c=VN(i[o]);LN(e,o,c)}}function IN(e){return!!(tt(e)&&e.add)}function Co(e,t){const s=e.getValue("willChange");if(IN(s))return s.add(t);if(!s&&ys.WillChange){const r=new ys.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function Tf(e){return e.props[pf]}const $N=e=>e!==null;function BN(e,{repeat:t,repeatType:s="loop"},r){const a=e.filter($N),i=t&&s!=="loop"&&t%2===1?0:a.length-1;return a[i]}const qN={type:"spring",stiffness:500,damping:25,restSpeed:10},WN=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),zN={type:"keyframes",duration:.8},KN={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},HN=(e,{keyframes:t})=>t.length>2?zN:Br.has(e)?e.startsWith("scale")?WN(t[1]):qN:KN;function QN({when:e,delay:t,delayChildren:s,staggerChildren:r,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:c,from:l,elapsed:u,...d}){return!!Object.keys(d).length}const Vc=(e,t,s,r={},a,i)=>o=>{const c=Tc(r,e)||{},l=c.delay||r.delay||0;let{elapsed:u=0}=r;u=u-is(l);const d={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-u,onUpdate:m=>{t.set(m),c.onUpdate&&c.onUpdate(m)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:e,motionValue:t,element:i?void 0:a};QN(c)||Object.assign(d,HN(e,d)),d.duration&&(d.duration=is(d.duration)),d.repeatDelay&&(d.repeatDelay=is(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(jo(d),d.delay===0&&(h=!0)),(ys.instantAnimations||ys.skipAnimations)&&(h=!0,jo(d),d.delay=0),d.allowFlatten=!c.type&&!c.ease,h&&!i&&t.get()!==void 0){const m=BN(d.keyframes,c);if(m!==void 0){Re.update(()=>{d.onUpdate(m),d.onComplete()});return}}return c.isSync?new kc(d):new v1(d)};function ZN({protectedKeys:e,needsAnimating:t},s){const r=e.hasOwnProperty(s)&&t[s]!==!0;return t[s]=!1,r}function Sf(e,t,{delay:s=0,transitionOverride:r,type:a}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...c}=t;r&&(i=r);const l=[],u=a&&e.animationState&&e.animationState.getState()[a];for(const d in c){const h=e.getValue(d,e.latestValues[d]??null),m=c[d];if(m===void 0||u&&ZN(u,d))continue;const g={delay:s,...Tc(i||{},d)},f=h.get();if(f!==void 0&&!h.isAnimating&&!Array.isArray(m)&&m===f&&!g.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const v=Tf(e);if(v){const w=window.MotionHandoffAnimation(v,d,Re);w!==null&&(g.startTime=w,x=!0)}}Co(e,d),h.start(Vc(d,h,m,e.shouldReduceMotion&&Hm.has(d)?{type:!1}:g,e,x));const y=h.animation;y&&l.push(y)}return o&&Promise.all(l).then(()=>{Re.update(()=>{o&&UN(e,o)})}),l}function Cf(e,t,s,r=0,a=1){const i=Array.from(e).sort((u,d)=>u.sortNodePosition(d)).indexOf(t),o=e.size,c=(o-1)*r;return typeof s=="function"?s(i,o):a===1?i*r:c-i*r}function Ao(e,t,s={}){const r=Sr(e,t,s.type==="exit"?e.presenceContext?.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=r||{};s.transitionOverride&&(a=s.transitionOverride);const i=r?()=>Promise.all(Sf(e,r,s)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=a;return XN(e,t,l,u,d,h,s)}:()=>Promise.resolve(),{when:c}=a;if(c){const[l,u]=c==="beforeChildren"?[i,o]:[o,i];return l().then(()=>u())}else return Promise.all([i(),o(s.delay)])}function XN(e,t,s=0,r=0,a=0,i=1,o){const c=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),c.push(Ao(l,t,{...o,delay:s+(typeof r=="function"?0:r)+Cf(e.variantChildren,l,r,a,i)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(c)}function YN(e,t,s={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const a=t.map(i=>Ao(e,i,s));r=Promise.all(a)}else if(typeof t=="string")r=Ao(e,t,s);else{const a=typeof t=="function"?Sr(e,t,s.custom):t;r=Promise.all(Sf(e,a,s))}return r.then(()=>{e.notify("AnimationComplete",t)})}function Af(e,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==e.length)return!1;for(let r=0;r<s;r++)if(t[r]!==e[r])return!1;return!0}const GN=Ec.length;function Pf(e){if(!e)return;if(!e.isControllingVariants){const s=e.parent?Pf(e.parent)||{}:{};return e.props.initial!==void 0&&(s.initial=e.props.initial),s}const t={};for(let s=0;s<GN;s++){const r=Ec[s],a=e.props[r];(Nn(a)||a===!1)&&(t[r]=a)}return t}const JN=[...Pc].reverse(),ek=Pc.length;function tk(e){return t=>Promise.all(t.map(({animation:s,options:r})=>YN(e,s,r)))}function sk(e){let t=tk(e),s=$d(),r=!0;const a=l=>(u,d)=>{const h=Sr(e,d,l==="exit"?e.presenceContext?.custom:void 0);if(h){const{transition:m,transitionEnd:g,...f}=h;u={...u,...f,...g}}return u};function i(l){t=l(e)}function o(l){const{props:u}=e,d=Pf(e.parent)||{},h=[],m=new Set;let g={},f=1/0;for(let y=0;y<ek;y++){const v=JN[y],w=s[v],j=u[v]!==void 0?u[v]:d[v],N=Nn(j),T=v===l?w.isActive:null;T===!1&&(f=y);let O=j===d[v]&&j!==u[v]&&N;if(O&&r&&e.manuallyAnimateOnMount&&(O=!1),w.protectedKeys={...g},!w.isActive&&T===null||!j&&!w.prevProp||Ja(j)||typeof j=="boolean")continue;const D=rk(w.prevProp,j);let k=D||v===l&&w.isActive&&!O&&N||y>f&&N,z=!1;const ne=Array.isArray(j)?j:[j];let ue=ne.reduce(a(v),{});T===!1&&(ue={});const{prevResolvedValues:te={}}=w,re={...te,...ue},V=Q=>{k=!0,m.has(Q)&&(z=!0,m.delete(Q)),w.needsAnimating[Q]=!0;const _e=e.getValue(Q);_e&&(_e.liveStyle=!1)};for(const Q in re){const _e=ue[Q],Ae=te[Q];if(g.hasOwnProperty(Q))continue;let rt=!1;So(_e)&&So(Ae)?rt=!Af(_e,Ae):rt=_e!==Ae,rt?_e!=null?V(Q):m.add(Q):_e!==void 0&&m.has(Q)?V(Q):w.protectedKeys[Q]=!0}w.prevProp=j,w.prevResolvedValues=ue,w.isActive&&(g={...g,...ue}),r&&e.blockInitialAnimation&&(k=!1);const S=O&&D;k&&(!S||z)&&h.push(...ne.map(Q=>{const _e={type:v};if(typeof Q=="string"&&r&&!S&&e.manuallyAnimateOnMount&&e.parent){const{parent:Ae}=e,rt=Sr(Ae,Q);if(Ae.enteringChildren&&rt){const{delayChildren:R}=rt.transition||{};_e.delay=Cf(Ae.enteringChildren,e,R)}}return{animation:Q,options:_e}}))}if(m.size){const y={};if(typeof u.initial!="boolean"){const v=Sr(e,Array.isArray(u.initial)?u.initial[0]:u.initial);v&&v.transition&&(y.transition=v.transition)}m.forEach(v=>{const w=e.getBaseTarget(v),j=e.getValue(v);j&&(j.liveStyle=!0),y[v]=w??null}),h.push({animation:y})}let x=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(x=!1),r=!1,x?t(h):Promise.resolve()}function c(l,u){if(s[l].isActive===u)return Promise.resolve();e.variantChildren?.forEach(h=>h.animationState?.setActive(l,u)),s[l].isActive=u;const d=o(l);for(const h in s)s[h].protectedKeys={};return d}return{animateChanges:o,setActive:c,setAnimateFunction:i,getState:()=>s,reset:()=>{s=$d(),r=!0}}}function rk(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Af(t,e):!1}function $s(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function $d(){return{animate:$s(!0),whileInView:$s(),whileHover:$s(),whileTap:$s(),whileDrag:$s(),whileFocus:$s(),exit:$s()}}class Us{constructor(t){this.isMounted=!1,this.node=t}update(){}}class nk extends Us{constructor(t){super(t),t.animationState||(t.animationState=sk(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Ja(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:s}=this.node.prevProps||{};t!==s&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let ak=0;class ik extends Us{constructor(){super(...arguments),this.id=ak++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const a=this.node.animationState.setActive("exit",!t);s&&!t&&a.then(()=>{s(this.id)})}mount(){const{register:t,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const ok={animation:{Feature:nk},exit:{Feature:ik}};function _n(e,t,s,r={passive:!0}){return e.addEventListener(t,s,r),()=>e.removeEventListener(t,s)}function Vn(e){return{point:{x:e.pageX,y:e.pageY}}}const ck=e=>t=>Ac(t)&&e(t,Vn(t));function un(e,t,s,r){return _n(e,t,ck(s),r)}const Ef=1e-4,lk=1-Ef,dk=1+Ef,Rf=.01,uk=0-Rf,hk=0+Rf;function ct(e){return e.max-e.min}function mk(e,t,s){return Math.abs(e-t)<=s}function Bd(e,t,s,r=.5){e.origin=r,e.originPoint=De(t.min,t.max,e.origin),e.scale=ct(s)/ct(t),e.translate=De(s.min,s.max,e.origin)-e.originPoint,(e.scale>=lk&&e.scale<=dk||isNaN(e.scale))&&(e.scale=1),(e.translate>=uk&&e.translate<=hk||isNaN(e.translate))&&(e.translate=0)}function hn(e,t,s,r){Bd(e.x,t.x,s.x,r?r.originX:void 0),Bd(e.y,t.y,s.y,r?r.originY:void 0)}function qd(e,t,s){e.min=s.min+t.min,e.max=e.min+ct(t)}function fk(e,t,s){qd(e.x,t.x,s.x),qd(e.y,t.y,s.y)}function Wd(e,t,s){e.min=t.min-s.min,e.max=e.min+ct(t)}function mn(e,t,s){Wd(e.x,t.x,s.x),Wd(e.y,t.y,s.y)}function At(e){return[e("x"),e("y")]}const Df=({current:e})=>e?e.ownerDocument.defaultView:null,zd=(e,t)=>Math.abs(e-t);function pk(e,t){const s=zd(e.x,t.x),r=zd(e.y,t.y);return Math.sqrt(s**2+r**2)}class Mf{constructor(t,s,{transformPagePoint:r,contextWindow:a=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Ai(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,f=pk(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!f)return;const{point:x}=m,{timestamp:y}=Je;this.history.push({...x,timestamp:y});const{onStart:v,onMove:w}=this.handlers;g||(v&&v(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,m)},this.handlePointerMove=(m,g)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Ci(g,this.transformPagePoint),Re.update(this.updatePoint,!0)},this.handlePointerUp=(m,g)=>{this.end();const{onEnd:f,onSessionEnd:x,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Ai(m.type==="pointercancel"?this.lastMoveEventInfo:Ci(g,this.transformPagePoint),this.history);this.startEvent&&f&&f(m,v),x&&x(m,v)},!Ac(t))return;this.dragSnapToOrigin=i,this.handlers=s,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=a||window;const c=Vn(t),l=Ci(c,this.transformPagePoint),{point:u}=l,{timestamp:d}=Je;this.history=[{...u,timestamp:d}];const{onSessionStart:h}=s;h&&h(t,Ai(l,this.history)),this.removeListeners=On(un(this.contextWindow,"pointermove",this.handlePointerMove),un(this.contextWindow,"pointerup",this.handlePointerUp),un(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Fs(this.updatePoint)}}function Ci(e,t){return t?{point:t(e.point)}:e}function Kd(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Ai({point:e},t){return{point:e,delta:Kd(e,Of(t)),offset:Kd(e,gk(t)),velocity:xk(t,.1)}}function gk(e){return e[0]}function Of(e){return e[e.length-1]}function xk(e,t){if(e.length<2)return{x:0,y:0};let s=e.length-1,r=null;const a=Of(e);for(;s>=0&&(r=e[s],!(a.timestamp-r.timestamp>is(t)));)s--;if(!r)return{x:0,y:0};const i=os(a.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(a.x-r.x)/i,y:(a.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function yk(e,{min:t,max:s},r){return t!==void 0&&e<t?e=r?De(t,e,r.min):Math.max(e,t):s!==void 0&&e>s&&(e=r?De(s,e,r.max):Math.min(e,s)),e}function Hd(e,t,s){return{min:t!==void 0?e.min+t:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function vk(e,{top:t,left:s,bottom:r,right:a}){return{x:Hd(e.x,s,a),y:Hd(e.y,t,r)}}function Qd(e,t){let s=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([s,r]=[r,s]),{min:s,max:r}}function bk(e,t){return{x:Qd(e.x,t.x),y:Qd(e.y,t.y)}}function wk(e,t){let s=.5;const r=ct(e),a=ct(t);return a>r?s=bn(t.min,t.max-r,e.min):r>a&&(s=bn(e.min,e.max-a,t.min)),xs(0,1,s)}function jk(e,t){const s={};return t.min!==void 0&&(s.min=t.min-e.min),t.max!==void 0&&(s.max=t.max-e.min),s}const Po=.35;function Nk(e=Po){return e===!1?e=0:e===!0&&(e=Po),{x:Zd(e,"left","right"),y:Zd(e,"top","bottom")}}function Zd(e,t,s){return{min:Xd(e,t),max:Xd(e,s)}}function Xd(e,t){return typeof e=="number"?e:e[t]||0}const kk=new WeakMap;class _k{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Le(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:s=!1,distanceThreshold:r}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(Vn(h).point)},o=(h,m)=>{const{drag:g,dragPropagation:f,onDragStart:x}=this.getProps();if(g&&!f&&(this.openDragLock&&this.openDragLock(),this.openDragLock=F1(g),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),At(v=>{let w=this.getAxisMotionValue(v).get()||0;if(cs.test(w)){const{projection:j}=this.visualElement;if(j&&j.layout){const N=j.layout.layoutBox[v];N&&(w=ct(N)*(parseFloat(w)/100))}}this.originPoint[v]=w}),x&&Re.postRender(()=>x(h,m)),Co(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},c=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m;const{dragPropagation:g,dragDirectionLock:f,onDirectionLock:x,onDrag:y}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:v}=m;if(f&&this.currentDirection===null){this.currentDirection=Tk(v),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",m.point,v),this.updateAxis("y",m.point,v),this.visualElement.render(),y&&y(h,m)},l=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m,this.stop(h,m),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>At(h=>this.getAnimationState(h)==="paused"&&this.getAxisMotionValue(h).animation?.play()),{dragSnapToOrigin:d}=this.getProps();this.panSession=new Mf(t,{onSessionStart:i,onStart:o,onMove:c,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:Df(this.visualElement)})}stop(t,s){const r=t||this.latestPointerEvent,a=s||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!a||!r)return;const{velocity:o}=a;this.startAnimation(o);const{onDragEnd:c}=this.getProps();c&&Re.postRender(()=>c(r,a))}cancel(){this.isDragging=!1;const{projection:t,animationState:s}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(t,s,r){const{drag:a}=this.getProps();if(!r||!Yn(t,a,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=yk(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){const{dragConstraints:t,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,a=this.constraints;t&&yr(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=vk(r.layoutBox,t):this.constraints=!1,this.elastic=Nk(s),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&At(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=jk(r.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:s}=this.getProps();if(!t||!yr(t))return!1;const r=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=SN(r,a.root,this.visualElement.getTransformPagePoint());let o=bk(a.layout.layoutBox,i);if(s){const c=s(kN(o));this.hasMutatedConstraints=!!c,c&&(o=yf(c))}return o}startAnimation(t){const{drag:s,dragMomentum:r,dragElastic:a,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),l=this.constraints||{},u=At(d=>{if(!Yn(d,s,this.currentDirection))return;let h=l&&l[d]||{};o&&(h={min:0,max:0});const m=a?200:1e6,g=a?40:1e7,f={type:"inertia",velocity:r?t[d]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,f)});return Promise.all(u).then(c)}startAxisValueAnimation(t,s){const r=this.getAxisMotionValue(t);return Co(this.visualElement,t),r.start(Vc(t,r,0,s,this.visualElement,!1))}stopAnimation(){At(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){At(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const s=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),a=r[s];return a||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){At(s=>{const{drag:r}=this.getProps();if(!Yn(s,r,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(s);if(a&&a.layout){const{min:o,max:c}=a.layout.layoutBox[s];i.set(t[s]-De(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:s}=this.getProps(),{projection:r}=this.visualElement;if(!yr(s)||!r||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};At(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const l=c.get();a[o]=wk({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),At(o=>{if(!Yn(o,t,null))return;const c=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];c.set(De(l,u,a[o]))})}addListeners(){if(!this.visualElement.current)return;kk.set(this.visualElement,this);const t=this.visualElement.current,s=un(t,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();yr(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",r);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Re.read(r);const o=_n(window,"resize",()=>this.scalePositionWithinConstraints()),c=a.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(At(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())}));return()=>{o(),s(),i(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:r=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:o=Po,dragMomentum:c=!0}=t;return{...t,drag:s,dragDirectionLock:r,dragPropagation:a,dragConstraints:i,dragElastic:o,dragMomentum:c}}}function Yn(e,t,s){return(t===!0||t===e)&&(s===null||s===e)}function Tk(e,t=10){let s=null;return Math.abs(e.y)>t?s="y":Math.abs(e.x)>t&&(s="x"),s}class Sk extends Us{constructor(t){super(t),this.removeGroupControls=Mt,this.removeListeners=Mt,this.controls=new _k(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Mt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Yd=e=>(t,s)=>{e&&Re.postRender(()=>e(t,s))};class Ck extends Us{constructor(){super(...arguments),this.removePointerDownListener=Mt}onPointerDown(t){this.session=new Mf(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Df(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:s,onPan:r,onPanEnd:a}=this.node.getProps();return{onSessionStart:Yd(t),onStart:Yd(s),onMove:r,onEnd:(i,o)=>{delete this.session,a&&Re.postRender(()=>a(i,o))}}}mount(){this.removePointerDownListener=un(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const fa={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Gd(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const en={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(se.test(e))e=parseFloat(e);else return e;const s=Gd(e,t.target.x),r=Gd(e,t.target.y);return`${s}% ${r}%`}},Ak={correct:(e,{treeScale:t,projectionDelta:s})=>{const r=e,a=Ls.parse(e);if(a.length>5)return r;const i=Ls.createTransformer(e),o=typeof a[0]!="number"?1:0,c=s.x.scale*t.x,l=s.y.scale*t.y;a[0+o]/=c,a[1+o]/=l;const u=De(c,l,.5);return typeof a[2+o]=="number"&&(a[2+o]/=u),typeof a[3+o]=="number"&&(a[3+o]/=u),i(a)}};let Pi=!1;class Pk extends p.Component{componentDidMount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:r,layoutId:a}=this.props,{projection:i}=t;G1(Ek),i&&(s.group&&s.group.add(i),r&&r.register&&a&&r.register(i),Pi&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),fa.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:s,visualElement:r,drag:a,isPresent:i}=this.props,{projection:o}=r;return o&&(o.isPresent=i,Pi=!0,a||t.layoutDependency!==s||s===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||Re.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Cc.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:r}=this.props,{projection:a}=t;Pi=!0,a&&(a.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(a),r&&r.deregister&&r.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Ff(e){const[t,s]=z1(),r=p.useContext(mm);return n.jsx(Pk,{...e,layoutGroup:r,switchLayoutGroup:p.useContext(gf),isPresent:t,safeToRemove:s})}const Ek={borderRadius:{...en,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:en,borderTopRightRadius:en,borderBottomLeftRadius:en,borderBottomRightRadius:en,boxShadow:Ak};function Rk(e,t,s){const r=tt(e)?e:Mr(e);return r.start(Vc("",r,t,s)),r.animation}const Dk=(e,t)=>e.depth-t.depth;class Mk{constructor(){this.children=[],this.isDirty=!1}add(t){lc(this.children,t),this.isDirty=!0}remove(t){dc(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Dk),this.isDirty=!1,this.children.forEach(t)}}function Ok(e,t){const s=mt.now(),r=({timestamp:a})=>{const i=a-s;i>=t&&(Fs(r),e(i-t))};return Re.setup(r,!0),()=>Fs(r)}const Lf=["TopLeft","TopRight","BottomLeft","BottomRight"],Fk=Lf.length,Jd=e=>typeof e=="string"?parseFloat(e):e,eu=e=>typeof e=="number"||se.test(e);function Lk(e,t,s,r,a,i){a?(e.opacity=De(0,s.opacity??1,Vk(r)),e.opacityExit=De(t.opacity??1,0,Uk(r))):i&&(e.opacity=De(t.opacity??1,s.opacity??1,r));for(let o=0;o<Fk;o++){const c=`border${Lf[o]}Radius`;let l=tu(t,c),u=tu(s,c);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||eu(l)===eu(u)?(e[c]=Math.max(De(Jd(l),Jd(u),r),0),(cs.test(u)||cs.test(l))&&(e[c]+="%")):e[c]=u}(t.rotate||s.rotate)&&(e.rotate=De(t.rotate||0,s.rotate||0,r))}function tu(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Vk=Vf(0,.5,km),Uk=Vf(.5,.95,Mt);function Vf(e,t,s){return r=>r<e?0:r>t?1:s(bn(e,t,r))}function su(e,t){e.min=t.min,e.max=t.max}function Tt(e,t){su(e.x,t.x),su(e.y,t.y)}function ru(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function nu(e,t,s,r,a){return e-=t,e=Ia(e,1/s,r),a!==void 0&&(e=Ia(e,1/a,r)),e}function Ik(e,t=0,s=1,r=.5,a,i=e,o=e){if(cs.test(t)&&(t=parseFloat(t),t=De(o.min,o.max,t/100)-o.min),typeof t!="number")return;let c=De(i.min,i.max,r);e===i&&(c-=t),e.min=nu(e.min,t,s,c,a),e.max=nu(e.max,t,s,c,a)}function au(e,t,[s,r,a],i,o){Ik(e,t[s],t[r],t[a],t.scale,i,o)}const $k=["x","scaleX","originX"],Bk=["y","scaleY","originY"];function iu(e,t,s,r){au(e.x,t,$k,s?s.x:void 0,r?r.x:void 0),au(e.y,t,Bk,s?s.y:void 0,r?r.y:void 0)}function ou(e){return e.translate===0&&e.scale===1}function Uf(e){return ou(e.x)&&ou(e.y)}function cu(e,t){return e.min===t.min&&e.max===t.max}function qk(e,t){return cu(e.x,t.x)&&cu(e.y,t.y)}function lu(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function If(e,t){return lu(e.x,t.x)&&lu(e.y,t.y)}function du(e){return ct(e.x)/ct(e.y)}function uu(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Wk{constructor(){this.members=[]}add(t){lc(this.members,t),t.scheduleRender()}remove(t){if(dc(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(t){const s=this.members.findIndex(a=>t===a);if(s===0)return!1;let r;for(let a=s;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,s){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,s&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:s,resumingFrom:r}=t;s.onExitComplete&&s.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function zk(e,t,s){let r="";const a=e.x.translate/t.x,i=e.y.translate/t.y,o=s?.z||0;if((a||i||o)&&(r=`translate3d(${a}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),s){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:m,skewX:g,skewY:f}=s;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),m&&(r+=`rotateY(${m}deg) `),g&&(r+=`skewX(${g}deg) `),f&&(r+=`skewY(${f}deg) `)}const c=e.x.scale*t.x,l=e.y.scale*t.y;return(c!==1||l!==1)&&(r+=`scale(${c}, ${l})`),r||"none"}const Ei=["","X","Y","Z"],Kk=1e3;let Hk=0;function Ri(e,t,s,r){const{latestValues:a}=t;a[e]&&(s[e]=a[e],t.setStaticValue(e,0),r&&(r[e]=0))}function $f(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const s=Tf(t);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:a,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(s,"transform",Re,!(a||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&$f(r)}function Bf({attachResizeListener:e,defaultParent:t,measureScroll:s,checkIsScrollRoot:r,resetTransform:a}){return class{constructor(o={},c=t?.()){this.id=Hk++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Xk),this.nodes.forEach(e_),this.nodes.forEach(t_),this.nodes.forEach(Yk)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Mk)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new mc),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const l=this.eventHandlers.get(o);l&&l.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=sf(o)&&!B1(o),this.instance=o;const{layoutId:c,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||c)&&(this.isLayoutDirty=!0),e){let d,h=0;const m=()=>this.root.updateBlockedByResize=!1;Re.read(()=>{h=window.innerWidth}),e(o,()=>{const g=window.innerWidth;g!==h&&(h=g,this.root.updateBlockedByResize=!0,d&&d(),d=Ok(m,250),fa.hasAnimatedSinceResize&&(fa.hasAnimatedSinceResize=!1,this.nodes.forEach(fu)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&u&&(c||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const f=this.options.transition||u.getDefaultTransition()||i_,{onLayoutAnimationStart:x,onLayoutAnimationComplete:y}=u.getProps(),v=!this.targetLayout||!If(this.targetLayout,g),w=!h&&m;if(this.options.layoutRoot||this.resumeFrom||w||h&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const j={...Tc(f,"layout"),onPlay:x,onComplete:y};(u.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j),this.setAnimationOrigin(d,w)}else h||fu(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Fs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(s_),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&$f(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:c,layout:l}=this.options;if(c===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(hu);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(mu);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Jk),this.nodes.forEach(Qk),this.nodes.forEach(Zk)):this.nodes.forEach(mu),this.clearAllSnapshots();const c=mt.now();Je.delta=xs(0,1e3/60,c-Je.timestamp),Je.timestamp=c,Je.isProcessing=!0,bi.update.process(Je),bi.preRender.process(Je),bi.render.process(Je),Je.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Cc.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Gk),this.sharedNodes.forEach(r_)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Re.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Re.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ct(this.snapshot.measuredBox.x)&&!ct(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Le(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!Uf(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&this.instance&&(c||qs(this.latestValues)||d)&&(a(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let l=this.removeElementScroll(c);return o&&(l=this.removeTransform(l)),o_(l),{animationId:this.root.animationId,measuredBox:c,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Le();const c=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(c_))){const{scroll:u}=this.root;u&&(vr(c.x,u.offset.x),vr(c.y,u.offset.y))}return c}removeElementScroll(o){const c=Le();if(Tt(c,o),this.scroll?.wasRoot)return c;for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:d,options:h}=u;u!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&Tt(c,o),vr(c.x,d.offset.x),vr(c.y,d.offset.y))}return c}applyTransform(o,c=!1){const l=Le();Tt(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!c&&d.options.layoutScroll&&d.scroll&&d!==d.root&&br(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),qs(d.latestValues)&&br(l,d.latestValues)}return qs(this.latestValues)&&br(l,this.latestValues),l}removeTransform(o){const c=Le();Tt(c,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!qs(u.latestValues))continue;ko(u.latestValues)&&u.updateSnapshot();const d=Le(),h=u.measurePageBox();Tt(d,h),iu(c,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return qs(this.latestValues)&&iu(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Je.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==c;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=Je.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Le(),this.relativeTargetOrigin=Le(),mn(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Tt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Le(),this.targetWithTransforms=Le()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),fk(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Tt(this.target,this.layout.layoutBox),bf(this.target,this.targetDelta)):Tt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Le(),this.relativeTargetOrigin=Le(),mn(this.relativeTargetOrigin,this.target,m.target),Tt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||ko(this.parent.latestValues)||vf(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),c=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(l=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Je.timestamp&&(l=!1),l)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Tt(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;TN(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Le());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ru(this.prevProjectionDelta.x,this.projectionDelta.x),ru(this.prevProjectionDelta.y,this.projectionDelta.y)),hn(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!uu(this.projectionDelta.x,this.prevProjectionDelta.x)||!uu(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=wr(),this.projectionDelta=wr(),this.projectionDeltaWithTransform=wr()}setAnimationOrigin(o,c=!1){const l=this.snapshot,u=l?l.latestValues:{},d={...this.latestValues},h=wr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const m=Le(),g=l?l.source:void 0,f=this.layout?this.layout.source:void 0,x=g!==f,y=this.getStack(),v=!y||y.members.length<=1,w=!!(x&&!v&&this.options.crossfade===!0&&!this.path.some(a_));this.animationProgress=0;let j;this.mixTargetDelta=N=>{const T=N/1e3;pu(h.x,o.x,T),pu(h.y,o.y,T),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(mn(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),n_(this.relativeTarget,this.relativeTargetOrigin,m,T),j&&qk(this.relativeTarget,j)&&(this.isProjectionDirty=!1),j||(j=Le()),Tt(j,this.relativeTarget)),x&&(this.animationValues=d,Lk(d,u,this.latestValues,T,w,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Fs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Re.update(()=>{fa.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Mr(0)),this.currentAnimation=Rk(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Kk),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:l,layout:u,latestValues:d}=o;if(!(!c||!l||!u)){if(this!==o&&this.layout&&u&&qf(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Le();const h=ct(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const m=ct(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}Tt(c,l),br(c,d),hn(this.projectionDeltaWithTransform,this.layoutCorrected,c,d)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Wk),this.sharedNodes.get(o).add(c);const u=c.options.initialPromotionConfig;c.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(c=!0),!c)return;const u={};l.z&&Ri("z",o,u,this.animationValues);for(let d=0;d<Ei.length;d++)Ri(`rotate${Ei[d]}`,o,u,this.animationValues),Ri(`skew${Ei[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}applyProjectionStyles(o,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=ma(c?.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=ma(c?.pointerEvents)||""),this.hasProjected&&!qs(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=zk(this.projectionDeltaWithTransform,this.treeScale,d);l&&(h=l(d,h)),o.transform=h;const{x:m,y:g}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,u.animationValues?o.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const f in kn){if(d[f]===void 0)continue;const{correct:x,applyTo:y,isCSSVariable:v}=kn[f],w=h==="none"?d[f]:x(d[f],u);if(y){const j=y.length;for(let N=0;N<j;N++)o[y[N]]=w}else v?this.options.visualElement.renderState.vars[f]=w:o[f]=w}this.options.layoutId&&(o.pointerEvents=u===this?ma(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(hu),this.root.sharedNodes.clear()}}}function Qk(e){e.updateLayout()}function Zk(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:r}=e.layout,{animationType:a}=e.options,i=t.source!==e.layout.source;a==="size"?At(d=>{const h=i?t.measuredBox[d]:t.layoutBox[d],m=ct(h);h.min=s[d].min,h.max=h.min+m}):qf(a,t.layoutBox,s)&&At(d=>{const h=i?t.measuredBox[d]:t.layoutBox[d],m=ct(s[d]);h.max=h.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+m)});const o=wr();hn(o,s,t.layoutBox);const c=wr();i?hn(c,e.applyTransform(r,!0),t.measuredBox):hn(c,s,t.layoutBox);const l=!Uf(o);let u=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:m}=d;if(h&&m){const g=Le();mn(g,t.layoutBox,h.layoutBox);const f=Le();mn(f,s,m.layoutBox),If(g,f)||(u=!0),d.options.layoutRoot&&(e.relativeTarget=f,e.relativeTargetOrigin=g,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:t,delta:c,layoutDelta:o,hasLayoutChanged:l,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function Xk(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Yk(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Gk(e){e.clearSnapshot()}function hu(e){e.clearMeasurements()}function mu(e){e.isLayoutDirty=!1}function Jk(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function fu(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function e_(e){e.resolveTargetDelta()}function t_(e){e.calcProjection()}function s_(e){e.resetSkewAndRotation()}function r_(e){e.removeLeadSnapshot()}function pu(e,t,s){e.translate=De(t.translate,0,s),e.scale=De(t.scale,1,s),e.origin=t.origin,e.originPoint=t.originPoint}function gu(e,t,s,r){e.min=De(t.min,s.min,r),e.max=De(t.max,s.max,r)}function n_(e,t,s,r){gu(e.x,t.x,s.x,r),gu(e.y,t.y,s.y,r)}function a_(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const i_={duration:.45,ease:[.4,0,.1,1]},xu=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),yu=xu("applewebkit/")&&!xu("chrome/")?Math.round:Mt;function vu(e){e.min=yu(e.min),e.max=yu(e.max)}function o_(e){vu(e.x),vu(e.y)}function qf(e,t,s){return e==="position"||e==="preserve-aspect"&&!mk(du(t),du(s),.2)}function c_(e){return e!==e.root&&e.scroll?.wasRoot}const l_=Bf({attachResizeListener:(e,t)=>_n(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Di={current:void 0},Wf=Bf({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Di.current){const e=new l_({});e.mount(window),e.setOptions({layoutScroll:!0}),Di.current=e}return Di.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),d_={pan:{Feature:Ck},drag:{Feature:Sk,ProjectionNode:Wf,MeasureLayout:Ff}};function bu(e,t,s){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",s==="Start");const a="onHover"+s,i=r[a];i&&Re.postRender(()=>i(t,Vn(t)))}class u_ extends Us{mount(){const{current:t}=this.node;t&&(this.unmount=L1(t,(s,r)=>(bu(this.node,r,"Start"),a=>bu(this.node,a,"End"))))}unmount(){}}class h_ extends Us{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=On(_n(this.node.current,"focus",()=>this.onFocus()),_n(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function wu(e,t,s){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",s==="Start");const a="onTap"+(s==="End"?"":s),i=r[a];i&&Re.postRender(()=>i(t,Vn(t)))}class m_ extends Us{mount(){const{current:t}=this.node;t&&(this.unmount=$1(t,(s,r)=>(wu(this.node,r,"Start"),(a,{success:i})=>wu(this.node,a,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Eo=new WeakMap,Mi=new WeakMap,f_=e=>{const t=Eo.get(e.target);t&&t(e)},p_=e=>{e.forEach(f_)};function g_({root:e,...t}){const s=e||document;Mi.has(s)||Mi.set(s,{});const r=Mi.get(s),a=JSON.stringify(t);return r[a]||(r[a]=new IntersectionObserver(p_,{root:e,...t})),r[a]}function x_(e,t,s){const r=g_(t);return Eo.set(e,s),r.observe(e),()=>{Eo.delete(e),r.unobserve(e)}}const y_={some:0,all:1};class v_ extends Us{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:s,margin:r,amount:a="some",once:i}=t,o={root:s?s.current:void 0,rootMargin:r,threshold:typeof a=="number"?a:y_[a]},c=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),m=u?d:h;m&&m(l)};return x_(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:s}=this.node;["amount","margin","root"].some(b_(t,s))&&this.startObserver()}unmount(){}}function b_({viewport:e={}},{viewport:t={}}={}){return s=>e[s]!==t[s]}const w_={inView:{Feature:v_},tap:{Feature:m_},focus:{Feature:h_},hover:{Feature:u_}},j_={layout:{ProjectionNode:Wf,MeasureLayout:Ff}},N_={...ok,...w_,...d_,...j_},zf=NN(N_,FN),me=({children:e,className:t})=>n.jsx(zf.div,{className:Pe("rounded-lg border bg-card text-card-foreground shadow-sm",t),whileHover:{y:-2,transition:{duration:.2,ease:"easeInOut"}},children:e}),Xe=({children:e,className:t,...s})=>n.jsx("div",{className:Pe("flex flex-col space-y-1.5 p-6",t),...s,children:e}),Ye=({children:e,className:t,...s})=>n.jsx("h3",{className:Pe("text-2xl font-semibold leading-none tracking-tight",t),...s,children:e}),be=({children:e,className:t,...s})=>n.jsx("div",{className:Pe("p-6 pt-0",t),...s,children:e}),ju={whileHover:{scale:1.02,transition:{duration:.2,ease:"easeInOut"}}},Nu={whileTap:{scale:.98,transition:{duration:.1,ease:"easeInOut"}}},ku={whileFocus:{scale:1.01,transition:{duration:.15,ease:"easeInOut"}}},Y=({variant:e="default",size:t="default",className:s,children:r,...a})=>{const i="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",o={default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},c={default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"};return n.jsx(zf.button,{...a,className:Pe(i,o[e],c[t],s),whileHover:{...ju.whileHover,transition:{...ju.whileHover.transition,ease:[.42,0,.58,1]}},whileTap:{...Nu.whileTap,transition:{...Nu.whileTap.transition,ease:[.42,0,.58,1]}},whileFocus:{...ku.whileFocus,transition:{...ku.whileFocus.transition,ease:[.42,0,.58,1]}},transition:{duration:.2,ease:[.42,0,.58,1]},...a,children:r})},Kf={getSummary:async()=>(await $.get("/api/v1/admin/dashboard/summary")).data,getCharts:async()=>(await $.get("/api/v1/admin/dashboard/charts")).data,getActivity:async()=>(await $.get("/api/v1/admin/dashboard/activity")).data,getExport:async()=>(await $.get("/api/v1/admin/dashboard/export")).data},jr={all:["admin","dashboard"],summary:()=>[...jr.all,"summary"],charts:()=>[...jr.all,"charts"],activity:()=>[...jr.all,"activity"],export:()=>[...jr.all,"export"]},k_=()=>Ce({queryKey:jr.summary(),queryFn:()=>Kf.getSummary(),staleTime:6e4,retry:1}),__=()=>Ce({queryKey:jr.export(),queryFn:()=>Kf.getExport(),staleTime:3e5,retry:1});function T_(){const e=Vs(),{data:t,isLoading:s,error:r}=k_(),{data:a}=__(),i=t?.data,o=a?.data?.export_url,c=()=>{o?W("Export functionality coming soon"):W.error("Export URL not available")},l=u=>{switch(u){case"users":e("/admin/users");break;case"projects":e("/admin/projects");break;case"tenants":e("/admin/tenants");break;case"settings":e("/admin/settings");break;default:W(`${u} functionality coming soon`)}};return s?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),n.jsx("p",{className:"text-gray-600",children:"System overview and quick actions"})]}),n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"text-gray-500",children:"Loading dashboard..."})})]}):r?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),n.jsx("p",{className:"text-gray-600",children:"System overview and quick actions"})]}),n.jsx(me,{children:n.jsx(be,{className:"text-center py-12",children:n.jsxs("div",{className:"text-red-500",children:[n.jsx("h3",{className:"text-lg font-medium mb-2",children:"Failed to load dashboard"}),n.jsx("p",{className:"text-gray-600",children:"There was an error loading the dashboard data. Please try again."})]})})})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),n.jsx("p",{className:"text-gray-600",children:"System overview and quick actions"})]}),n.jsxs(Y,{onClick:c,children:[n.jsx(Bh,{className:"h-4 w-4 mr-2"}),"Export"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsxs(me,{children:[n.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ye,{className:"text-sm font-medium",children:"Total Users"}),n.jsx(Ta,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(be,{children:[n.jsx("div",{className:"text-2xl font-bold",children:i?.total_users||0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all tenants"})]})]}),n.jsxs(me,{children:[n.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ye,{className:"text-sm font-medium",children:"Total Projects"}),n.jsx(gn,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(be,{children:[n.jsx("div",{className:"text-2xl font-bold",children:i?.total_projects||0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"System-wide"})]})]}),n.jsxs(me,{children:[n.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ye,{className:"text-sm font-medium",children:"Active Tenants"}),n.jsx(_r,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(be,{children:[n.jsx("div",{className:"text-2xl font-bold",children:i?.active_tenants||0}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["of ",i?.total_tenants||0," total"]})]})]}),n.jsxs(me,{children:[n.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ye,{className:"text-sm font-medium",children:"Active Sessions"}),n.jsx(j0,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(be,{children:[n.jsx("div",{className:"text-2xl font-bold",children:i?.active_sessions||0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently online"})]})]})]}),n.jsxs(me,{children:[n.jsx(Xe,{children:n.jsx(Ye,{children:"Quick Actions"})}),n.jsx(be,{children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs(Y,{variant:"outline",className:"h-20 flex flex-col items-center justify-center",onClick:()=>l("users"),children:[n.jsx(Ta,{className:"h-6 w-6 mb-2"}),"Manage Users"]}),n.jsxs(Y,{variant:"outline",className:"h-20 flex flex-col items-center justify-center",onClick:()=>l("tenants"),children:[n.jsx(_r,{className:"h-6 w-6 mb-2"}),"Manage Tenants"]}),n.jsxs(Y,{variant:"outline",className:"h-20 flex flex-col items-center justify-center",onClick:()=>l("projects"),children:[n.jsx(gn,{className:"h-6 w-6 mb-2"}),"View Projects"]}),n.jsxs(Y,{variant:"outline",className:"h-20 flex flex-col items-center justify-center",onClick:()=>l("settings"),children:[n.jsx($h,{className:"h-6 w-6 mb-2"}),"Settings"]})]})})]})]})}const It=({className:e,type:t,...s})=>n.jsx("input",{type:t,className:Pe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...s}),wt=({variant:e="default",className:t,children:s,...r})=>{const a={default:"bg-primary text-primary-foreground hover:bg-primary/80",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground border border-input"};return n.jsx("div",{className:Pe("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",a[e],t),...r,children:s})},Uc={getUsers:async(e={})=>{const t=new URLSearchParams;return e.search&&t.append("search",e.search),e.tenant_id&&t.append("tenant_id",e.tenant_id.toString()),e.role_id&&t.append("role_id",e.role_id.toString()),e.status&&t.append("status",e.status),e.page&&t.append("page",e.page.toString()),e.per_page&&t.append("per_page",e.per_page.toString()),(await $.get(`/api/v1/admin/users?${t.toString()}`)).data},getUser:async e=>(await $.get(`/api/v1/admin/users/${e}`)).data,createUser:async e=>(await $.post("/api/v1/admin/users",e)).data,updateUser:async(e,t)=>(await $.put(`/api/v1/admin/users/${e}`,t)).data,deleteUser:async e=>{await $.delete(`/api/v1/admin/users/${e}`)},bulkUpdateStatus:async(e,t)=>{await $.post("/api/v1/admin/users/bulk-update-status",{user_ids:e,status:t})},bulkDelete:async e=>{await $.post("/api/v1/admin/users/bulk-delete",{user_ids:e})}},Zs={all:["admin","users"],lists:()=>[...Zs.all,"list"],list:e=>[...Zs.lists(),e],details:()=>[...Zs.all,"detail"],detail:e=>[...Zs.details(),e]},S_=(e={})=>Ce({queryKey:Zs.list(e),queryFn:()=>Uc.getUsers(e),staleTime:3e4,retry:1}),C_=()=>{const e=fe();return ke({mutationFn:t=>Uc.deleteUser(t),onSuccess:()=>{e.invalidateQueries({queryKey:Zs.lists()})}})},A_=()=>{const e=fe();return ke({mutationFn:({userIds:t,status:s})=>Uc.bulkUpdateStatus(t,s),onSuccess:()=>{e.invalidateQueries({queryKey:Zs.lists()})}})};function P_(){const[e,t]=p.useState({page:1,per_page:10}),[s,r]=p.useState([]),{data:a,isLoading:i,error:o}=S_(e),c=C_(),l=A_(),u=a?.data||[],d=a?.meta,h=v=>{t(w=>({...w,search:v,page:1}))},m=v=>{t(w=>({...w,status:v==="all"?void 0:v,page:1}))},g=async v=>{if(window.confirm("Are you sure you want to delete this user?"))try{await c.mutateAsync(v),W.success("User deleted successfully")}catch{W.error("Failed to delete user")}},f=async v=>{if(s.length!==0)try{await l.mutateAsync({userIds:s,status:v}),W.success(`${s.length} users have been ${v}`),r([])}catch{W.error("Failed to update users")}},x=v=>{r(w=>w.includes(v)?w.filter(j=>j!==v):[...w,v])},y=()=>{s.length===u.length?r([]):r(u.map(v=>v.id))};return i?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex justify-between items-center",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),n.jsx("p",{className:"text-gray-600",children:"Manage system users and their permissions"})]})}),n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"text-gray-500",children:"Loading users..."})})]}):o?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex justify-between items-center",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),n.jsx("p",{className:"text-gray-600",children:"Manage system users and their permissions"})]})}),n.jsx(me,{children:n.jsx(be,{className:"text-center py-12",children:n.jsxs("div",{className:"text-red-500",children:[n.jsx("h3",{className:"text-lg font-medium mb-2",children:"Failed to load users"}),n.jsx("p",{className:"text-gray-600",children:"There was an error loading the users. Please try again."})]})})})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),n.jsx("p",{className:"text-gray-600",children:"Manage system users and their permissions"})]}),n.jsxs(Y,{children:[n.jsx(Ur,{className:"h-4 w-4 mr-2"}),"Add User"]})]}),n.jsxs(me,{children:[n.jsx(Xe,{children:n.jsx(Ye,{children:"Filters"})}),n.jsx(be,{children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Search"}),n.jsxs("div",{className:"relative",children:[n.jsx(Go,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx(It,{placeholder:"Search users...",value:e.search||"",onChange:v=>h(v.target.value),className:"pl-10"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Status"}),n.jsxs("select",{value:e.status||"all",onChange:v=>m(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive"}),n.jsx("option",{value:"suspended",children:"Suspended"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Per Page"}),n.jsxs("select",{value:e.per_page||10,onChange:v=>t(w=>({...w,per_page:parseInt(v.target.value),page:1})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:10,children:"10 per page"}),n.jsx("option",{value:25,children:"25 per page"}),n.jsx("option",{value:50,children:"50 per page"})]})]})]})})]}),n.jsxs(me,{children:[n.jsx(Xe,{children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs(Ye,{children:["Users (",d?.total||0,")"]}),s.length>0&&n.jsxs("div",{className:"flex space-x-2",role:"region","aria-label":"Bulk actions",children:[n.jsx(Y,{variant:"outline",size:"sm",onClick:()=>f("active"),disabled:l.isPending,"aria-label":`Activate ${s.length} selected users`,children:"Activate Selected"}),n.jsx(Y,{variant:"outline",size:"sm",onClick:()=>f("inactive"),disabled:l.isPending,"aria-label":`Deactivate ${s.length} selected users`,children:"Deactivate Selected"}),n.jsx(Y,{variant:"outline",size:"sm",onClick:()=>f("suspended"),disabled:l.isPending,"aria-label":`Suspend ${s.length} selected users`,children:"Suspend Selected"})]})]})}),n.jsxs(be,{children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",role:"table","aria-label":"Users management table",children:[n.jsx("caption",{className:"sr-only",children:"Users management table with bulk selection and actions"}),n.jsx("thead",{children:n.jsxs("tr",{className:"border-b",children:[n.jsxs("th",{className:"text-left py-3 px-4",scope:"col",children:[n.jsx("input",{type:"checkbox",checked:s.length===u.length&&u.length>0,onChange:y,className:"rounded border-gray-300","aria-label":"Select all users","aria-describedby":"select-all-help"}),n.jsx("span",{id:"select-all-help",className:"sr-only",children:"Select or deselect all users in the table"})]}),n.jsx("th",{className:"text-left py-3 px-4",scope:"col",children:"Name"}),n.jsx("th",{className:"text-left py-3 px-4",scope:"col",children:"Email"}),n.jsx("th",{className:"text-left py-3 px-4",scope:"col",children:"Tenant"}),n.jsx("th",{className:"text-left py-3 px-4",scope:"col",children:"Roles"}),n.jsx("th",{className:"text-left py-3 px-4",scope:"col",children:"Status"}),n.jsx("th",{className:"text-left py-3 px-4",scope:"col",children:"Last Login"}),n.jsx("th",{className:"text-left py-3 px-4",scope:"col",children:"Actions"})]})}),n.jsx("tbody",{children:u.map(v=>n.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[n.jsxs("td",{className:"py-3 px-4",children:[n.jsx("input",{type:"checkbox",checked:s.includes(v.id),onChange:()=>x(v.id),className:"rounded border-gray-300","aria-label":`Select user ${v.name}`,"aria-describedby":`user-${v.id}-help`}),n.jsxs("span",{id:`user-${v.id}-help`,className:"sr-only",children:["Select or deselect user ",v.name]})]}),n.jsx("td",{className:"py-3 px-4 font-medium",children:v.name}),n.jsx("td",{className:"py-3 px-4 text-gray-600",children:v.email}),n.jsx("td",{className:"py-3 px-4",children:v.tenant_name}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"flex flex-wrap gap-1",children:v.roles.map(w=>n.jsx(wt,{variant:"secondary",className:"text-xs",children:w.name},w.id))})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx(wt,{variant:v.status==="active"?"default":"destructive",children:v.status})}),n.jsx("td",{className:"py-3 px-4 text-gray-600",children:v.last_login_at?new Date(v.last_login_at).toLocaleDateString():"Never"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Y,{variant:"ghost",size:"sm","aria-label":`View user ${v.name}`,children:n.jsx(Yo,{className:"h-4 w-4"})}),n.jsx(Y,{variant:"ghost",size:"sm","aria-label":`Edit user ${v.name}`,children:n.jsx(En,{className:"h-4 w-4"})}),n.jsx(Y,{variant:"ghost",size:"sm",className:"text-red-600",onClick:()=>g(v.id),disabled:c.isPending,"aria-label":`Delete user ${v.name}`,children:n.jsx(Rn,{className:"h-4 w-4"})})]})})]},v.id))})]})}),d&&d.last_page>1&&n.jsxs("nav",{className:"flex justify-between items-center mt-4",role:"navigation","aria-label":"Users pagination",children:[n.jsxs("div",{className:"text-sm text-gray-600","aria-live":"polite",children:["Showing ",(d.current_page-1)*d.per_page+1," to ",Math.min(d.current_page*d.per_page,d.total)," of ",d.total," results"]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Y,{variant:"outline",size:"sm",onClick:()=>t(v=>({...v,page:v.page-1})),disabled:d.current_page<=1,"aria-label":`Go to page ${d.current_page-1}`,children:"Previous"}),n.jsx(Y,{variant:"outline",size:"sm",onClick:()=>t(v=>({...v,page:v.page+1})),disabled:d.current_page>=d.last_page,"aria-label":`Go to page ${d.current_page+1}`,children:"Next"})]})]})]})]}),u.length===0&&!i&&n.jsx(me,{children:n.jsx(be,{className:"text-center py-12",children:n.jsxs("div",{className:"text-gray-500",children:[n.jsx(Ta,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("h3",{className:"text-lg font-medium mb-2",children:"No users found"}),n.jsx("p",{className:"text-gray-600",children:"Try adjusting your filters or add a new user."})]})})})]})}const Ic={getRoles:async(e={})=>{const t=new URLSearchParams;return e.search&&t.append("search",e.search),e.page&&t.append("page",e.page.toString()),e.per_page&&t.append("per_page",e.per_page.toString()),(await $.get(`/api/v1/admin/roles?${t.toString()}`)).data},getRole:async e=>(await $.get(`/api/v1/admin/roles/${e}`)).data,createRole:async e=>(await $.post("/api/v1/admin/roles",e)).data,updateRole:async(e,t)=>(await $.put(`/api/v1/admin/roles/${e}`,t)).data,deleteRole:async e=>{await $.delete(`/api/v1/admin/roles/${e}`)},getPermissions:async()=>(await $.get("/api/v1/admin/permissions")).data,assignRole:async e=>{await $.post("/api/v1/admin/role-assignments",e)},bulkAssignRole:async e=>{await $.post("/api/v1/admin/role-assignments/bulk",e)},removeRole:async(e,t)=>{await $.delete(`/api/v1/admin/users/${e}/roles/${t}`)}},Ss={all:["admin","roles"],lists:()=>[...Ss.all,"list"],list:e=>[...Ss.lists(),e],details:()=>[...Ss.all,"detail"],detail:e=>[...Ss.details(),e],permissions:()=>[...Ss.all,"permissions"]},E_=(e={})=>Ce({queryKey:Ss.list(e),queryFn:()=>Ic.getRoles(e),staleTime:3e4,retry:1}),R_=()=>Ce({queryKey:Ss.permissions(),queryFn:()=>Ic.getPermissions(),staleTime:3e5,retry:1}),D_=()=>{const e=fe();return ke({mutationFn:t=>Ic.deleteRole(t),onSuccess:()=>{e.invalidateQueries({queryKey:Ss.lists()})}})};function M_(){const[e,t]=p.useState({page:1,per_page:10}),[s,r]=p.useState([]),{data:a,isLoading:i,error:o}=E_(e),{data:c}=R_(),l=D_(),u=a?.data||[],d=a?.meta,h=c?.data||[],m=y=>{t(v=>({...v,search:y,page:1}))},g=async y=>{if(window.confirm("Are you sure you want to delete this role?"))try{await l.mutateAsync(y),W.success("Role deleted successfully")}catch{W.error("Failed to delete role")}},f=y=>{r(v=>v.includes(y)?v.filter(w=>w!==y):[...v,y])},x=()=>{s.length===u.length?r([]):r(u.map(y=>y.id))};return i?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex justify-between items-center",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Roles & Permissions"}),n.jsx("p",{className:"text-gray-600",children:"Manage system roles and their permissions"})]})}),n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"text-gray-500",children:"Loading roles..."})})]}):o?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex justify-between items-center",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Roles & Permissions"}),n.jsx("p",{className:"text-gray-600",children:"Manage system roles and their permissions"})]})}),n.jsx(me,{children:n.jsx(be,{className:"text-center py-12",children:n.jsxs("div",{className:"text-red-500",children:[n.jsx("h3",{className:"text-lg font-medium mb-2",children:"Failed to load roles"}),n.jsx("p",{className:"text-gray-600",children:"There was an error loading the roles. Please try again."})]})})})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Roles & Permissions"}),n.jsx("p",{className:"text-gray-600",children:"Manage system roles and their permissions"})]}),n.jsxs(Y,{children:[n.jsx(Ur,{className:"h-4 w-4 mr-2"}),"Create Role"]})]}),n.jsx(me,{children:n.jsx(be,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex-1",children:n.jsx(It,{type:"text",placeholder:"Search roles by name or description...",onChange:y=>m(y.target.value),className:"w-full"})}),n.jsxs("div",{className:"ml-4 flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:s.length===u.length&&u.length>0,onChange:x,className:"rounded border-gray-300"}),n.jsx("span",{className:"text-sm text-gray-600",children:"Select All"})]})]})})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(y=>n.jsxs(me,{className:"hover:shadow-lg transition-shadow",children:[n.jsxs(Xe,{children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ml,{className:"h-5 w-5 text-blue-600"}),n.jsx(Ye,{className:"text-lg",children:y.name})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(wt,{variant:"secondary",className:"text-xs",children:[n.jsx(Ta,{className:"h-3 w-3 mr-1"}),y.user_count," users"]}),n.jsx("input",{type:"checkbox",checked:s.includes(y.id),onChange:()=>f(y.id),className:"rounded border-gray-300"})]})]}),n.jsx("p",{className:"text-sm text-gray-600",children:y.description})]}),n.jsx(be,{children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Permissions:"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:y.permissions.length>3?n.jsxs(n.Fragment,{children:[y.permissions.slice(0,3).map((v,w)=>n.jsx(wt,{variant:"outline",className:"text-xs",children:v.code},w)),n.jsxs(wt,{variant:"outline",className:"text-xs",children:["+",y.permissions.length-3," more"]})]}):y.permissions.map((v,w)=>n.jsx(wt,{variant:"outline",className:"text-xs",children:v.code},w))})]}),n.jsxs("div",{className:"flex space-x-2 pt-2",children:[n.jsxs(Y,{variant:"outline",size:"sm",className:"flex-1",children:[n.jsx(En,{className:"h-4 w-4 mr-1"}),"Edit"]}),n.jsx(Y,{variant:"outline",size:"sm",className:"text-red-600",onClick:()=>g(y.id),disabled:l.isPending,children:n.jsx(Rn,{className:"h-4 w-4"})})]})]})})]},y.id))}),d&&d.last_page>1&&n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(d.current_page-1)*d.per_page+1," to ",Math.min(d.current_page*d.per_page,d.total)," of ",d.total," results"]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Y,{variant:"outline",size:"sm",onClick:()=>t(y=>({...y,page:y.page-1})),disabled:d.current_page<=1,children:"Previous"}),n.jsx(Y,{variant:"outline",size:"sm",onClick:()=>t(y=>({...y,page:y.page+1})),disabled:d.current_page>=d.last_page,children:"Next"})]})]}),u.length===0&&!i&&n.jsx(me,{children:n.jsx(be,{className:"text-center py-12",children:n.jsxs("div",{className:"text-gray-500",children:[n.jsx(Ml,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("h3",{className:"text-lg font-medium mb-2",children:"No roles found"}),n.jsx("p",{className:"text-gray-600",children:"Try adjusting your filters or create a new role."})]})})}),n.jsxs(me,{children:[n.jsx(Xe,{children:n.jsx(Ye,{children:"System Permissions Overview"})}),n.jsx(be,{children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.length>0?Object.entries(h.reduce((y,v)=>{const w=v.resource;return y[w]||(y[w]=[]),y[w].push(v),y},{})).map(([y,v])=>n.jsxs("div",{children:[n.jsxs("h4",{className:"font-medium text-gray-900 mb-2 capitalize",children:[y.replace("_"," ")," Management"]}),n.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:v.map(w=>n.jsxs("li",{children:["• ",w.code]},w.id))})]},y)):n.jsx("div",{className:"col-span-full text-center text-gray-500 py-8",children:"No permissions available"})})})]})]})}const ti={getTenants:async(e={})=>{const t=new URLSearchParams;return e.search&&t.append("search",e.search),e.status&&t.append("status",e.status),e.plan&&t.append("plan",e.plan),e.page&&t.append("page",e.page.toString()),e.per_page&&t.append("per_page",e.per_page.toString()),(await $.get(`/api/v1/admin/tenants?${t.toString()}`)).data},getTenant:async e=>(await $.get(`/api/v1/admin/tenants/${e}`)).data,createTenant:async e=>(await $.post("/api/v1/admin/tenants",e)).data,updateTenant:async(e,t)=>(await $.put(`/api/v1/admin/tenants/${e}`,t)).data,deleteTenant:async e=>{await $.delete(`/api/v1/admin/tenants/${e}`)},getTenantStats:async e=>(await $.get(`/api/v1/admin/tenants/${e}/stats`)).data,suspendTenant:async(e,t)=>{await $.post(`/api/v1/admin/tenants/${e}/suspend`,{reason:t})},activateTenant:async e=>{await $.post(`/api/v1/admin/tenants/${e}/activate`)},bulkUpdateStatus:async(e,t)=>{await $.post("/api/v1/admin/tenants/bulk-update-status",{tenant_ids:e,status:t})},bulkDelete:async e=>{await $.post("/api/v1/admin/tenants/bulk-delete",{tenant_ids:e})},extendTrial:async(e,t)=>{await $.post(`/api/v1/admin/tenants/${e}/extend-trial`,{days:t})}},zt={all:["admin","tenants"],lists:()=>[...zt.all,"list"],list:e=>[...zt.lists(),e],details:()=>[...zt.all,"detail"],detail:e=>[...zt.details(),e],stats:e=>[...zt.detail(e),"stats"]},O_=(e={})=>Ce({queryKey:zt.list(e),queryFn:()=>ti.getTenants(e),staleTime:3e4,retry:1}),F_=()=>{const e=fe();return ke({mutationFn:t=>ti.deleteTenant(t),onSuccess:()=>{e.invalidateQueries({queryKey:zt.lists()})}})},L_=()=>{const e=fe();return ke({mutationFn:({id:t,reason:s})=>ti.suspendTenant(t,s),onSuccess:(t,{id:s})=>{e.invalidateQueries({queryKey:zt.detail(s)}),e.invalidateQueries({queryKey:zt.lists()})}})},V_=()=>{const e=fe();return ke({mutationFn:t=>ti.activateTenant(t),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:zt.detail(s)}),e.invalidateQueries({queryKey:zt.lists()})}})};function U_(){const[e,t]=p.useState({page:1,per_page:10}),{data:s,isLoading:r,error:a}=O_(e),i=F_(),o=L_(),c=V_(),l=s?.data||[],u=s?.meta,d=async f=>{if(window.confirm("Are you sure you want to delete this tenant? This action cannot be undone."))try{await i.mutateAsync(f),W.success("Tenant deleted successfully")}catch{W.error("Failed to delete tenant")}},h=async(f,x)=>{try{x==="active"?(await o.mutateAsync({id:f}),W.success("Tenant suspended successfully")):(await c.mutateAsync(f),W.success("Tenant activated successfully"))}catch{W.error("Failed to update tenant status")}};if(r)return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex justify-between items-center",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Tenant Management"}),n.jsx("p",{className:"text-gray-600",children:"Manage multi-tenant organizations"})]})}),n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"text-gray-500",children:"Loading tenants..."})})]});if(a)return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex justify-between items-center",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Tenant Management"}),n.jsx("p",{className:"text-gray-600",children:"Manage multi-tenant organizations"})]})}),n.jsx(me,{children:n.jsx(be,{className:"text-center py-12",children:n.jsxs("div",{className:"text-red-500",children:[n.jsx("h3",{className:"text-lg font-medium mb-2",children:"Failed to load tenants"}),n.jsx("p",{className:"text-gray-600",children:"There was an error loading the tenants. Please try again."})]})})})]});const m=f=>{switch(f){case"active":return"default";case"inactive":return"secondary";case"suspended":return"destructive";default:return"secondary"}},g=f=>{switch(f){case"active":return n.jsx(Rl,{className:"h-4 w-4 text-green-600"});case"inactive":return n.jsx(Kn,{className:"h-4 w-4 text-gray-400"});case"suspended":return n.jsx(Kn,{className:"h-4 w-4 text-red-600"});default:return n.jsx(Kn,{className:"h-4 w-4 text-gray-400"})}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Tenant Management"}),n.jsx("p",{className:"text-gray-600",children:"Manage multi-tenant organizations"})]}),n.jsxs(Y,{children:[n.jsx(Ur,{className:"h-4 w-4 mr-2"}),"Add Tenant"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[n.jsxs(me,{children:[n.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ye,{className:"text-sm font-medium",children:"Total Tenants"}),n.jsx(_r,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(be,{children:n.jsx("div",{className:"text-2xl font-bold",children:u?.total||0})})]}),n.jsxs(me,{children:[n.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ye,{className:"text-sm font-medium",children:"Active"}),n.jsx(Rl,{className:"h-4 w-4 text-green-600"})]}),n.jsx(be,{children:n.jsx("div",{className:"text-2xl font-bold",children:l.filter(f=>f.status==="active").length})})]}),n.jsxs(me,{children:[n.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ye,{className:"text-sm font-medium",children:"Suspended"}),n.jsx(Kn,{className:"h-4 w-4 text-red-600"})]}),n.jsx(be,{children:n.jsx("div",{className:"text-2xl font-bold",children:l.filter(f=>f.status==="suspended").length})})]}),n.jsxs(me,{children:[n.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ye,{className:"text-sm font-medium",children:"Total Users"}),n.jsx(_r,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(be,{children:n.jsx("div",{className:"text-2xl font-bold",children:l.reduce((f,x)=>f+x.user_count,0)})})]})]}),n.jsxs(me,{children:[n.jsx(Xe,{children:n.jsx(Ye,{children:"Tenants"})}),n.jsxs(be,{children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b",children:[n.jsx("th",{className:"text-left py-3 px-4",children:"Name"}),n.jsx("th",{className:"text-left py-3 px-4",children:"Domain"}),n.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),n.jsx("th",{className:"text-left py-3 px-4",children:"Plan"}),n.jsx("th",{className:"text-left py-3 px-4",children:"Users"}),n.jsx("th",{className:"text-left py-3 px-4",children:"Created"}),n.jsx("th",{className:"text-left py-3 px-4",children:"Actions"})]})}),n.jsx("tbody",{children:l.map(f=>n.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[n.jsx("td",{className:"py-3 px-4 font-medium",children:f.name}),n.jsx("td",{className:"py-3 px-4 text-gray-600",children:f.domain}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[g(f.status),n.jsx(wt,{variant:m(f.status),children:f.status})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx(wt,{variant:"outline",children:f.plan})}),n.jsx("td",{className:"py-3 px-4",children:f.user_count}),n.jsx("td",{className:"py-3 px-4 text-gray-600",children:new Date(f.created_at).toLocaleDateString()}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>h(f.id,f.status),disabled:o.isPending||c.isPending,children:f.status==="active"?"Suspend":"Activate"}),n.jsx(Y,{variant:"ghost",size:"sm",children:n.jsx(En,{className:"h-4 w-4"})}),n.jsx(Y,{variant:"ghost",size:"sm",className:"text-red-600",onClick:()=>d(f.id),disabled:i.isPending,children:n.jsx(Rn,{className:"h-4 w-4"})})]})})]},f.id))})]})}),u&&u.last_page>1&&n.jsxs("div",{className:"flex justify-between items-center mt-4",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(u.current_page-1)*u.per_page+1," to ",Math.min(u.current_page*u.per_page,u.total)," of ",u.total," results"]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Y,{variant:"outline",size:"sm",onClick:()=>t(f=>({...f,page:f.page-1})),disabled:u.current_page<=1,children:"Previous"}),n.jsx(Y,{variant:"outline",size:"sm",onClick:()=>t(f=>({...f,page:f.page+1})),disabled:u.current_page>=u.last_page,children:"Next"})]})]})]})]}),l.length===0&&!r&&n.jsx(me,{children:n.jsx(be,{className:"text-center py-12",children:n.jsxs("div",{className:"text-gray-500",children:[n.jsx(_r,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("h3",{className:"text-lg font-medium mb-2",children:"No tenants found"}),n.jsx("p",{className:"text-gray-600",children:"Try adjusting your filters or add a new tenant."})]})})})]})}const _u=({open:e,onOpenChange:t,children:s})=>(p.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),e?n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[n.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:()=>t?.(!1)}),n.jsx("div",{className:"relative z-50",children:s})]}):null),Tu=({className:e,children:t})=>n.jsx("div",{className:Pe("bg-white rounded-lg shadow-lg border border-gray-200 p-6 max-w-md w-full mx-4",e),onClick:s=>s.stopPropagation(),children:t}),Su=({children:e})=>n.jsx("div",{className:"mb-4",children:e}),Cu=({children:e})=>n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:e}),I_=({children:e})=>n.jsx(n.Fragment,{children:e}),St=({className:e,children:t,...s})=>n.jsx("label",{className:Pe("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...s,children:t}),Tn=({className:e,label:t,error:s,helperText:r,...a})=>n.jsxs("div",{className:"space-y-2",children:[t&&n.jsx("label",{className:"text-sm font-medium text-gray-700",children:t}),n.jsx("textarea",{className:Pe("min-h-[80px] w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:cursor-not-allowed disabled:opacity-50",s&&"border-red-500 focus:ring-red-500",e),...a}),s&&n.jsx("p",{className:"text-sm text-red-600",children:s}),r&&!s&&n.jsx("p",{className:"text-sm text-gray-500",children:r})]}),Un=Z.createContext({isOpen:!1,setIsOpen:()=>{}}),Gn=({value:e,onValueChange:t,children:s})=>{const[r,a]=p.useState(!1);return n.jsx(Un.Provider,{value:{value:e,onValueChange:t,isOpen:r,setIsOpen:a},children:n.jsx("div",{className:"relative",children:s})})},Jn=({className:e,children:t})=>{const{isOpen:s,setIsOpen:r}=Z.useContext(Un);return n.jsx("button",{type:"button",className:Pe("flex h-10 w-full items-center justify-between rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",e),onClick:()=>r(!s),children:t})},ea=({children:e})=>{const{isOpen:t}=Z.useContext(Un);return t?n.jsx("div",{className:"absolute z-50 mt-1 w-full rounded-md border border-gray-200 bg-white shadow-lg",children:n.jsx("div",{className:"py-1",children:e})}):null},Qe=({value:e,children:t})=>{const{onValueChange:s,setIsOpen:r}=Z.useContext(Un);return n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 focus:bg-gray-100 focus:outline-none",onClick:()=>{s?.(e),r(!1)},children:t})},ta=({placeholder:e})=>{const{value:t}=Z.useContext(Un);return n.jsx("span",{children:t||e})},In={getProjects:async(e={})=>{const t=new URLSearchParams;e.search&&t.append("search",e.search),e.status&&t.append("status",e.status),e.priority&&t.append("priority",e.priority),e.tenant_id&&t.append("tenant_id",e.tenant_id.toString()),e.created_by&&t.append("created_by",e.created_by.toString()),e.page&&t.append("page",e.page.toString()),e.per_page&&t.append("per_page",e.per_page.toString());const r=(await $.get(`/app/projects?${t.toString()}`)).data??{},a=r.meta??{},i=a.current_page??1,o=a.last_page??i;return{data:r.data??[],meta:{current_page:i,last_page:o,per_page:a.per_page??e.per_page??15,total:a.total??r.data?.length??0},links:r.links??{first:r.links?.first??"",last:r.links?.last??"",prev:i>1?String(i-1):void 0,next:i<o?String(i+1):void 0}}},getProject:async e=>(await $.get(`/app/projects/${e}`)).data,createProject:async e=>(await $.post("/app/projects",e)).data,updateProject:async(e,t)=>(await $.put(`/app/projects/${e}`,t)).data,deleteProject:async e=>{await $.delete(`/app/projects/${e}`)},getProjectStats:async e=>(await $.get(`/app/projects/${e}/stats`)).data,addTeamMember:async(e,t,s)=>{await $.post(`/app/projects/${e}/team-members`,{user_id:t,role:s})},removeTeamMember:async(e,t)=>{await $.delete(`/app/projects/${e}/team-members/${t}`)},exportProjects:async(e={})=>{const t=new URLSearchParams;return e.search&&t.append("search",e.search),e.status&&t.append("status",e.status),e.priority&&t.append("priority",e.priority),e.tenant_id&&t.append("tenant_id",e.tenant_id.toString()),e.created_by&&t.append("created_by",e.created_by.toString()),t.append("format","csv"),(await $.get(`/admin/csv/export/projects?${t.toString()}`,{responseType:"blob",headers:{Accept:"text/csv"}})).data}},ns={all:["projects"],lists:()=>[...ns.all,"list"],list:e=>[...ns.lists(),e],details:()=>[...ns.all,"detail"],detail:e=>[...ns.details(),e],stats:e=>[...ns.detail(e),"stats"]},$_=(e={})=>Ce({queryKey:ns.list(e),queryFn:()=>In.getProjects(e),staleTime:3e4,retry:1}),B_=()=>{const e=fe();return ke({mutationFn:t=>In.createProject(t),onSuccess:()=>{e.invalidateQueries({queryKey:ns.lists()})}})},q_=()=>{const e=fe();return ke({mutationFn:({id:t,projectData:s})=>In.updateProject(t,s),onSuccess:(t,{id:s})=>{e.invalidateQueries({queryKey:ns.detail(s)}),e.invalidateQueries({queryKey:ns.lists()})}})},W_=()=>{const e=fe();return ke({mutationFn:t=>In.deleteProject(t),onSuccess:()=>{e.invalidateQueries({queryKey:ns.lists()})}})},z_=()=>ke({mutationFn:(e={})=>In.exportProjects(e)});function K_(){const[e,t]=p.useState({page:1,per_page:12}),[s,r]=p.useState(!1),[a,i]=p.useState(!1),[o,c]=p.useState(null),[l,u]=p.useState({name:"",description:"",status:"planning",priority:"medium",start_date:new Date().toISOString().split("T")[0],end_date:new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0]}),[d,h]=p.useState({name:"",description:"",status:"planning",priority:"medium",start_date:"",end_date:""}),{data:m,isLoading:g,error:f}=$_(e),x=W_(),y=B_(),v=q_(),w=z_(),j=Array.isArray(m?.data)?m.data:[],N=m?.meta,T=S=>{t(E=>({...E,search:S,page:1}))},O=S=>{t(E=>({...E,status:S==="all"?void 0:S,page:1}))},D=S=>{t(E=>({...E,priority:S==="all"?void 0:S,page:1}))},k=async S=>{if(window.confirm("Are you sure you want to delete this project?"))try{await x.mutateAsync(S),W.success("Project deleted successfully")}catch{W.error("Failed to delete project")}},z=async S=>{S.preventDefault();try{await y.mutateAsync({...l,status:l.status,priority:l.priority}),W.success("Project created successfully"),r(!1),u({name:"",description:"",status:"planning",priority:"medium",start_date:new Date().toISOString().split("T")[0],end_date:new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0]})}catch{W.error("Failed to create project")}},ne=async S=>{if(S.preventDefault(),!!o)try{await v.mutateAsync({id:o.id,projectData:{...d,status:d.status,priority:d.priority}}),W.success("Project updated successfully"),i(!1),c(null)}catch{W.error("Failed to update project")}},ue=async()=>{try{const S=await w.mutateAsync(e),E=window.URL.createObjectURL(S),Q=document.createElement("a");Q.href=E,Q.download=`projects-export-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(Q),Q.click(),window.URL.revokeObjectURL(E),document.body.removeChild(Q),W.success("Projects exported successfully")}catch{W.error("Failed to export projects")}},te=S=>{c(S),h({name:S.name||"",description:S.description||"",status:S.status||"planning",priority:S.priority||"medium",start_date:S.start_date?new Date(S.start_date).toISOString().split("T")[0]:"",end_date:S.end_date?new Date(S.end_date).toISOString().split("T")[0]:""}),i(!0)};if(g)return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex justify-between items-center",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Projects"}),n.jsx("p",{className:"text-gray-600",children:"Manage your projects and track progress"})]})}),n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"text-gray-500",children:"Loading projects..."})})]});if(f)return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex justify-between items-center",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Projects"}),n.jsx("p",{className:"text-gray-600",children:"Manage your projects and track progress"})]})}),n.jsx(me,{children:n.jsx(be,{className:"text-center py-12",children:n.jsxs("div",{className:"text-red-500",children:[n.jsx("h3",{className:"text-lg font-medium mb-2",children:"Failed to load projects"}),n.jsx("p",{className:"text-gray-600",children:"There was an error loading the projects. Please try again."})]})})})]});const re=S=>{switch(S){case"active":return"default";case"planning":return"secondary";case"on_hold":return"destructive";case"completed":return"outline";case"cancelled":return"destructive";default:return"secondary"}},V=S=>{switch(S){case"urgent":return"destructive";case"high":return"default";case"medium":return"secondary";case"low":return"outline";default:return"secondary"}};return n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Projects"}),n.jsx("p",{className:"text-gray-600",children:"Manage your projects and track progress"})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(Y,{variant:"outline",onClick:ue,disabled:w.isPending,children:[n.jsx(da,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),n.jsxs(_u,{open:s,onOpenChange:r,children:[n.jsx(I_,{asChild:!0,children:n.jsxs(Y,{children:[n.jsx(Ur,{className:"h-4 w-4 mr-2"}),"New Project"]})}),n.jsxs(Tu,{className:"sm:max-w-[425px]",children:[n.jsx(Su,{children:n.jsx(Cu,{children:"Create New Project"})}),n.jsxs("form",{onSubmit:z,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(St,{htmlFor:"name",children:"Project Name"}),n.jsx(It,{id:"name",value:l.name,onChange:S=>u(E=>({...E,name:S.target.value})),placeholder:"Enter project name",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(St,{htmlFor:"description",children:"Description"}),n.jsx(Tn,{id:"description",value:l.description,onChange:S=>u(E=>({...E,description:S.target.value})),placeholder:"Enter project description",rows:3})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(St,{htmlFor:"status",children:"Status"}),n.jsxs(Gn,{value:l.status,onValueChange:S=>u(E=>({...E,status:S})),children:[n.jsx(Jn,{children:n.jsx(ta,{})}),n.jsxs(ea,{children:[n.jsx(Qe,{value:"planning",children:"Planning"}),n.jsx(Qe,{value:"active",children:"Active"}),n.jsx(Qe,{value:"on_hold",children:"On Hold"}),n.jsx(Qe,{value:"completed",children:"Completed"}),n.jsx(Qe,{value:"cancelled",children:"Cancelled"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(St,{htmlFor:"priority",children:"Priority"}),n.jsxs(Gn,{value:l.priority,onValueChange:S=>u(E=>({...E,priority:S})),children:[n.jsx(Jn,{children:n.jsx(ta,{})}),n.jsxs(ea,{children:[n.jsx(Qe,{value:"low",children:"Low"}),n.jsx(Qe,{value:"medium",children:"Medium"}),n.jsx(Qe,{value:"high",children:"High"}),n.jsx(Qe,{value:"urgent",children:"Urgent"})]})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(St,{htmlFor:"start_date",children:"Start Date"}),n.jsx(It,{id:"start_date",type:"date",value:l.start_date,onChange:S=>u(E=>({...E,start_date:S.target.value})),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(St,{htmlFor:"end_date",children:"End Date"}),n.jsx(It,{id:"end_date",type:"date",value:l.end_date,onChange:S=>u(E=>({...E,end_date:S.target.value})),required:!0})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(Y,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Cancel"}),n.jsx(Y,{type:"submit",disabled:y.isPending,children:y.isPending?"Creating...":"Create Project"})]})]})]})]})]}),n.jsx(_u,{open:a,onOpenChange:i,children:n.jsxs(Tu,{className:"sm:max-w-[425px]",children:[n.jsx(Su,{children:n.jsx(Cu,{children:"Edit Project"})}),n.jsxs("form",{onSubmit:ne,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(St,{htmlFor:"edit-name",children:"Project Name"}),n.jsx(It,{id:"edit-name",value:d.name,onChange:S=>h(E=>({...E,name:S.target.value})),placeholder:"Enter project name",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(St,{htmlFor:"edit-description",children:"Description"}),n.jsx(Tn,{id:"edit-description",value:d.description,onChange:S=>h(E=>({...E,description:S.target.value})),placeholder:"Enter project description",rows:3})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(St,{htmlFor:"edit-status",children:"Status"}),n.jsxs(Gn,{value:d.status,onValueChange:S=>h(E=>({...E,status:S})),children:[n.jsx(Jn,{children:n.jsx(ta,{})}),n.jsxs(ea,{children:[n.jsx(Qe,{value:"planning",children:"Planning"}),n.jsx(Qe,{value:"active",children:"Active"}),n.jsx(Qe,{value:"on_hold",children:"On Hold"}),n.jsx(Qe,{value:"completed",children:"Completed"}),n.jsx(Qe,{value:"cancelled",children:"Cancelled"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(St,{htmlFor:"edit-priority",children:"Priority"}),n.jsxs(Gn,{value:d.priority,onValueChange:S=>h(E=>({...E,priority:S})),children:[n.jsx(Jn,{children:n.jsx(ta,{})}),n.jsxs(ea,{children:[n.jsx(Qe,{value:"low",children:"Low"}),n.jsx(Qe,{value:"medium",children:"Medium"}),n.jsx(Qe,{value:"high",children:"High"}),n.jsx(Qe,{value:"urgent",children:"Urgent"})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(St,{htmlFor:"edit-start-date",children:"Start Date"}),n.jsx(It,{id:"edit-start-date",type:"date",value:d.start_date,onChange:S=>h(E=>({...E,start_date:S.target.value})),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(St,{htmlFor:"edit-end-date",children:"End Date"}),n.jsx(It,{id:"edit-end-date",type:"date",value:d.end_date,onChange:S=>h(E=>({...E,end_date:S.target.value})),required:!0})]})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(Y,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),n.jsx(Y,{type:"submit",disabled:v.isPending,children:v.isPending?"Updating...":"Update Project"})]})]})]})}),n.jsxs(me,{children:[n.jsx(Xe,{children:n.jsx(Ye,{children:"Filters"})}),n.jsx(be,{children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Search"}),n.jsxs("div",{className:"relative",children:[n.jsx(Go,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx(It,{placeholder:"Search projects...",value:e.search||"",onChange:S=>T(S.target.value),className:"pl-10"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Status"}),n.jsxs("select",{value:e.status||"all",onChange:S=>O(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"planning",children:"Planning"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"on_hold",children:"On Hold"}),n.jsx("option",{value:"completed",children:"Completed"}),n.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Priority"}),n.jsxs("select",{value:e.priority||"all",onChange:S=>D(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"all",children:"All Priorities"}),n.jsx("option",{value:"urgent",children:"Urgent"}),n.jsx("option",{value:"high",children:"High"}),n.jsx("option",{value:"medium",children:"Medium"}),n.jsx("option",{value:"low",children:"Low"})]})]})]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",role:"grid","aria-label":"Projects grid",children:Array.isArray(j)&&j.map(S=>S?n.jsx(me,{className:"hover:shadow-lg transition-shadow",role:"gridcell",children:n.jsxs(Kt,{to:`/app/projects/${S.id}`,className:"block",children:[n.jsx(Xe,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx(Ye,{className:"text-lg",children:S.name}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:S.description})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(wt,{variant:re(S.status),"aria-label":`Project status: ${S.status}`,children:S.status}),n.jsx(wt,{variant:V(S.priority),"aria-label":`Project priority: ${S.priority}`,children:S.priority})]})]})}),n.jsx(be,{children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[n.jsx("span",{children:"Progress"}),n.jsxs("span",{"aria-live":"polite",children:[S.progress,"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",role:"progressbar","aria-valuenow":S.progress,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`Project progress: ${S.progress}%`,children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${S.progress}%`}})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(b0,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{className:"text-gray-600",children:new Date(S.start_date).toLocaleDateString()})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(qh,{className:"h-4 w-4 text-gray-400"}),n.jsxs("span",{className:"text-gray-600",children:[Array.isArray(S.team_members)?S.team_members.length:0," members"]})]})]}),n.jsxs("div",{className:"flex space-x-2 pt-2",children:[n.jsxs(Y,{variant:"outline",size:"sm",className:"flex-1","aria-label":`View project ${S.name}`,onClick:()=>window.location.href=`/app/projects/${S.id}`,children:[n.jsx(Yo,{className:"h-4 w-4 mr-1"}),"View"]}),n.jsx(Y,{variant:"outline",size:"sm",onClick:()=>te(S),"aria-label":`Edit project ${S.name}`,children:n.jsx(En,{className:"h-4 w-4"})}),n.jsx(Y,{variant:"outline",size:"sm",className:"text-red-600",onClick:()=>k(S.id),disabled:x.isPending,"aria-label":`Delete project ${S.name}`,children:n.jsx(Rn,{className:"h-4 w-4"})})]})]})})]})},S.id):null)}),N&&N.last_page>1&&n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(N.current_page-1)*N.per_page+1," to ",Math.min(N.current_page*N.per_page,N.total)," of ",N.total," results"]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Y,{variant:"outline",size:"sm",onClick:()=>t(S=>({...S,page:S.page-1})),disabled:N.current_page<=1,children:"Previous"}),n.jsx(Y,{variant:"outline",size:"sm",onClick:()=>t(S=>({...S,page:S.page+1})),disabled:N.current_page>=N.last_page,children:"Next"})]})]}),Array.isArray(j)&&j.length===0&&!g&&n.jsx(me,{children:n.jsx(be,{className:"text-center py-12",children:n.jsxs("div",{className:"text-gray-500",children:[n.jsx(gn,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("h3",{className:"text-lg font-medium mb-2",children:"No projects found"}),n.jsx("p",{className:"text-gray-600",children:"Try adjusting your filters or create a new project."})]})})})]})})}const sa=({maxWidth:e=1200,padding:t=24,style:s,...r})=>n.jsx("div",{...r,style:{maxWidth:e,margin:"0 auto",paddingLeft:t,paddingRight:t,...s}}),H_={height:40,padding:"0 16px",borderRadius:8,fontWeight:500,border:"1px solid transparent",outline:"none"},Q_={primary:{background:"var(--primary-button-bg)",color:"var(--primary-button-text)",borderColor:"var(--primary-button-bg)"},secondary:{background:"transparent",color:"var(--text)",borderColor:"var(--border)"},tertiary:{background:"transparent",color:"var(--text)",borderColor:"transparent"}},Z_={sm:{height:36,padding:"0 12px"},md:{height:40,padding:"0 16px"}},we=({variant:e="primary",size:t="md",style:s,disabled:r,...a})=>{const i={...H_,...Z_[t],...Q_[e],opacity:r?.6:1,cursor:r?"not-allowed":"pointer",boxShadow:"0 0 0 0 var(--ring)"};return n.jsx("button",{...a,disabled:r,style:{...i,...s},onFocus:o=>{o.currentTarget.style.boxShadow="0 0 0 3px var(--ring)"},onBlur:o=>{o.currentTarget.style.boxShadow="0 0 0 0 var(--ring)"}})},Hf=Z.forwardRef(({leadingIcon:e,trailingIcon:t,error:s,style:r,onFocus:a,onBlur:i,...o},c)=>{const u={height:40,borderRadius:10,border:"1px solid var(--gray-200)",background:"transparent",color:"var(--text)",paddingTop:0,paddingBottom:0,paddingLeft:e?36:12,paddingRight:t?36:12,outline:"none",width:"100%"},d={position:"relative",display:"flex",alignItems:"center"},h={position:"absolute",width:18,height:18,color:"var(--muted)"},m=f=>{f.currentTarget.style.boxShadow="0 0 0 3px var(--ring)",f.currentTarget.style.borderColor="var(--accent)",a?.(f)},g=f=>{f.currentTarget.style.boxShadow="none",f.currentTarget.style.borderColor=s?"var(--gray-400)":"var(--gray-200)",i?.(f)};return n.jsxs("div",{style:{width:"100%"},children:[n.jsxs("div",{style:d,children:[e&&n.jsx("span",{style:{...h,left:10},children:e}),n.jsx("input",{ref:c,...o,style:{...u,borderColor:s?"var(--gray-400)":"var(--gray-200)",...r},onFocus:m,onBlur:g}),t&&n.jsx("span",{style:{...h,right:10},children:t})]}),s&&n.jsx("div",{style:{marginTop:6,fontSize:12,color:"var(--muted)"},children:s})]})});Hf.displayName="Input";const ps=({title:e,headerExtra:t,children:s,style:r,...a})=>n.jsxs("div",{...a,style:{background:"var(--surface)",border:"1px solid var(--border)",borderRadius:12,boxShadow:"var(--shadow-xs, 0 1px 2px rgba(0,0,0,0.04))",overflow:"hidden",...r},children:[(e||t)&&n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:16,borderBottom:"1px solid var(--border)"},children:[n.jsx("div",{style:{fontWeight:600,fontSize:16,color:"var(--text)"},children:e}),n.jsx("div",{children:t})]}),n.jsx("div",{style:{padding:16,color:"var(--text)"},children:s})]}),As={xs:"0 1px 2px rgba(0,0,0,0.04)"},Qf=p.memo(({activities:e=[],loading:t=!1,error:s=null,limit:r=10,title:a,className:i="",onActivityClick:o})=>{if(t)return n.jsxs(ps,{style:{padding:Wt.xl,borderRadius:rs.lg,boxShadow:As.xs},className:i,"data-testid":"activity-feed",children:[a&&n.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:"var(--text)"},children:a}),n.jsx("div",{className:"space-y-3",children:[1,2,3].map(d=>n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-4 bg-[var(--muted-surface)] rounded mb-2 w-3/4"}),n.jsx("div",{className:"h-3 bg-[var(--muted-surface)] rounded w-1/2"})]},d))})]});if(s)return n.jsxs(ps,{role:"alert","aria-live":"polite",style:{padding:Wt.xl,borderRadius:rs.lg,boxShadow:As.xs},className:i,"data-testid":"activity-feed",children:[a&&n.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:"var(--text)"},children:a}),n.jsx("div",{className:"text-center",style:{color:"var(--muted)"},children:n.jsx("p",{className:"text-sm",children:"Failed to load activity"})})]});const c=e.slice(0,r);if(c.length===0)return n.jsxs(ps,{style:{padding:Wt.xl,borderRadius:rs.lg,boxShadow:As.xs},className:i,"data-testid":"activity-feed",children:[a&&n.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:"var(--text)"},children:a}),n.jsx("div",{className:"text-center",style:{color:"var(--muted)"},children:n.jsx("p",{className:"text-sm",children:"No recent activity"})})]});const l=d=>{switch(d){case"project":return{bg:"var(--color-semantic-primary-100)",text:"var(--color-semantic-primary-700)"};case"task":return{bg:"var(--color-semantic-warning-100)",text:"var(--color-semantic-warning-700)"};case"user":return{bg:"var(--color-semantic-info-100)",text:"var(--color-semantic-info-700)"};case"document":return{bg:"var(--color-semantic-success-100)",text:"var(--color-semantic-success-700)"};case"system":return{bg:"var(--muted-surface)",text:"var(--muted)"};default:return{bg:"var(--muted-surface)",text:"var(--muted)"}}},u=d=>{const h=new Date(d),g=new Date().getTime()-h.getTime(),f=Math.floor(g/6e4),x=Math.floor(g/36e5),y=Math.floor(g/864e5);return f<1?"Just now":f<60?`${f}m ago`:x<24?`${x}h ago`:y<7?`${y}d ago`:h.toLocaleDateString()};return n.jsxs(ps,{style:{padding:Wt.xl,borderRadius:rs.lg,boxShadow:As.xs},className:i,"data-testid":"activity-feed",children:[a&&n.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:"var(--text)"},children:a}),n.jsx("div",{className:"space-y-3","data-testid":"activity-list",children:c.map(d=>{const h=l(d.type);return n.jsxs("div",{onClick:()=>o?.(d),style:{padding:Wt.sm,borderRadius:rs.md,cursor:o?"pointer":"default"},className:"flex items-start gap-3 hover:bg-[var(--muted-surface)] transition-colors","data-testid":`activity-item-${d.id}`,children:[n.jsx("div",{style:{flexShrink:0,width:32,height:32,borderRadius:"50%",backgroundColor:h.bg,color:h.text,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:600},children:d.user?.avatar?n.jsx("img",{src:d.user.avatar,alt:d.user.name,style:{width:"100%",height:"100%",borderRadius:"50%"}}):n.jsx("span",{children:d.type?d.type.charAt(0).toUpperCase():d.user?.name.charAt(0).toUpperCase()||"A"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.type&&n.jsx("span",{className:"text-xs font-medium uppercase",style:{color:h.text},children:d.type}),n.jsx("span",{className:"text-xs",style:{color:"var(--muted)"},children:u(d.timestamp)})]}),n.jsx("p",{className:"text-sm",style:{color:"var(--text)"},children:d.description}),d.user&&n.jsxs("p",{className:"text-xs mt-1",style:{color:"var(--muted)"},children:["by ",d.user.name]})]})]},d.id)})}),e.length>r&&n.jsx("div",{className:"mt-4 text-center",children:n.jsxs("p",{className:"text-xs",style:{color:"var(--muted)"},children:["+",e.length-r," more activities"]})})]})});Qf.displayName="ActivityFeed";const Zf=p.memo(({kpis:e,loading:t=!1,className:s="",columns:r,period:a="week",onPeriodChange:i,showPeriodSelector:o=!1})=>{if(t){const h=r?`grid-cols-${r}`:"grid-cols-1 md:grid-cols-2 lg:grid-cols-4";return n.jsx("div",{className:`grid ${h} gap-4 ${s}`,children:[1,2,3,4].map(m=>n.jsx(ps,{style:{padding:Wt.xl},children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-4 bg-[var(--muted-surface)] rounded mb-2 w-24"}),n.jsx("div",{className:"h-8 bg-[var(--muted-surface)] rounded w-16"})]})},m))})}const c=Array.isArray(e)?e:[];if(c.length===0)return null;const l=r?r===1?"grid-cols-1":r===2?"grid-cols-1 md:grid-cols-2":r===3?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":r===4?"grid-cols-1 md:grid-cols-2 lg:grid-cols-4":"grid-cols-1 md:grid-cols-3 lg:grid-cols-5":"grid-cols-1 md:grid-cols-2 lg:grid-cols-4",u=h=>{switch(h){case"success":return"text-[var(--color-semantic-success-600)]";case"warning":return"text-[var(--color-semantic-warning-600)]";case"danger":return"text-[var(--color-semantic-danger-600)]";case"info":return"text-[var(--color-semantic-info-600)]";default:return"text-[var(--text)]"}},d=h=>{switch(h){case"up":return n.jsx("svg",{className:"w-3 h-3 inline-block",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",children:n.jsx("path",{fillRule:"evenodd",d:"M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})});case"down":return n.jsx("svg",{className:"w-3 h-3 inline-block",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",children:n.jsx("path",{fillRule:"evenodd",d:"M14.707 10.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L9 12.586V5a1 1 0 012 0v7.586l2.293-2.293a1 1 0 011.414 0z",clipRule:"evenodd"})});default:return null}};return n.jsxs("div",{className:`space-y-3 ${s}`,"data-testid":"kpi-strip",children:[o&&i&&n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx("span",{className:"text-xs text-[var(--muted)]",children:"Compare:"}),n.jsxs("div",{className:"inline-flex rounded-md shadow-sm",role:"group",children:[n.jsx("button",{type:"button",onClick:()=>i("week"),className:`px-3 py-1.5 text-xs font-medium rounded-l-md border transition-colors ${a==="week"?"bg-[var(--primary-button-bg)] text-[var(--primary-button-text)] border-[var(--primary-button-bg)]":"bg-[var(--surface)] text-[var(--text)] border-[var(--border)] hover:bg-[var(--muted-surface)]"}`,"aria-pressed":a==="week","aria-label":"Compare with previous week",children:"Week"}),n.jsx("button",{type:"button",onClick:()=>i("month"),className:`px-3 py-1.5 text-xs font-medium rounded-r-md border border-l-0 transition-colors ${a==="month"?"bg-[var(--primary-button-bg)] text-[var(--primary-button-text)] border-[var(--primary-button-bg)]":"bg-[var(--surface)] text-[var(--text)] border-[var(--border)] hover:bg-[var(--muted-surface)]"}`,"aria-pressed":a==="month","aria-label":"Compare with previous month",children:"Month"})]})]}),n.jsx("div",{className:`grid ${l} gap-4`,children:c.map((h,m)=>h?n.jsx(ps,{style:{padding:Wt.xl,borderRadius:rs.lg,boxShadow:As.xs,cursor:h.onClick?"pointer":"default",transition:"all 0.2s ease-in-out"},onClick:h.onClick,"data-testid":`kpi-item-${m}`,className:h.onClick?"hover:shadow-md hover:scale-[1.02] active:scale-[0.98]":"",role:h.onClick?"button":void 0,tabIndex:h.onClick?0:void 0,onKeyDown:h.onClick?g=>{(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),h.onClick())}:void 0,children:n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsx("span",{className:"text-sm font-medium",style:{color:"var(--muted)"},children:h.label})}),n.jsxs("div",{className:"flex items-baseline gap-2 flex-wrap",children:[n.jsx("span",{className:`text-2xl font-bold ${h.variant?u(h.variant):"text-[var(--text)]"}`,"aria-label":`${h.label}: ${typeof h.value=="number"?h.value.toLocaleString():h.value}`,children:typeof h.value=="number"?h.value.toLocaleString():h.value}),h.change&&n.jsxs("span",{className:"text-sm font-medium flex items-center gap-1",style:{color:h.trend==="up"?"var(--color-semantic-success-600)":h.trend==="down"?"var(--color-semantic-danger-600)":"var(--muted)"},title:h.periodLabel||`Compared to previous ${a}`,"aria-label":`Trend: ${h.trend==="up"?"increased":h.trend==="down"?"decreased":"unchanged"} by ${h.change}${h.periodLabel?` (${h.periodLabel})`:""}`,children:[d(h.trend),n.jsx("span",{children:h.change})]})]}),h.actionLabel&&n.jsx("div",{className:"flex items-center gap-2 mt-1",children:n.jsx("button",{onClick:g=>{g.stopPropagation(),h.onClick?.()},className:"text-xs underline",style:{color:"var(--color-semantic-primary-600)"},"aria-label":h.actionLabel,children:h.actionLabel})})]})},m):null)})]})});Zf.displayName="KpiStrip";const Xf=p.memo(({alerts:e=[],loading:t=!1,error:s=null,onDismiss:r,onDismissAll:a,onAlertClick:i,maxDisplay:o=3,className:c=""})=>{if(t)return n.jsx(ps,{style:{padding:Wt.md,borderRadius:rs.lg,boxShadow:As.xs},className:c,"data-testid":"alert-bar",children:n.jsx("div",{className:"animate-pulse",children:n.jsx("div",{className:"h-4 bg-[var(--muted-surface)] rounded w-1/4"})})});if(s)return n.jsx(ps,{role:"alert","aria-live":"polite",style:{padding:Wt.md,borderRadius:rs.lg,boxShadow:As.xs,borderLeft:"4px solid var(--color-semantic-danger-600)"},className:c,"data-testid":"alert-bar",children:n.jsx("div",{className:"text-center",style:{color:"var(--muted)"},children:n.jsx("p",{className:"text-sm",children:"Failed to load alerts"})})});const l=e.filter(d=>!d.dismissed).sort((d,h)=>(h.priority||0)-(d.priority||0)).slice(0,o);if(l.length===0)return null;const u=d=>{switch(d){case"error":return{bg:"var(--color-semantic-danger-50)",border:"var(--color-semantic-danger-200)",text:"var(--color-semantic-danger-900)"};case"warning":return{bg:"var(--color-semantic-warning-50)",border:"var(--color-semantic-warning-200)",text:"var(--color-semantic-warning-900)"};case"info":return{bg:"var(--color-semantic-info-50)",border:"var(--color-semantic-info-200)",text:"var(--color-semantic-info-900)"};case"success":return{bg:"var(--color-semantic-success-50)",border:"var(--color-semantic-success-200)",text:"var(--color-semantic-success-900)"};default:return{bg:"var(--surface)",border:"var(--border)",text:"var(--text)"}}};return n.jsx(ps,{style:{padding:Wt.md,borderRadius:rs.lg,boxShadow:As.xs,borderLeft:"4px solid var(--color-semantic-info-600)"},className:c,"data-testid":"alert-bar",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1 space-y-2",children:[l.map(d=>{const h=u(d.type);return n.jsx("div",{style:{padding:Wt.sm,borderRadius:rs.md,border:`1px solid ${h.border}`,backgroundColor:h.bg,color:h.text,cursor:i&&d.metadata?.project_id?"pointer":"default"},onClick:m=>{if(i&&d.metadata?.project_id){if(m.target.closest('button[aria-label*="Dismiss"]'))return;i(d)}},children:n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"flex-1",children:[d.type&&n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("span",{className:"text-xs font-medium uppercase",style:{color:h.text},children:d.type}),d.created_at&&n.jsx("span",{className:"text-xs",style:{color:"var(--muted)"},children:new Date(d.created_at).toLocaleDateString()})]}),i&&d.metadata?.project_id?n.jsx("button",{onClick:m=>{m.stopPropagation(),i(d)},className:"text-sm font-medium text-left hover:underline cursor-pointer transition-all",style:{color:h.text},children:d.message}):n.jsx("p",{className:"text-sm font-medium",children:d.message})]}),r&&n.jsx("button",{onClick:m=>{m.stopPropagation(),r(d.id)},"aria-label":`Dismiss alert ${d.id}`,className:"h-6 w-6 p-0 flex items-center justify-center hover:opacity-70 transition-opacity",style:{color:h.text},children:"×"})]})},d.id)}),e.length>o&&n.jsxs("p",{className:"text-xs",style:{color:"var(--muted)"},children:["+",e.length-o," more alerts"]})]}),a&&l.length>0&&n.jsx("button",{onClick:a,"aria-label":"Dismiss all alerts",className:"text-sm underline",style:{color:"var(--color-semantic-primary-600)"},children:"Dismiss all"})]})})});Xf.displayName="AlertBar";const Me=Ha(),Nt={async getProjects(e,t){try{const s=new URLSearchParams;e?.search&&s.append("search",e.search),e?.status&&s.append("status",e.status),e?.priority&&s.append("priority",e.priority),e?.owner_id&&s.append("owner_id",String(e.owner_id)),t?.page&&s.append("page",String(t.page)),t?.per_page&&s.append("per_page",String(t.per_page));const r=await Me.get(`/app/projects?${s.toString()}`);if(r.data&&typeof r.data=="object"&&"success"in r.data){const a=r.data;return{data:a.data||[],meta:a.meta}}return r.data}catch(s){throw G(s)}},async getProject(e){try{const t=await Me.get(`/app/projects/${e}`);return t.data.success!==void 0?{data:t.data.data}:t.data}catch(t){throw G(t)}},async createProject(e){try{return(await Me.post("/v1/app/projects",e)).data}catch(t){throw G(t)}},async updateProject(e,t){try{return(await Me.put(`/v1/app/projects/${e}`,t)).data}catch(s){throw G(s)}},async deleteProject(e){try{await Me.delete(`/app/projects/${e}`)}catch(t){throw G(t)}},async getKpis(e){try{const t=e?`?period=${e}`:"";return(await Me.get(`/app/projects/kpis${t}`)).data}catch(t){throw G(t)}},async getAlerts(){try{return(await Me.get("/app/projects/alerts")).data}catch(e){throw G(e)}},async getActivity(e){try{const t=e?`?limit=${e}`:"";return(await Me.get(`/v1/app/projects/activity${t}`)).data}catch(t){throw G(t)}},async getProjectTasks(e,t,s){try{const r=new URLSearchParams;t?.status&&r.append("status",t.status),t?.search&&r.append("search",t.search),s?.page&&r.append("page",String(s.page)),s?.per_page&&r.append("per_page",String(s.per_page));const a=r.toString(),i=`/v1/app/projects/${e}/tasks${a?`?${a}`:""}`;return(await Me.get(i)).data}catch(r){throw G(r)}},async getProjectDocuments(e,t,s){try{const r=new URLSearchParams;t?.search&&r.append("search",t.search),s?.page&&r.append("page",String(s.page)),s?.per_page&&r.append("per_page",String(s.per_page));const a=r.toString(),i=`/v1/app/projects/${e}/documents${a?`?${a}`:""}`;return(await Me.get(i)).data}catch(r){throw G(r)}},async archiveProject(e){try{return(await Me.put(`/v1/app/projects/${e}/archive`,{})).data}catch(t){throw G(t)}},async addTeamMember(e,t,s){try{const r={user_id:t};return s&&(r.role_id=s),(await Me.post(`/v1/app/projects/${e}/team-members`,r)).data}catch(r){throw G(r)}},async removeTeamMember(e,t){try{return(await Me.delete(`/v1/app/projects/${e}/team-members/${t}`)).data}catch(s){throw G(s)}},async getTeamMembers(e){try{return(await Me.get(`/v1/app/projects/${e}/team-members`)).data}catch(t){throw G(t)}},async uploadProjectDocument(e,t,s){try{const r=new FormData;return r.append("file",t),r.append("project_id",String(e)),s?.name&&r.append("name",s.name),s?.description&&r.append("description",s.description),s?.category&&r.append("category",s.category),(await Me.post("/v1/app/documents",r,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(r){throw G(r)}},async getProjectKpis(e){try{return(await Me.get(`/v1/app/projects/${e}/kpis`)).data}catch(t){throw G(t)}},async getProjectAlerts(e){try{return(await Me.get(`/v1/app/projects/${e}/alerts`)).data}catch(t){throw G(t)}},async getProjectOverview(e){try{const t=await Me.get(`/v1/app/projects/${e}/overview`);return t.data.success!==void 0?{data:t.data.data}:t.data}catch(t){throw G(t)}},async getProjectHealthHistory(e,t){try{const s=new URLSearchParams;t?.limit&&s.append("limit",String(t.limit));const r=s.toString(),a=`/v1/app/projects/${e}/health/history${r?`?${r}`:""}`,i=await Me.get(a,{signal:t?.signal});return i.data&&typeof i.data=="object"&&"success"in i.data?i.data.data||[]:i.data.data||[]}catch(s){throw G(s)}}},$c={async listTemplateSets(e){try{const t=new URLSearchParams;e?.search&&t.append("search",e.search),e?.is_active!==void 0&&t.append("is_active",String(e.is_active));const s=t.toString(),r=`/v1/app/task-templates${s?`?${s}`:""}`,a=await Me.get(r);return a.data&&typeof a.data=="object"&&"success"in a.data?{data:a.data.data||[]}:a.data}catch(t){throw G(t)}},async getTemplateSetDetail(e){try{const t=await Me.get(`/v1/app/task-templates/${e}`);return t.data&&typeof t.data=="object"&&"success"in t.data?{data:t.data.data}:t.data}catch(t){throw G(t)}},async applyTemplateToProject(e,t,s,r){try{return(await Me.post(`/v1/app/projects/${e}/task-templates/apply`,t,{headers:{"Idempotency-Key":s},signal:r})).data}catch(a){throw G(a)}}},X_={"task.create":["tasks","dashboard"],"task.update":["tasks","task"],"task.move":["tasks","task","dashboard"],"task.delete":["tasks","dashboard"],"task.bulkDelete":["tasks","dashboard"],"task.bulkUpdate":["tasks"],"task.bulkAssign":["tasks"],"project.create":["projects","dashboard"],"project.update":["project","projects","dashboard"],"project.delete":["projects","dashboard"],"project.archive":["projects","dashboard"],"project.addTeamMember":["project","projects"],"project.removeTeamMember":["project","projects"],"project.uploadDocument":["projects","project"],"document.create":["documents","dashboard"],"document.update":["documents","document"],"document.delete":["documents","dashboard"],"document.upload":["documents"],"client.create":["clients","dashboard"],"client.update":["client","clients"],"client.delete":["clients"],"quote.create":["quotes","dashboard"],"quote.update":["quote","quotes"],"quote.delete":["quotes"],"quote.approve":["quote","quotes","dashboard"],"changeRequest.create":["changeRequests","changeRequestStats","dashboard"],"changeRequest.update":["changeRequest","changeRequests","changeRequestStats"],"changeRequest.approve":["changeRequest","changeRequests","changeRequestStats","dashboard"],"changeRequest.reject":["changeRequest","changeRequests","changeRequestStats"],"user.create":["users","dashboard"],"user.update":["user","users"],"user.delete":["users"],"user.invite":["users","dashboard"],"template.create":["templates","templateSets"],"template.update":["template","templates"],"template.delete":["templates"],"template.apply":["tasks","projects","dashboard"]};function rr(e,t){const s=X_[e];if(!s)return;const{queryClient:r,tenantId:a,resourceId:i,projectId:o}=t;s.forEach(c=>{r.invalidateQueries({queryKey:[c]}),i&&r.invalidateQueries({queryKey:[c,i]}),o&&r.invalidateQueries({queryKey:[c,"project",o]}),a&&r.invalidateQueries({queryKey:[c,"tenant",a]})})}function nr(e,t){return{queryClient:e,...t}}const Y_=e=>Ce({queryKey:["project",e],queryFn:()=>Nt.getProject(e),enabled:!!e}),G_=()=>{const e=fe();return ke({mutationFn:t=>Nt.deleteProject(t),onSuccess:(t,s)=>{rr("project.delete",nr(e,{resourceId:s}))}})},J_=e=>Ce({queryKey:["projects","activity",e],queryFn:()=>Nt.getActivity(e)}),e2=(e,t,s)=>Ce({queryKey:["projects",e,"tasks",t,s],queryFn:()=>Nt.getProjectTasks(e,t,s),enabled:!!e}),t2=(e,t,s)=>Ce({queryKey:["projects",e,"documents",t,s],queryFn:()=>Nt.getProjectDocuments(e,t,s),enabled:!!e}),s2=()=>{const e=fe();return ke({mutationFn:t=>Nt.archiveProject(t),onSuccess:(t,s)=>{rr("project.archive",nr(e,{resourceId:s}))}})},r2=()=>{const e=fe();return ke({mutationFn:({projectId:t,userId:s,roleId:r})=>Nt.addTeamMember(t,s,r),onSuccess:(t,s)=>{rr("project.addTeamMember",nr(e,{resourceId:s.projectId}))}})},n2=()=>{const e=fe();return ke({mutationFn:({projectId:t,userId:s})=>Nt.removeTeamMember(t,s),onSuccess:(t,s)=>{rr("project.removeTeamMember",nr(e,{resourceId:s.projectId}))}})},a2=()=>{const e=fe();return ke({mutationFn:({projectId:t,file:s,data:r})=>Nt.uploadProjectDocument(t,s,r),onSuccess:(t,s)=>{rr("project.uploadDocument",nr(e,{resourceId:s.projectId}))}})},i2=e=>Ce({queryKey:["project",e,"kpis"],queryFn:()=>Nt.getProjectKpis(e),enabled:!!e}),o2=e=>Ce({queryKey:["project",e,"alerts"],queryFn:()=>Nt.getProjectAlerts(e),enabled:!!e}),c2=e=>Ce({queryKey:["project-overview",e],queryFn:()=>{if(!e)throw new Error("Missing projectId");return Nt.getProjectOverview(e)},enabled:!!e}),l2=(e,t)=>{const s=!!e&&(t?.enabled??!0);return Ce({queryKey:["project-health-history",e,t?.limit],enabled:s,queryFn:async({signal:r})=>e?Nt.getProjectHealthHistory(e,{limit:t?.limit,signal:r}):[]})},d2=e=>Ce({queryKey:["template-sets",e?.filters],queryFn:()=>$c.listTemplateSets(e?.filters),enabled:e?.enabled??!0}),u2=(e,t)=>Ce({queryKey:["template-set-detail",e],queryFn:()=>{if(!e)throw new Error("Template set ID is required");return $c.getTemplateSetDetail(e)},enabled:(t?.enabled??!0)&&!!e}),h2=()=>{const e=fe();return ke({mutationFn:({projectId:t,payload:s,idempotencyKey:r,signal:a})=>$c.applyTemplateToProject(t,s,r,a),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:["projects",s.projectId,"tasks"]}),e.invalidateQueries({queryKey:["project-overview",s.projectId]}),e.invalidateQueries({queryKey:["project",s.projectId]})}})},m2='a[href], area[href], button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"])',f2=(e,t)=>{if(!t)return;const s=Array.from(t.querySelectorAll(m2));if(s.length===0){e.preventDefault();return}const r=s[0],a=s[s.length-1],i=document.activeElement;e.shiftKey?i===r&&(a.focus(),e.preventDefault()):i===a&&(r.focus(),e.preventDefault())},p2=({open:e,onOpenChange:t,title:s,description:r,children:a,primaryAction:i,secondaryAction:o,closeLabel:c="Đóng","data-testid":l})=>{const u=p.useRef(null);return p.useEffect(()=>{if(!e)return;const d=u.current,h=document.activeElement;d?.focus({preventScroll:!0});const m=f=>{f.key==="Escape"&&t(!1),f.key==="Tab"&&f2(f,d)};document.addEventListener("keydown",m);const g=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",m),document.body.style.overflow=g,h?.focus()}},[e,t]),e?zu.createPortal(n.jsxs("div",{className:"fixed inset-0 z-[80] flex items-center justify-center px-4",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title","aria-describedby":r?"modal-description":void 0,children:[n.jsx("div",{className:"absolute inset-0 bg-[var(--color-surface-overlay)] backdrop-blur-sm","aria-hidden":"true",onClick:()=>t(!1)}),n.jsxs("div",{ref:u,tabIndex:-1,role:"document",className:"relative z-10 w-full max-w-lg rounded-[var(--radius-xl)] border border-[var(--color-border-default)] bg-[var(--color-surface-card)] shadow-xl focus:outline-none","data-testid":l,children:[n.jsxs("header",{className:"flex items-start justify-between gap-4 border-b border-[var(--color-border-subtle)] px-6 py-4",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("h2",{id:"modal-title",className:"text-lg font-semibold text-[var(--color-text-primary)]",children:s}),r?n.jsx("p",{id:"modal-description",className:"text-sm text-[var(--color-text-muted)]",children:r}):null]}),n.jsx(le,{variant:"ghost",size:"sm","aria-label":c,onClick:()=>t(!1),children:"✕"})]}),n.jsx("div",{className:"px-6 py-5 text-[var(--color-text-secondary)]",children:a}),n.jsxs("footer",{className:"flex items-center justify-end gap-2 border-t border-[var(--color-border-subtle)] px-6 py-4",children:[o?n.jsx(le,{variant:o.variant??"outline",size:"sm",onClick:o.onClick,disabled:o.loading,children:o.loading?"Đang xử lý…":o.label}):null,i?n.jsx(le,{variant:i.variant??"primary",size:"sm",onClick:i.onClick,loading:i.loading,children:i.label}):null]})]})]}),document.body):null},Ro=Z.forwardRef(({options:e,value:t,onChange:s,placeholder:r,error:a,className:i,style:o,disabled:c,children:l,"data-testid":u,...d},h)=>{const[m,g]=p.useState(!1),[f,x]=p.useState(t||""),y=p.useRef(null),v=p.useRef(null),w=p.useRef(!1),j=p.useRef(t);p.useEffect(()=>{t!==void 0&&t!==j.current&&!w.current?(j.current=t,t!==f&&x(t)):t!==void 0&&(j.current=t)},[t]),p.useEffect(()=>{const V=S=>{v.current&&!v.current.contains(S.target)&&g(!1)};if(m)return document.addEventListener("mousedown",V),()=>document.removeEventListener("mousedown",V)},[m]);const N=V=>{w.current||(w.current=!0,x(V),s?.(V),g(!1),y.current&&(y.current.value=V),Promise.resolve().then(()=>{w.current=!1}))},T=V=>{w.current||N(V.target.value)},O=e||[];!e&&l&&Z.Children.forEach(l,V=>{if(Z.isValidElement(V)&&V.type==="option"){const S=V.props.value||"",E=typeof V.props.children=="string"?V.props.children:S;O.push({value:S,label:E})}});const k=O.find(V=>V.value===f)?.label||r||"",z={position:"relative",width:"100%",...o},ne={width:"100%",height:40,borderRadius:10,border:`1px solid ${a?"var(--gray-400)":"var(--gray-200)"}`,background:"transparent",color:"var(--text)",padding:"0 12px",paddingRight:36,fontSize:14,fontWeight:400,outline:"none",cursor:c?"not-allowed":"pointer",opacity:c?.6:1,display:"flex",alignItems:"center",justifyContent:"space-between",textAlign:"left",boxShadow:"none",transition:"border-color 150ms, box-shadow 150ms"},ue={position:"absolute",top:"100%",left:0,right:0,marginTop:4,backgroundColor:"var(--surface)",border:"1px solid var(--border)",borderRadius:10,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)",zIndex:1e3,maxHeight:240,overflowY:"auto",display:m?"block":"none"},te={padding:"10px 12px",fontSize:14,color:"var(--text)",cursor:"pointer",backgroundColor:"transparent",border:"none",width:"100%",textAlign:"left",transition:"background-color 150ms"},re={position:"absolute",right:12,top:"50%",transform:`translateY(-50%) ${m?"rotate(180deg)":""}`,transition:"transform 150ms",width:12,height:12,pointerEvents:"none",color:"var(--muted)"};return n.jsxs("div",{style:z,ref:v,className:i,children:[n.jsxs("select",{ref:V=>{typeof h=="function"?h(V):h&&(h.current=V),y.current=V},value:f,onChange:T,disabled:c,style:{display:"none"},...d,children:[r&&n.jsx("option",{value:"",disabled:!0,children:r}),e?e.map(V=>n.jsx("option",{value:V.value,children:V.label},V.value)):l]}),n.jsxs("button",{type:"button",style:ne,onClick:()=>!c&&g(!m),onFocus:V=>{V.currentTarget.style.boxShadow="0 0 0 3px var(--ring)",V.currentTarget.style.borderColor="var(--accent)"},onBlur:V=>{V.currentTarget.style.boxShadow="none",V.currentTarget.style.borderColor=a?"var(--gray-400)":"var(--gray-200)"},disabled:c,"aria-haspopup":"listbox","aria-expanded":m,"data-testid":u,children:[n.jsx("span",{style:{color:f?"var(--text)":"var(--muted)"},children:k}),n.jsx("svg",{style:re,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:n.jsx("path",{d:"M3 4.5L6 7.5L9 4.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]}),m&&O.length>0&&n.jsx("div",{style:ue,role:"listbox",children:O.map(V=>n.jsx("button",{type:"button",role:"option","aria-selected":V.value===f,style:{...te,backgroundColor:V.value===f?"var(--muted-surface)":"transparent",fontWeight:V.value===f?500:400},onMouseEnter:S=>{V.value!==f&&(S.currentTarget.style.backgroundColor="var(--muted-surface)")},onMouseLeave:S=>{V.value!==f&&(S.currentTarget.style.backgroundColor="transparent")},onClick:()=>N(V.value),children:V.label},V.value))}),a&&n.jsx("div",{style:{marginTop:6,fontSize:12,color:"var(--muted)"},children:a})]})});Ro.displayName="Select";function Ws(e,t,s){const r=Date.now(),a=Math.random().toString(36).substring(2,15),i=s?`_${s}`:"";return`${e}_${t}_${r}_${a}${i}`}const Yf=p.createContext(void 0),g2=()=>{const e=p.useContext(Yf);if(!e)throw new Error("useToast must be used within a ToastProvider");return e},x2=({children:e})=>{const[t,s]=p.useState([]),r=p.useCallback(o=>{const c=Math.random().toString(36).substr(2,9),l={...o,id:c,duration:o.duration||5e3};s(u=>[...u,l]),(l.duration||5e3)>0&&setTimeout(()=>{a(c)},l.duration||5e3)},[]),a=p.useCallback(o=>{s(c=>c.filter(l=>l.id!==o))},[]),i=p.useCallback(()=>{s([])},[]);return n.jsxs(Yf.Provider,{value:{toasts:t,addToast:r,removeToast:a,clearToasts:i},children:[e,n.jsx(y2,{toasts:t,onRemove:a})]})},y2=({toasts:e,onRemove:t})=>e.length===0?null:n.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:e.map(s=>n.jsx(v2,{toast:s,onRemove:t},s.id))}),v2=({toast:e,onRemove:t})=>{const s=a=>{switch(a){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"info":return"bg-blue-50 border-blue-200 text-blue-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}},r=a=>{switch(a){case"success":return"✅";case"error":return"❌";case"warning":return"⚠️";case"info":return"ℹ️";default:return"📢"}};return n.jsx("div",{className:`max-w-sm w-full border rounded-lg shadow-lg p-4 ${s(e.type)}`,role:"alert",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("span",{className:"text-lg",children:r(e.type)})}),n.jsxs("div",{className:"ml-3 flex-1",children:[n.jsx("h4",{className:"text-sm font-medium",children:e.title}),e.message&&n.jsx("p",{className:"mt-1 text-sm opacity-90",children:e.message})]}),n.jsx("div",{className:"ml-4 flex-shrink-0",children:n.jsxs("button",{onClick:()=>t(e.id),className:"inline-flex text-gray-400 hover:text-gray-600 focus:outline-none focus:text-gray-600",children:[n.jsx("span",{className:"sr-only",children:"Close"}),n.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})})},b2=({projectId:e,open:t,onOpenChange:s,onApplied:r})=>{const{addToast:a}=g2(),[i,o]=p.useState(""),[c,l]=p.useState(""),[u,d]=p.useState(!0),{data:h,isLoading:m}=d2({enabled:t,filters:{is_active:!0}}),{data:g,isLoading:f}=u2(i||null,{enabled:t&&!!i}),x=h2();p.useEffect(()=>{t||(o(""),l(""),d(!0))},[t]),p.useEffect(()=>{l("")},[i]);const y=h?.data||[],v=g?.data?.presets||[],w=y.map(D=>({value:D.id,label:D.name||D.code||D.id})),j=v.map(D=>({value:D.id,label:D.name||D.code||D.id})),N=async()=>{if(!i){a({type:"error",title:"Lỗi",message:"Vui lòng chọn mẫu công việc"});return}try{const D=Ws("project","apply_template",e),k={template_set_id:i,preset_id:c||null,options:{include_dependencies:u}},z=await x.mutateAsync({projectId:e,payload:k,idempotencyKey:D}),{created_tasks:ne,created_dependencies:ue}=z.data;a({type:"success",title:"Áp dụng mẫu thành công",message:`Đã tạo ${ne} công việc${ue>0?`, ${ue} phụ thuộc`:""}`}),s(!1),r?.()}catch(D){const k=D?.message||"Không thể áp dụng mẫu. Vui lòng thử lại.";a({type:"error",title:"Lỗi",message:k})}},T=()=>{N()};i&&x.isPending;const O=x.isError;return n.jsx(p2,{open:t,onOpenChange:s,title:"Áp dụng mẫu công việc",description:"Chọn mẫu công việc và preset (nếu có) để áp dụng vào dự án này",primaryAction:{label:"Áp dụng",onClick:N,loading:x.isPending,variant:"primary"},secondaryAction:{label:"Hủy",onClick:()=>s(!1),variant:"outline"},children:n.jsxs("div",{className:"space-y-4","data-testid":"apply-template-modal",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-[var(--text)] mb-2",children:["Mẫu công việc ",n.jsx("span",{className:"text-[var(--color-semantic-danger-600)]",children:"*"})]}),m?n.jsx("div",{className:"text-sm text-[var(--muted)]",children:"Đang tải..."}):w.length===0?n.jsx("div",{className:"text-sm text-[var(--muted)] py-2","data-testid":"apply-template-no-templates",children:"Không có mẫu công việc nào khả dụng"}):n.jsx(Ro,{options:w,value:i,onChange:o,placeholder:"Chọn mẫu công việc",disabled:x.isPending,"data-testid":"apply-template-select-trigger"})]}),i&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-[var(--text)] mb-2",children:"Preset (tùy chọn)"}),f?n.jsx("div",{className:"text-sm text-[var(--muted)]",children:"Đang tải..."}):j.length===0?n.jsx("div",{className:"text-sm text-[var(--muted)] py-2",children:"Mẫu này không có preset"}):n.jsx(Ro,{options:j,value:c,onChange:l,placeholder:"Chọn preset (tùy chọn)",disabled:x.isPending})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",id:"include-dependencies",checked:u,onChange:D=>d(D.target.checked),disabled:x.isPending,className:"w-4 h-4 rounded border-[var(--border)] text-[var(--accent)] focus:ring-[var(--accent)]"}),n.jsx("label",{htmlFor:"include-dependencies",className:"text-sm text-[var(--text)] cursor-pointer",children:"Tạo dependencies (phụ thuộc)"})]}),O&&n.jsx("div",{className:"p-4 bg-[var(--color-semantic-danger-50)] border border-[var(--color-semantic-danger-200)] rounded-lg",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("span",{className:"text-lg",children:"❌"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-sm font-medium text-[var(--color-semantic-danger-800)] mb-1",children:"Không thể áp dụng mẫu"}),n.jsx("p",{className:"text-sm text-[var(--color-semantic-danger-700)] mb-3",children:x.error?.message||"Đã xảy ra lỗi. Vui lòng thử lại."}),n.jsx(we,{variant:"secondary",size:"sm",onClick:T,disabled:x.isPending,children:"Thử lại"})]})]})})]})})};function Gf(e){switch(e){case"good":return"Tốt";case"warning":return"Cảnh báo";case"critical":return"Nguy cấp";default:return e}}function Jf(e){switch(e){case"on_track":return"Đúng tiến độ";case"at_risk":return"Có rủi ro chậm";case"delayed":return"Đang chậm tiến độ";case"no_tasks":return"Chưa có task nào";default:return e}}function ep(e){switch(e){case"on_budget":return"Trong ngân sách";case"at_risk":return"Chi phí có rủi ro vượt";case"over_budget":return"Vượt ngân sách";case"no_data":return"Chưa có dữ liệu chi phí";default:return e}}function Au(e){switch(e){case"good":return"success";case"warning":return"warning";case"critical":return"danger";default:return"neutral"}}function w2(e){switch(e){case"good":return"good";case"warning":return"warning";case"critical":return"critical";default:return"no_data"}}function Pu(e){switch(e){case"good":return 3;case"warning":return 2;case"critical":return 1;case"no_data":return 0;default:return 0}}function j2(e,t){const s=Pu(e),r=Pu(t);return s>r?"improving":s<r?"worsening":"stable"}function N2(e,t=30){if(!e||e.length===0)return{direction:"unknown",lastStatus:null,prevStatus:null,totalDays:0,countGood:0,countWarning:0,countCritical:0,timeline:[]};const r=e.slice(0,t).map(d=>w2(d.overall_status)).reverse(),a=r.length>0?r[r.length-1]:null,i=r.length>1?r[r.length-2]:null;let o="unknown";a&&i&&a!=="no_data"&&i!=="no_data"&&(o=j2(a,i));let c=0,l=0,u=0;for(const d of r)switch(d){case"good":c++;break;case"warning":l++;break;case"critical":u++;break}return{direction:o,lastStatus:a,prevStatus:i,totalDays:r.length,countGood:c,countWarning:l,countCritical:u,timeline:r}}const k2=({projectId:e,canViewReports:t})=>{const{data:s,isLoading:r,isError:a,error:i,refetch:o}=l2(e,{enabled:t,limit:30});if(!t)return null;const c=m=>{try{return new Date(m).toLocaleDateString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit"})}catch{return m}},l=m=>m===null?"—":`${Math.round(m*100)}%`,u=p.useMemo(()=>!s||s.length===0?null:N2(s,30),[s]),h=(()=>{if(!u)return{label:"Chưa có đủ dữ liệu",tone:"neutral"};switch(u.direction){case"improving":return{label:"Tốt lên",tone:"success"};case"worsening":return{label:"Xấu đi",tone:"danger"};case"stable":return{label:"Ổn định",tone:"warning"};case"unknown":return{label:"Chưa có đủ dữ liệu",tone:"neutral"};default:return{label:"Chưa có đủ dữ liệu",tone:"neutral"}}})();return n.jsxs(J,{className:"mt-6","data-testid":"project-health-history-card",children:[n.jsx(ye,{children:n.jsx(ve,{children:"Lịch sử sức khỏe dự án"})}),n.jsxs(ee,{children:[r&&n.jsx("div",{"data-testid":"project-health-history-loading",className:"py-4",children:n.jsx("p",{className:"text-sm text-[var(--muted)]",children:"Đang tải lịch sử sức khỏe dự án..."})}),a&&n.jsxs("div",{"data-testid":"project-health-history-error",className:"py-4",children:[n.jsx("p",{className:"text-sm text-[var(--color-semantic-danger-600)] mb-3",children:"Không tải được lịch sử sức khỏe. Vui lòng thử lại."}),n.jsx(we,{variant:"outline",size:"sm",onClick:()=>o(),children:"Thử lại"})]}),!r&&!a&&(!s||s.length===0)&&n.jsxs("div",{"data-testid":"project-health-history-empty",className:"py-4",children:[n.jsx("p",{className:"text-sm text-[var(--muted)]",children:"Chưa có snapshot sức khỏe nào cho dự án này."}),n.jsx("p",{className:"text-sm text-[var(--muted)] mt-2",children:"Chưa có dữ liệu để tính xu hướng."})]}),!r&&!a&&s&&s.length>0&&n.jsxs(n.Fragment,{children:[u&&n.jsxs("div",{className:"mb-6 pb-6 border-b border-[var(--border)]",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("span",{"data-testid":"project-health-history-trend-label",className:"text-sm font-medium text-[var(--muted)]",children:"Xu hướng 30 ngày gần đây:"}),n.jsx(ht,{"data-testid":"project-health-history-trend-chip",tone:h.tone,children:h.label})]}),u.timeline.length>0&&n.jsx("div",{"data-testid":"project-health-history-timeline",className:"flex items-center gap-1 mb-4 flex-wrap",style:{maxWidth:"100%"},children:u.timeline.map((m,g)=>{const f=Au(m);let x="var(--color-semantic-neutral-400)";switch(f){case"success":x="var(--color-semantic-success-500)";break;case"warning":x="var(--color-semantic-warning-500)";break;case"danger":x="var(--color-semantic-danger-500)";break;default:x="var(--color-semantic-neutral-400)"}return n.jsx("span",{"data-testid":"project-health-history-timeline-dot",className:"inline-block rounded-full",style:{width:"8px",height:"8px",backgroundColor:x,flexShrink:0},title:`${m==="good"?"Tốt":m==="warning"?"Cảnh báo":m==="critical"?"Nguy cấp":"Không có dữ liệu"}`},g)})}),n.jsxs("div",{"data-testid":"project-health-history-summary",className:"flex flex-wrap gap-4 text-sm",children:[n.jsxs("span",{className:"text-[var(--text)]",children:[n.jsx("span",{className:"font-medium text-[var(--color-semantic-success-600)]",children:"Tốt:"})," ",u.countGood," ngày"]}),n.jsxs("span",{className:"text-[var(--text)]",children:[n.jsx("span",{className:"font-medium text-[var(--color-semantic-warning-600)]",children:"Cảnh báo:"})," ",u.countWarning," ngày"]}),n.jsxs("span",{className:"text-[var(--text)]",children:[n.jsx("span",{className:"font-medium text-[var(--color-semantic-danger-600)]",children:"Nguy cấp:"})," ",u.countCritical," ngày"]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-[var(--border)]",children:[n.jsx("th",{className:"text-left py-2 px-3 font-medium text-[var(--muted)]",children:"Ngày"}),n.jsx("th",{className:"text-left py-2 px-3 font-medium text-[var(--muted)]",children:"Tổng thể"}),n.jsx("th",{className:"text-left py-2 px-3 font-medium text-[var(--muted)]",children:"Tiến độ"}),n.jsx("th",{className:"text-left py-2 px-3 font-medium text-[var(--muted)]",children:"Chi phí"}),n.jsx("th",{className:"text-right py-2 px-3 font-medium text-[var(--muted)]",children:"% hoàn thành"}),n.jsx("th",{className:"text-right py-2 px-3 font-medium text-[var(--muted)]",children:"Task quá hạn"})]})}),n.jsx("tbody",{children:s.map(m=>n.jsxs("tr",{"data-testid":"project-health-history-row",className:"border-b border-[var(--border)] hover:bg-[var(--muted-surface)]",children:[n.jsx("td",{className:"py-2 px-3 text-[var(--text)]",children:c(m.snapshot_date)}),n.jsx("td",{className:"py-2 px-3",children:n.jsx(ht,{tone:Au(m.overall_status),children:Gf(m.overall_status)})}),n.jsx("td",{className:"py-2 px-3 text-[var(--text)]",children:Jf(m.schedule_status)}),n.jsx("td",{className:"py-2 px-3 text-[var(--text)]",children:ep(m.cost_status)}),n.jsx("td",{className:"py-2 px-3 text-right text-[var(--text)]",children:l(m.tasks_completion_rate)}),n.jsx("td",{className:"py-2 px-3 text-right text-[var(--text)]",children:m.overdue_tasks})]},m.id))})]})})]})]})]})},Ze=Ha(),tp={async getTasks(e,t){try{const s=new URLSearchParams;return e?.project_id&&s.append("project_id",String(e.project_id)),e?.status&&s.append("status",e.status),e?.priority&&s.append("priority",e.priority),e?.assignee_id&&s.append("assignee_id",String(e.assignee_id)),e?.search&&s.append("search",e.search),t?.page&&s.append("page",String(t.page)),t?.per_page&&s.append("per_page",String(t.per_page)),(await Ze.get(`/v1/app/tasks?${s.toString()}`)).data}catch(s){throw G(s)}},async getTask(e){try{return(await Ze.get(`/v1/app/tasks/${e}`)).data}catch(t){throw G(t)}},async createTask(e){try{const t=Ws("task","create");return(await Ze.post("/v1/app/tasks",e,{headers:{"Idempotency-Key":t}})).data}catch(t){throw G(t)}},async updateTask(e,t){try{const s=Ws("task","update");return(await Ze.put(`/v1/app/tasks/${e}`,t,{headers:{"Idempotency-Key":s}})).data}catch(s){throw G(s)}},async moveTask(e,t){try{const s=Ws("task","move");return(await Ze.patch(`/v1/app/tasks/${e}/move`,t,{headers:{"Idempotency-Key":s}})).data}catch(s){throw G(s)}},async deleteTask(e){try{await Ze.delete(`/v1/app/tasks/${e}`)}catch(t){throw G(t)}},async getKpis(e){try{const t=e?`?period=${e}`:"";return(await Ze.get(`/v1/app/tasks/kpis${t}`)).data}catch(t){throw G(t)}},async getAlerts(){try{return(await Ze.get("/v1/app/tasks/alerts")).data}catch(e){throw G(e)}},async getActivity(e){try{const t=e?`?limit=${e}`:"";return(await Ze.get(`/v1/app/tasks/activity${t}`)).data}catch(t){throw G(t)}},async getComments(e){try{return(await Ze.get(`/v1/app/task-comments/task/${e}`)).data}catch(t){throw G(t)}},async createComment(e){try{return(await Ze.post("/v1/app/task-comments",e)).data}catch(t){throw G(t)}},async updateComment(e,t){try{return(await Ze.put(`/v1/app/task-comments/${e}`,t)).data}catch(s){throw G(s)}},async deleteComment(e){try{await Ze.delete(`/v1/app/task-comments/${e}`)}catch(t){throw G(t)}},async bulkDeleteTasks(e){try{const t=Ws("task","bulk_delete");return(await Ze.post("/v1/app/tasks/bulk-delete",{ids:e},{headers:{"Idempotency-Key":t}})).data}catch(t){throw G(t)}},async bulkUpdateStatus(e,t){try{const s=Ws("task","bulk_status");return(await Ze.post("/v1/app/tasks/bulk-status",{ids:e,status:t},{headers:{"Idempotency-Key":s}})).data}catch(s){throw G(s)}},async bulkAssignTasks(e,t){try{const s=Ws("task","bulk_assign");return(await Ze.post("/v1/app/tasks/bulk-assign",{ids:e,assignee_id:t},{headers:{"Idempotency-Key":s}})).data}catch(s){throw G(s)}},async getTaskDocuments(e){try{return(await Ze.get(`/v1/app/tasks/${e}/documents`)).data}catch(t){throw G(t)}},async getTaskHistory(e){try{return(await Ze.get(`/v1/app/tasks/${e}/history`)).data}catch(t){throw G(t)}}},_2=()=>{const e=fe();return ke({mutationFn:({id:t,data:s})=>tp.updateTask(t,s),onSuccess:(t,s)=>{const r=t?.data??t,a=r?.id??s.id,i=r?.project_id??r?.projectId??s.data?.project_id;rr("task.update",nr(e,{resourceId:a,projectId:i}))},onError:t=>{}})},T2=()=>{const e=fe();return ke({mutationFn:t=>tp.deleteTask(t),onSuccess:(t,s)=>{rr("task.delete",nr(e,{resourceId:s}))}})},S2={async getUsers(e,t){try{const s=new URLSearchParams;return e?.search&&s.append("search",e.search),e?.role&&s.append("role",e.role),t?.page&&s.append("page",String(t.page)),t?.per_page&&s.append("per_page",String(t.per_page)),(await $.get(`/v1/app/users?${s.toString()}`)).data}catch(s){throw G(s)}},async getUser(e){try{return(await $.get(`/v1/app/users/${e}`)).data}catch(t){throw G(t)}}},C2=(e,t)=>Ce({queryKey:["users",e,t],queryFn:()=>S2.getUsers(e,t)});function A2(e,t="USD"){(e==null||isNaN(e))&&(e=0);try{return new Intl.NumberFormat("en-US",{style:"currency",currency:t,minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}catch{return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}}const ra=({value:e,currency:t="USD",fallback:s="-",showPlusWhenPositive:r=!1,tone:a="normal",className:i=""})=>{if(e==null){const d="whitespace-nowrap",h=a==="danger"?"text-[var(--color-semantic-danger-600)] font-semibold":a==="muted"?"text-[var(--color-text-muted)]":"";return n.jsx("span",{"data-tone":a,className:`${d} ${h} ${i}`.trim(),children:s})}const o=A2(e,t),c=r&&e>0?`+${o}`:o,l="whitespace-nowrap",u=a==="danger"?"text-[var(--color-semantic-danger-600)] font-semibold":a==="muted"?"text-[var(--color-text-muted)]":"";return n.jsx("span",{"data-tone":a,className:`${l} ${u} ${i}`.trim(),children:c})},P2=[{id:"overview",label:"Overview",icon:"📊"},{id:"tasks",label:"Tasks",icon:"✅"},{id:"documents",label:"Documents",icon:"📄"},{id:"team",label:"Team",icon:"👥"},{id:"activity",label:"Activity",icon:"📝"}],Oi=({task:e,priorityColorClass:t,onNavigate:s,canManageTasks:r,currentUserId:a,projectId:i})=>{const[o,c]=p.useState(!1),l=p.useRef(null),u=fe(),d=_2();p.useEffect(()=>{const v=w=>{l.current&&!l.current.contains(w.target)&&c(!1)};if(o)return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[o]);const h=v=>{v.target.closest(".task-menu-button")||v.target.closest(".task-menu")||s(e.id)},m=v=>{v.stopPropagation(),c(!o)},g=async v=>{c(!1);let w={};v==="in_progress"?w={status:"in_progress"}:v==="done"?w={status:"done"}:v==="assign_to_me"&&a&&(w={assignee_id:a});try{await d.mutateAsync({id:e.id,data:w}),i&&u.invalidateQueries({queryKey:["project-overview",i]})}catch{}},f=e.status!=="in_progress"&&e.status!=="done"&&e.status!=="completed"&&e.status!=="canceled"&&e.status!=="cancelled",x=e.status!=="done"&&e.status!=="completed"&&e.status!=="canceled"&&e.status!=="cancelled",y=a&&e.assignee?.id!==a;return n.jsxs("li",{className:"text-xs cursor-pointer hover:bg-[var(--muted-surface)] rounded px-2 py-1 flex flex-col gap-0.5 relative",onClick:h,children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("span",{className:"font-medium line-clamp-1 flex-1",children:e.name}),n.jsxs("div",{className:"flex items-center gap-1",children:[e.priority&&n.jsx("span",{className:`text-[10px] uppercase px-1.5 py-0.5 rounded-full ${t}`,children:e.priority}),r&&n.jsxs("div",{className:"relative",ref:l,children:[n.jsx("button",{type:"button",className:"task-menu-button p-0.5 hover:bg-[var(--muted-surface)] rounded text-[var(--muted)] hover:text-[var(--text)] transition-colors",onClick:m,"aria-label":"Task actions","aria-expanded":o,children:n.jsx("span",{className:"text-sm",children:"⋯"})}),o&&n.jsxs("div",{className:"task-menu absolute right-0 top-full mt-1 z-50 min-w-[160px] bg-[var(--surface)] border border-[var(--border)] rounded-lg shadow-lg py-1",role:"menu",onClick:v=>v.stopPropagation(),children:[f&&n.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 text-xs hover:bg-[var(--muted-surface)] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>g("in_progress"),disabled:d.isPending,children:d.isPending?"Đang cập nhật...":"Chuyển sang đang làm"}),x&&n.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 text-xs hover:bg-[var(--muted-surface)] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>g("done"),disabled:d.isPending,children:d.isPending?"Đang cập nhật...":"Đánh dấu đã xong"}),y&&n.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 text-xs hover:bg-[var(--muted-surface)] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>g("assign_to_me"),disabled:d.isPending,children:d.isPending?"Đang cập nhật...":"Giao cho tôi"}),n.jsx("div",{className:"border-t border-[var(--border)] my-1"}),n.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 text-xs hover:bg-[var(--muted-surface)] transition-colors",onClick:()=>s(e.id),children:"Xem chi tiết"})]})]})]})]}),n.jsxs("div",{className:"flex items-center justify-between text-[11px] text-[var(--muted)]",children:[n.jsxs("span",{children:["Hạn: ",e.end_date??"—"]}),e.assignee&&n.jsxs("span",{children:["Assignee: ",e.assignee.name]})]}),d.isError&&n.jsx("p",{className:"mt-1 text-[10px] text-[var(--color-semantic-danger-600)]",children:"Không cập nhật được task, vui lòng thử lại."})]})},E2=()=>{const{id:e}=Ku(),t=Vs(),{user:s}=Ve(),r=Ve(P=>(P.currentTenantPermissions??[]).includes("tenant.manage_tasks")),a=Ve(P=>(P.currentTenantPermissions??[]).includes("tenant.create_tasks")),i=Ve(P=>(P.currentTenantPermissions??[]).includes("tenant.view_reports"));Z.useEffect(()=>{},[r,a]);const[o,c]=p.useState("overview"),[l,u]=p.useState(!1),[d,h]=p.useState(!1),[m,g]=p.useState(!1),[f,x]=p.useState(!1),[y,v]=p.useState(""),[w,j]=p.useState(null),[N,T]=p.useState(""),[O,D]=p.useState(""),[k,z]=p.useState("general");Z.useEffect(()=>{},[e]);const{data:ne,isLoading:ue,error:te,refetch:re}=Y_(e),{data:V,isLoading:S,error:E}=J_(20),{data:Q,isLoading:_e}=i2(e),{data:Ae,isLoading:rt}=o2(e),{data:R,isLoading:Ee,error:nt}=c2(e),gt=G_(),Wr=s2(),{data:ar,isLoading:zr,refetch:Kr}=e2(e,{},{page:1,per_page:50}),{data:bs,isLoading:Hr,refetch:$n}=t2(e,{},{page:1,per_page:50}),{data:ws}=C2(void 0,{per_page:1e3}),ni=T2(),js=r2(),ir=n2(),Is=a2(),oe=ne?.data,kt=R?.data?.project?.id??e??null,Bn=Z.useMemo(()=>{if(!Q?.data)return[];const P=Q.data;return[{label:"Total Tasks",value:P.total_tasks||0,variant:"default"},{label:"Completed Tasks",value:P.completed_tasks||0,variant:"success"},{label:"Team Members",value:P.team_members||0,variant:"info"},{label:"Documents",value:P.documents_count||0,variant:"default"},{label:"Progress",value:`${P.progress_percentage||0}%`,variant:P.progress_percentage>=80?"success":P.progress_percentage>=50?"info":"warning"}]},[Q]),b=Z.useMemo(()=>Ae?.data?Ae.data.map(P=>({id:P.id,message:P.message,type:P.type||"warning",priority:P.priority||5,created_at:P.created_at,metadata:P.metadata})):[],[Ae]),_=p.useCallback(P=>{},[]),A=p.useCallback(()=>{},[]),U=Z.useMemo(()=>{const P=Array.isArray(ws?.data)?ws.data:[],q=Array.isArray(oe?.users)?oe.users:[];if(!Array.isArray(P)||q.length===0)return P;const at=new Set(q.map(xt=>String(xt.id)));return P.filter(xt=>!at.has(String(xt.id)))},[ws,oe?.users]),L=p.useCallback(()=>{t(`/app/projects/${e}/edit`)},[t,e]),F=p.useCallback(async()=>{if(e)try{await gt.mutateAsync(e),t("/app/projects")}catch(P){if(P?.response?.status===409||P?.status===409){const q=P?.response?.data?.message||P?.message||"Không thể xoá dự án vì vẫn còn công việc đang tồn tại. Vui lòng xoá hoặc hoàn thành tất cả công việc trước khi xoá dự án.";alert(q)}else alert("Không thể xoá dự án. Vui lòng thử lại sau.")}finally{u(!1)}},[e,gt,t]),X=p.useCallback(async()=>{if(e&&confirm(`Are you sure you want to archive "${oe?.name}"?`))try{await Wr.mutateAsync(e)}catch{alert("Failed to archive project. Please try again.")}},[e,oe,Wr]),xe=p.useCallback(async()=>{if(!(!e||!y))try{await js.mutateAsync({projectId:e,userId:y}),h(!1),v(""),re()}catch(P){alert(P?.response?.data?.error?.message||"Failed to add team member. Please try again.")}},[e,y,js,re]),Te=p.useCallback(async P=>{if(e&&confirm("Are you sure you want to remove this team member?"))try{await ir.mutateAsync({projectId:e,userId:P}),re()}catch(q){alert(q?.response?.data?.error?.message||"Failed to remove team member. Please try again.")}},[e,ir,re]),lt=p.useCallback(P=>{const q=P.target.files?.[0];q&&(j(q),N||T(q.name))},[N]),or=p.useCallback(async()=>{if(!(!e||!w))try{await Is.mutateAsync({projectId:e,file:w,data:{name:N||w.name,description:O||void 0,category:k||"general"}}),g(!1),j(null),T(""),D(""),z("general"),$n()}catch(P){alert(P?.response?.data?.error?.message||"Failed to upload document. Please try again.")}},[e,w,N,O,k,Is,$n]),Xt=Z.useMemo(()=>V?.data?Array.isArray(V.data)?V.data.filter(P=>P.project_id===e||P.metadata?.project_id===e).map(P=>({id:P.id,type:P.type||"project",action:P.action,description:P.description||P.message||"Activity",timestamp:P.timestamp||P.created_at||P.createdAt,user:P.user,metadata:P.metadata})):[]:[],[V,e]);return ue?n.jsx(sa,{children:n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-[var(--muted-surface)] rounded w-1/3 mb-4"}),n.jsx("div",{className:"h-4 bg-[var(--muted-surface)] rounded w-1/2"})]})})}):te?n.jsx(sa,{children:n.jsx(J,{children:n.jsx(ee,{className:"py-8",children:n.jsxs("div",{className:"text-center",children:[n.jsxs("p",{className:"text-[var(--muted)] mb-4",children:["Error loading project: ",te.message]}),n.jsxs("div",{className:"flex gap-3 justify-center",children:[n.jsx(we,{variant:"secondary",onClick:()=>t("/app/projects"),children:"Back to Projects"}),n.jsx(we,{variant:"primary",onClick:()=>re(),children:"Retry"})]})]})})})}):oe?n.jsx(x2,{children:n.jsxs(sa,{children:[n.jsxs("div",{className:"space-y-6","data-testid":"project-detail-page","data-can-manage-tasks":String(r),"data-active-tab":o,children:[n.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h1",{className:"text-[var(--font-heading-3-size)] font-semibold text-[var(--text)]",children:oe.name}),n.jsx("span",{className:`text-xs px-2 py-1 rounded ${oe.status==="active"?"bg-green-100 text-green-700":oe.status==="completed"?"bg-gray-100 text-gray-700":oe.status==="on_hold"?"bg-yellow-100 text-yellow-700":oe.status==="planning"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-500"}`,children:oe.status})]}),oe.description&&n.jsx("p",{className:"text-[var(--font-body-size)] text-[var(--muted)]",children:oe.description})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(we,{variant:"secondary",onClick:L,children:"Edit"}),n.jsx(we,{variant:"secondary",onClick:X,children:"Archive"}),n.jsx(we,{variant:"secondary",onClick:()=>u(!0),style:{color:"var(--color-semantic-danger-600)"},children:"Delete"})]})]}),n.jsx(Zf,{kpis:Bn,loading:_e,columns:5}),n.jsx(Xf,{alerts:b,loading:rt,onDismiss:_,onDismissAll:A,maxDisplay:3}),l&&n.jsx(J,{style:{borderColor:"var(--color-semantic-danger-200)"},children:n.jsxs(ee,{className:"py-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-[var(--text)] mb-2",children:"Delete Project?"}),n.jsxs("p",{className:"text-sm text-[var(--muted)] mb-4",children:['Are you sure you want to delete "',oe.name,'"? This action cannot be undone.']}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(we,{variant:"secondary",onClick:()=>u(!1),disabled:gt.isPending,children:"Cancel"}),n.jsx(we,{onClick:F,disabled:gt.isPending,style:{backgroundColor:"var(--color-semantic-danger-600)"},children:gt.isPending?"Deleting...":"Delete"})]})]})}),n.jsx("div",{className:"border-b border-[var(--border)]",children:n.jsx("div",{className:"flex items-center gap-1 overflow-x-auto",children:P2.map(P=>n.jsxs("button",{"data-testid":`project-tab-${P.id}`,onClick:()=>c(P.id),className:`px-4 py-2 text-sm font-medium transition-colors whitespace-nowrap border-b-2 ${o===P.id?"border-[var(--accent)] text-[var(--accent)]":"border-transparent text-[var(--muted)] hover:text-[var(--text)]"}`,"aria-pressed":o===P.id,"aria-label":P.label,children:[P.icon&&n.jsx("span",{className:"mr-2",children:P.icon}),P.label]},P.id))})}),n.jsxs("div",{children:[o==="overview"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.jsxs(J,{children:[n.jsx(ye,{children:n.jsx(ve,{children:"Project Information"})}),n.jsxs(ee,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-[var(--muted)]",children:"Project Name"}),n.jsx("p",{className:"text-[var(--text)] mt-1",children:oe.name})]}),oe.code&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-[var(--muted)]",children:"Project Code"}),n.jsx("p",{className:"text-[var(--text)] mt-1",children:oe.code})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-[var(--muted)]",children:"Status"}),n.jsx("p",{className:"text-[var(--text)] mt-1 capitalize",children:oe.status})]}),oe.priority&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-[var(--muted)]",children:"Priority"}),n.jsx("p",{className:"text-[var(--text)] mt-1 capitalize",children:oe.priority})]}),oe.client&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-[var(--muted)]",children:"Client"}),n.jsx("p",{className:"text-[var(--text)] mt-1",children:oe.client?.name||"No client assigned"})]}),oe.owner&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-[var(--muted)]",children:"Project Manager"}),n.jsx("p",{className:"text-[var(--text)] mt-1",children:oe.owner?.name||"No manager assigned"})]}),oe.start_date&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-[var(--muted)]",children:"Start Date"}),n.jsx("p",{className:"text-[var(--text)] mt-1",children:new Date(oe.start_date).toLocaleDateString()})]}),oe.end_date&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-[var(--muted)]",children:"End Date"}),n.jsx("p",{className:"text-[var(--text)] mt-1",children:new Date(oe.end_date).toLocaleDateString()})]}),oe.budget_total&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-[var(--muted)]",children:"Total Budget"}),n.jsxs("p",{className:"text-[var(--text)] mt-1",children:["$",oe.budget_total.toLocaleString()]})]})]}),oe.description&&n.jsxs("div",{className:"mt-6",children:[n.jsx("label",{className:"text-sm font-medium text-[var(--muted)] mb-2 block",children:"Description"}),n.jsx("p",{className:"text-[var(--text)] whitespace-pre-wrap",children:oe.description})]})]})]}),n.jsxs(J,{children:[n.jsx(ye,{children:n.jsx(ve,{children:"Project Progress"})}),n.jsxs(ee,{children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex justify-between text-sm text-[var(--muted)] mb-2",children:[n.jsx("span",{children:"Overall Progress"}),n.jsxs("span",{className:"font-semibold text-[var(--text)]",children:[Q?.data?.progress_percentage||0,"%"]})]}),n.jsx("div",{className:"w-full bg-[var(--muted-surface)] rounded-full h-3",children:n.jsx("div",{className:"bg-[var(--accent)] h-3 rounded-full transition-all duration-300",style:{width:`${Q?.data?.progress_percentage||0}%`}})})]}),n.jsxs("div",{className:"flex flex-wrap gap-3 mt-6",children:[oe.status!=="active"&&n.jsx(we,{variant:"secondary",onClick:async()=>{},children:"Start Project"}),oe.status==="active"&&n.jsx(we,{variant:"secondary",onClick:async()=>{},children:"Pause Project"}),oe.status!=="completed"&&n.jsx(we,{variant:"secondary",onClick:async()=>{},children:"Complete Project"})]})]})]})]}),n.jsx("div",{className:"space-y-6",children:n.jsxs(J,{children:[n.jsx(ye,{children:n.jsx(ve,{children:"Project Stats"})}),n.jsx(ee,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-[var(--muted)]",children:"Total Tasks"}),n.jsx("span",{className:"text-sm font-semibold text-[var(--text)]",children:Q?.data?.total_tasks||0})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-[var(--muted)]",children:"Completed Tasks"}),n.jsx("span",{className:"text-sm font-semibold text-[var(--text)]",children:Q?.data?.completed_tasks||0})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-[var(--muted)]",children:"Team Members"}),n.jsx("span",{className:"text-sm font-semibold text-[var(--text)]",children:Q?.data?.team_members||0})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-[var(--muted)]",children:"Documents"}),n.jsx("span",{className:"text-sm font-semibold text-[var(--text)]",children:Q?.data?.documents_count||0})]})]})})]})})]}),!Ee&&!nt&&R?.data?.health&&n.jsxs(J,{className:"mt-6",children:[n.jsx(ye,{children:n.jsx(ve,{children:"Sức khỏe dự án"})}),n.jsx(ee,{children:(()=>{const P=R.data.health,at=(Qr=>{const Gt=Gf(Qr);switch(Qr){case"good":return{label:Gt,className:"bg-green-100 text-green-700"};case"warning":return{label:Gt,className:"bg-yellow-100 text-yellow-700"};case"critical":return{label:Gt,className:"bg-red-100 text-red-700"};default:return{label:Gt,className:"bg-gray-100 text-gray-700"}}})(P.overall_status),Ft=(Qr=>{const Gt=Jf(Qr);switch(Qr){case"on_track":return{text:Gt,className:"text-green-700"};case"at_risk":return{text:Gt,className:"text-yellow-700"};case"delayed":return{text:Gt,className:"text-red-700"};case"no_tasks":return{text:Gt,className:"text-slate-500"};default:return{text:Gt,className:"text-gray-700"}}})(P.schedule_status),_t=kt&&(P.schedule_status==="delayed"||P.schedule_status==="at_risk"),Yt=kt&&(P.cost_status==="over_budget"||P.cost_status==="at_risk");return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm font-medium text-[var(--muted)]",children:"Trạng thái tổng thể:"}),n.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${at.className}`,children:at.label})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"text-sm text-[var(--muted)]",children:[n.jsx("span",{className:"font-medium",children:"Tiến độ & task:"})," ",P.tasks_completion_rate!==null?n.jsxs(n.Fragment,{children:["Hoàn thành: ",n.jsxs("span",{className:"font-semibold text-[var(--text)]",children:[Math.round(P.tasks_completion_rate*100),"%"]})]}):n.jsxs(n.Fragment,{children:["Hoàn thành: ",n.jsx("span",{className:"font-semibold text-[var(--muted)]",children:"—"})]})," · ",P.blocked_tasks_ratio!==null?n.jsxs(n.Fragment,{children:["Blocked: ",n.jsxs("span",{className:"font-semibold text-[var(--text)]",children:[Math.round(P.blocked_tasks_ratio*100),"%"]})]}):n.jsxs(n.Fragment,{children:["Blocked: ",n.jsx("span",{className:"font-semibold text-[var(--muted)]",children:"—"})]})," · ","Task quá hạn: ",n.jsx("span",{className:"font-semibold text-[var(--text)]",children:P.overdue_tasks})]}),n.jsxs("div",{className:"text-sm",children:[n.jsx("span",{className:"font-medium text-[var(--muted)]",children:"Tiến độ:"})," ",n.jsx("span",{className:`font-semibold ${Ft.className}`,children:Ft.text}),_t&&n.jsxs(n.Fragment,{children:[" · ",n.jsx("button",{type:"button",onClick:()=>t(`/app/tasks?project_id=${kt}`),className:"text-xs text-[var(--color-primary-600)] hover:underline",children:"Xem danh sách task quá hạn / sắp đến hạn"})]})]})]}),n.jsxs("div",{className:"text-sm",children:[n.jsx("span",{className:"font-medium text-[var(--muted)]",children:"Chi phí:"})," ",n.jsx("span",{className:"font-semibold text-[var(--text)]",children:ep(P.cost_status)}),P.cost_overrun_percent!==null&&P.cost_overrun_percent>0&&n.jsxs(n.Fragment,{children:[" · ",n.jsxs("span",{className:"text-[var(--color-semantic-danger-600)]",children:["Overrun: ",P.cost_overrun_percent.toFixed(P.cost_overrun_percent>=10?0:1),"%"]})]}),Yt&&n.jsxs(n.Fragment,{children:[" · ",n.jsx("button",{type:"button",onClick:()=>t(`/app/reports/portfolio/projects?project_id=${kt}`),className:"text-xs text-[var(--color-primary-600)] hover:underline",children:"Xem chi tiết chi phí dự án"})]})]})]})})()})]}),kt&&n.jsx(k2,{projectId:kt,canViewReports:i}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-3 mt-6",children:[n.jsxs(J,{children:[n.jsxs(ye,{children:[n.jsx(ve,{children:"Tiến độ công việc"}),n.jsx("p",{className:"text-sm text-[var(--muted)] mt-1",children:"Tổng quan task trong dự án"})]}),n.jsxs(ee,{children:[Ee&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"h-4 bg-[var(--muted-surface)] rounded animate-pulse"}),n.jsx("div",{className:"h-4 bg-[var(--muted-surface)] rounded animate-pulse"})]}),nt&&n.jsx("div",{className:"text-sm text-[var(--color-semantic-danger-600)]",children:"Không tải được tổng quan công việc"}),R?.data&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"text-sm text-[var(--muted)]",children:["Tổng task: ",n.jsx("span",{className:"font-semibold text-[var(--text)]",children:R.data.tasks.total})]}),n.jsxs("ul",{className:"text-sm grid grid-cols-2 gap-y-1",children:[n.jsxs("li",{children:["Backlog: ",n.jsx("span",{className:"font-semibold",children:R.data.tasks.by_status.backlog??0})]}),n.jsxs("li",{children:["Đang làm: ",n.jsx("span",{className:"font-semibold",children:R.data.tasks.by_status.in_progress??0})]}),n.jsxs("li",{children:["Bị chặn: ",n.jsx("span",{className:"font-semibold text-[var(--color-semantic-danger-600)]",children:R.data.tasks.by_status.blocked??0})]}),n.jsxs("li",{children:["Hoàn thành: ",n.jsx("span",{className:"font-semibold text-[var(--color-semantic-success-600)]",children:R.data.tasks.by_status.done??0})]}),n.jsxs("li",{children:["Hủy: ",n.jsx("span",{className:"font-semibold text-[var(--muted)]",children:R.data.tasks.by_status.canceled??0})]})]}),n.jsxs("div",{className:"mt-3 text-sm space-y-1",children:[n.jsxs("div",{children:["Quá hạn:"," ",n.jsx("span",{className:"font-semibold text-[var(--color-semantic-danger-600)]",children:R.data.tasks.overdue})]}),n.jsxs("div",{children:["Sắp đến hạn (3 ngày):"," ",n.jsx("span",{className:"font-semibold text-[var(--color-semantic-warning-600)]",children:R.data.tasks.due_soon})]})]})]}),kt&&R?.data&&n.jsx("div",{className:"mt-4 pt-3 border-t border-[var(--border)]",children:n.jsx("button",{type:"button",onClick:()=>t(`/app/tasks?project_id=${kt}`),className:"text-xs text-[var(--color-primary-600)] hover:underline",children:"Xem bảng task chi tiết"})})]})]}),n.jsxs(J,{className:"md:col-span-1 xl:col-span-2",children:[n.jsxs(ye,{children:[n.jsx(ve,{children:"Tài chính dự án"}),n.jsx("p",{className:"text-sm text-[var(--muted)] mt-1",children:"Hợp đồng, ngân sách, chi phí & overrun"})]}),n.jsxs(ee,{children:[Ee&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"h-4 bg-[var(--muted-surface)] rounded animate-pulse"}),n.jsx("div",{className:"h-4 bg-[var(--muted-surface)] rounded animate-pulse"})]}),nt&&n.jsx("div",{className:"text-sm text-[var(--color-semantic-danger-600)]",children:"Không tải được tổng quan tài chính"}),R?.data&&n.jsxs(n.Fragment,{children:[!R.data.financials.has_financial_data&&n.jsx("div",{className:"text-sm text-[var(--muted)]",children:"Chưa có dữ liệu hợp đồng cho dự án này."}),R.data.financials.has_financial_data&&n.jsxs("div",{className:"grid gap-3 md:grid-cols-2 xl:grid-cols-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-[var(--muted)] mb-1",children:"Số hợp đồng"}),n.jsx("div",{className:"text-lg font-semibold text-[var(--text)]",children:R.data.financials.contracts_count})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-[var(--muted)] mb-1",children:"Giá trị hợp đồng"}),n.jsx(ra,{value:R.data.financials.contracts_value_total??null,currency:R.data.financials.currency??void 0,fallback:"-",tone:"normal"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-[var(--muted)] mb-1",children:"Ngân sách"}),n.jsx(ra,{value:R.data.financials.budget_total??null,currency:R.data.financials.currency??void 0,fallback:"-",tone:"normal"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-[var(--muted)] mb-1",children:"Chi phí thực tế"}),n.jsx(ra,{value:R.data.financials.actual_total??null,currency:R.data.financials.currency??void 0,fallback:"-",tone:"normal"})]}),n.jsxs("div",{className:"md:col-span-2 xl:col-span-2",children:[n.jsx("div",{className:"text-[var(--muted)] mb-1",children:"Overrun (Actual – Contract)"}),n.jsx(ra,{value:R.data.financials.overrun_amount_total??null,currency:R.data.financials.currency??void 0,fallback:"-",showPlusWhenPositive:!0,tone:R.data.financials.overrun_amount_total&&R.data.financials.overrun_amount_total>0?"danger":"muted"}),n.jsxs("div",{className:"mt-1 text-xs text-[var(--muted)]",children:["Hợp đồng vượt ngân sách: ",R.data.financials.over_budget_contracts_count," | Hợp đồng bị overrun: ",R.data.financials.overrun_contracts_count]})]})]}),kt&&n.jsxs("div",{className:"mt-4 pt-3 border-t border-[var(--border)] space-y-2",children:[R.data.financials.has_financial_data&&n.jsx("div",{children:n.jsx("button",{type:"button",onClick:()=>t(`/app/reports/portfolio/projects?project_id=${kt}`),className:"text-sm font-medium text-[var(--color-primary-600)] hover:underline",children:"Xem báo cáo chi tiết chi phí"})}),R.data.financials.has_financial_data&&R.data.financials.overrun_amount_total&&R.data.financials.overrun_amount_total>0&&n.jsx("div",{children:n.jsx("button",{type:"button",onClick:()=>t(`/app/reports/cost-overruns?project_id=${kt}`),className:"text-xs text-[var(--color-semantic-danger-600)] hover:underline",children:"Xem chi tiết hợp đồng vượt chi phí"})})]})]})]})]})]}),n.jsxs(J,{className:"mt-4",children:[n.jsxs(ye,{children:[n.jsx(ve,{children:"Task quan trọng cần xử lý"}),n.jsx("p",{className:"text-sm text-[var(--muted)] mt-1",children:"Overdue, sắp đến hạn và đang bị chặn trong dự án này"})]}),n.jsxs(ee,{children:[Ee&&n.jsxs("div",{className:"space-y-3 animate-pulse",children:[n.jsx("div",{className:"h-20 bg-[var(--muted-surface)] rounded"}),n.jsx("div",{className:"h-20 bg-[var(--muted-surface)] rounded"}),n.jsx("div",{className:"h-20 bg-[var(--muted-surface)] rounded"})]}),!Ee&&nt&&n.jsx("p",{className:"text-sm text-[var(--color-semantic-danger-600)]",children:"Không tải được danh sách task quan trọng."}),!Ee&&!nt&&R?.data&&(()=>{const q=R?.data?.tasks?.key_tasks??{overdue:[],due_soon:[],blocked:[]},at=q.overdue??[],xt=q.due_soon??[],Ft=q.blocked??[];return n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"font-semibold text-[var(--color-semantic-danger-600)]",children:"Overdue"}),n.jsxs("span",{className:"text-xs text-[var(--muted)]",children:[at.length," task"]})]}),at.length===0?n.jsx("p",{className:"text-xs text-[var(--muted)]",children:"Không có task quá hạn nào 🎉"}):n.jsx("ul",{className:"space-y-2",children:at.map(_t=>n.jsx(Oi,{task:_t,priorityColorClass:"bg-red-100 text-red-700",onNavigate:Yt=>t(`/app/tasks/${Yt}`),canManageTasks:r,currentUserId:s?.id,projectId:e},_t.id))})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"font-semibold text-[var(--color-semantic-warning-600)]",children:"Sắp đến hạn (≤ 3 ngày)"}),n.jsxs("span",{className:"text-xs text-[var(--muted)]",children:[xt.length," task"]})]}),xt.length===0?n.jsx("p",{className:"text-xs text-[var(--muted)]",children:"Không có task sắp đến hạn nào 🎉"}):n.jsx("ul",{className:"space-y-2",children:xt.map(_t=>n.jsx(Oi,{task:_t,priorityColorClass:"bg-orange-100 text-orange-700",onNavigate:Yt=>t(`/app/tasks/${Yt}`),canManageTasks:r,currentUserId:s?.id,projectId:e},_t.id))})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"font-semibold text-[var(--muted)]",children:"Đang bị chặn (blocked)"}),n.jsxs("span",{className:"text-xs text-[var(--muted)]",children:[Ft.length," task"]})]}),Ft.length===0?n.jsx("p",{className:"text-xs text-[var(--muted)]",children:"Không có task bị chặn nào 🎉"}):n.jsx("ul",{className:"space-y-2",children:Ft.map(_t=>n.jsx(Oi,{task:_t,priorityColorClass:"bg-purple-100 text-purple-700",onNavigate:Yt=>t(`/app/tasks/${Yt}`),canManageTasks:r,currentUserId:s?.id,projectId:e},_t.id))})]})]})})()]})]})]}),o==="tasks"&&n.jsx("div",{"data-testid":"project-tasks-panel",children:n.jsxs(J,{children:[n.jsx(ye,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(ve,{children:["Tasks",(()=>{const P=Array.isArray(ar?.data)?ar.data:[];return P.length>0&&n.jsxs("span",{className:"ml-2 text-sm font-normal text-[var(--muted)]",children:["(",P.length,")"]})})()]}),n.jsxs("div",{className:"flex items-center gap-2",children:[r&&n.jsx(we,{"data-testid":"apply-template-button",variant:"secondary",size:"sm",onClick:()=>x(!0),children:"Áp dụng mẫu công việc"}),(r||a)&&n.jsx(we,{variant:"secondary",size:"sm",onClick:()=>t(`/app/tasks/create?project_id=${e}`),children:"Add Task"})]})]})}),n.jsx(ee,{children:zr?n.jsx("div",{className:"space-y-4",children:[1,2,3].map(P=>n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-4 bg-[var(--muted-surface)] rounded w-3/4 mb-2"}),n.jsx("div",{className:"h-3 bg-[var(--muted-surface)] rounded w-1/2"})]},P))}):(()=>{const P=Array.isArray(ar?.data)?ar.data:[];return P.length>0?n.jsx("div",{className:"space-y-3",children:P.map(q=>n.jsx("div",{className:"p-4 border border-[var(--border)] rounded-lg hover:bg-[var(--muted-surface)] transition-colors",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("h4",{className:"font-semibold text-[var(--text)] cursor-pointer hover:text-[var(--accent)]",onClick:()=>t(`/app/tasks/${q.id}`),children:q.title}),n.jsx("span",{className:`text-xs px-2 py-1 rounded ${q.status==="completed"?"bg-green-100 text-green-700":q.status==="in_progress"?"bg-blue-100 text-blue-700":q.status==="pending"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-500"}`,children:q.status.replace("_"," ")}),q.priority&&n.jsx("span",{className:`text-xs capitalize ${q.priority==="urgent"?"text-red-600 font-semibold":q.priority==="high"?"text-orange-600 font-medium":q.priority==="medium"?"text-yellow-600":"text-gray-500"}`,children:q.priority})]}),q.description&&n.jsx("p",{className:"text-sm text-[var(--muted)] mb-2 line-clamp-2",children:q.description}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-[var(--muted)]",children:[q.due_date&&n.jsxs("span",{children:["Due: ",new Date(q.due_date).toLocaleDateString()]}),q.assignee_id&&(()=>{const xt=(Array.isArray(ws?.data)?ws.data:[]).find(Ft=>Ft.id===q.assignee_id);return xt&&n.jsxs("span",{children:["Assigned to: ",xt.name||"Unknown"]})})()]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[n.jsx(we,{variant:"tertiary",size:"sm",onClick:()=>t(`/app/tasks/${q.id}/edit`),children:"Edit"}),n.jsx(we,{variant:"tertiary",size:"sm",onClick:async()=>{if(confirm(`Are you sure you want to delete task "${q.title}"?`))try{await ni.mutateAsync(q.id),Kr()}catch{alert("Failed to delete task. Please try again.")}},style:{color:"var(--color-semantic-danger-600)"},children:"Delete"})]})]})},q.id))}):n.jsxs("div",{className:"text-center py-8 text-[var(--muted)]",children:[n.jsx("p",{className:"text-sm mb-2",children:"No tasks found for this project"}),n.jsx(we,{variant:"secondary",size:"sm",onClick:()=>t(`/app/tasks/create?project_id=${e}`),children:"Create First Task"})]})})()})]})}),o==="documents"&&n.jsxs(J,{children:[n.jsx(ye,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(ve,{children:["Documents",(()=>{const P=Array.isArray(bs?.data)?bs.data:[];return P.length>0&&n.jsxs("span",{className:"ml-2 text-sm font-normal text-[var(--muted)]",children:["(",P.length,")"]})})()]}),n.jsx(we,{variant:"secondary",size:"sm",onClick:()=>g(!0),children:"Upload Document"})]})}),n.jsx(ee,{children:Hr?n.jsx("div",{className:"space-y-4",children:[1,2,3].map(P=>n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-4 bg-[var(--muted-surface)] rounded w-3/4 mb-2"}),n.jsx("div",{className:"h-3 bg-[var(--muted-surface)] rounded w-1/2"})]},P))}):(()=>{const P=Array.isArray(bs?.data)?bs.data:[];return P.length>0?n.jsx("div",{className:"space-y-3",children:P.map(q=>n.jsx("div",{className:"p-4 border border-[var(--border)] rounded-lg hover:bg-[var(--muted-surface)] transition-colors",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[n.jsx("div",{className:"text-2xl",children:"📄"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-semibold text-[var(--text)]",children:q.name||q.title||"Untitled Document"}),q.description&&n.jsx("p",{className:"text-sm text-[var(--muted)] mt-1 line-clamp-1",children:q.description}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-[var(--muted)] mt-2",children:[q.file_type&&n.jsxs("span",{children:["Type: ",q.file_type]}),q.file_size&&n.jsxs("span",{children:["Size: ",q.file_size]}),q.created_at&&n.jsxs("span",{children:["Uploaded: ",new Date(q.created_at).toLocaleDateString()]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[q.url&&n.jsx(we,{variant:"tertiary",size:"sm",onClick:()=>window.open(q.url,"_blank"),children:"View"}),q.download_url&&n.jsx(we,{variant:"tertiary",size:"sm",onClick:()=>window.open(q.download_url,"_blank"),children:"Download"})]})]})},q.id))}):n.jsxs("div",{className:"text-center py-8 text-[var(--muted)]",children:[n.jsx("p",{className:"text-sm mb-2",children:"No documents found for this project"}),n.jsx(we,{variant:"secondary",size:"sm",onClick:()=>g(!0),children:"Upload First Document"})]})})()})]}),o==="team"&&n.jsxs(n.Fragment,{children:[n.jsxs(J,{children:[n.jsx(ye,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(ve,{children:["Team Members",(()=>{const P=Array.isArray(oe?.users)?oe.users:[];return P.length>0&&n.jsxs("span",{className:"ml-2 text-sm font-normal text-[var(--muted)]",children:["(",P.length,")"]})})()]}),Ve(P=>(P.currentTenantPermissions??[]).includes("tenant.manage_projects"))&&n.jsx(we,{variant:"secondary",size:"sm",onClick:()=>h(!0),disabled:!Array.isArray(U)||U.length===0,children:"Add Member"})]})}),n.jsx(ee,{children:(()=>{const P=Array.isArray(oe?.users)?oe.users:[];return P.length>0?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:P.map(q=>n.jsx("div",{className:"p-4 border border-[var(--border)] rounded-lg hover:bg-[var(--muted-surface)] transition-colors",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-[var(--primary-button-bg)] flex items-center justify-center text-[var(--primary-button-text)] font-semibold flex-shrink-0",children:q.name.charAt(0).toUpperCase()}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-semibold text-[var(--text)] truncate",children:q.name}),n.jsx("p",{className:"text-sm text-[var(--muted)] truncate",children:q.email}),q.role&&n.jsx("span",{className:"text-xs text-[var(--muted)] capitalize mt-1 inline-block",children:q.role})]})]}),n.jsx(we,{variant:"tertiary",size:"sm",onClick:()=>Te(q.id),disabled:ir.isPending,style:{color:"var(--color-semantic-danger-600)",marginLeft:"8px"},children:"Remove"})]})},q.id))}):n.jsxs("div",{className:"text-center py-8 text-[var(--muted)]",children:[n.jsx("p",{className:"text-sm mb-2",children:"No team members found"}),n.jsx(we,{variant:"secondary",size:"sm",onClick:()=>h(!0),disabled:!Array.isArray(U)||U.length===0,children:"Add First Member"})]})})()})]}),d&&n.jsxs(J,{style:{borderColor:"var(--accent)"},children:[n.jsx(ye,{children:n.jsx(ve,{children:"Add Team Member"})}),n.jsxs(ee,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"user-select",className:"block text-sm font-medium text-[var(--text)] mb-2",children:"Select User"}),n.jsxs("select",{id:"user-select",value:y,onChange:P=>v(P.target.value),className:"w-full px-3 py-2 border border-[var(--border)] rounded-lg focus:ring-2 focus:ring-[var(--accent)] focus:border-[var(--accent)] outline-none",style:{backgroundColor:"var(--surface)",color:"var(--text)",height:"40px"},children:[n.jsx("option",{value:"",children:"Select a user..."}),Array.isArray(U)&&U.map(P=>n.jsxs("option",{value:P.id,children:[P.name," (",P.email,")"]},P.id))]})]}),n.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-[var(--border)]",children:[n.jsx(we,{type:"button",variant:"secondary",onClick:()=>{h(!1),v("")},disabled:js.isPending,children:"Cancel"}),n.jsx(we,{type:"button",onClick:xe,disabled:js.isPending||!y,children:js.isPending?"Adding...":"Add Member"})]})]})]})]}),m&&n.jsxs(J,{style:{borderColor:"var(--accent)"},children:[n.jsx(ye,{children:n.jsx(ve,{children:"Upload Document"})}),n.jsxs(ee,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"file-input",className:"block text-sm font-medium text-[var(--text)] mb-2",children:["File ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{id:"file-input",type:"file",onChange:lt,className:"w-full px-3 py-2 border border-[var(--border)] rounded-lg focus:ring-2 focus:ring-[var(--accent)] focus:border-[var(--accent)] outline-none",style:{backgroundColor:"var(--surface)",color:"var(--text)"},accept:".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.jpg,.jpeg,.png,.gif,.zip,.rar"}),w&&n.jsxs("p",{className:"mt-2 text-sm text-[var(--muted)]",children:["Selected: ",w.name," (",(w.size/1024/1024).toFixed(2)," MB)"]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"document-name",className:"block text-sm font-medium text-[var(--text)] mb-2",children:"Document Name"}),n.jsx(Hf,{id:"document-name",type:"text",value:N,onChange:P=>T(P.target.value),placeholder:"Enter document name"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"document-description",className:"block text-sm font-medium text-[var(--text)] mb-2",children:"Description"}),n.jsx("textarea",{id:"document-description",value:O,onChange:P=>D(P.target.value),placeholder:"Enter document description (optional)",rows:3,className:"w-full px-3 py-2 border border-[var(--border)] rounded-lg focus:ring-2 focus:ring-[var(--accent)] focus:border-[var(--accent)] outline-none resize-none",style:{backgroundColor:"var(--surface)",color:"var(--text)"}})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"document-category",className:"block text-sm font-medium text-[var(--text)] mb-2",children:"Category"}),n.jsxs("select",{id:"document-category",value:k,onChange:P=>z(P.target.value),className:"w-full px-3 py-2 border border-[var(--border)] rounded-lg focus:ring-2 focus:ring-[var(--accent)] focus:border-[var(--accent)] outline-none",style:{backgroundColor:"var(--surface)",color:"var(--text)",height:"40px"},children:[n.jsx("option",{value:"general",children:"General"}),n.jsx("option",{value:"contract",children:"Contract"}),n.jsx("option",{value:"drawing",children:"Drawing"}),n.jsx("option",{value:"specification",children:"Specification"}),n.jsx("option",{value:"report",children:"Report"}),n.jsx("option",{value:"other",children:"Other"})]})]}),n.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-[var(--border)]",children:[n.jsx(we,{type:"button",variant:"secondary",onClick:()=>{g(!1),j(null),T(""),D(""),z("general")},disabled:Is.isPending,children:"Cancel"}),n.jsx(we,{type:"button",onClick:or,disabled:Is.isPending||!w,children:Is.isPending?"Uploading...":"Upload Document"})]})]})]}),o==="activity"&&n.jsx(Qf,{activities:Xt,loading:S,error:E,title:"Project Activity",limit:20})]})]}),r&&e&&n.jsx(b2,{projectId:e,open:f,onOpenChange:x,onApplied:()=>{Kr(),re()}})]})}):n.jsx(sa,{children:n.jsx(J,{children:n.jsx(ee,{className:"py-8",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-[var(--muted)] mb-4",children:"Project not found"}),n.jsx(we,{variant:"secondary",onClick:()=>t("/app/projects"),children:"Back to Projects"})]})})})})},R2={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-full mx-4"},Do=({isOpen:e,onClose:t,title:s,children:r,size:a="md",closeOnBackdrop:i=!0,closeOnEscape:o=!0,className:c})=>{if(p.useEffect(()=>{if(!o)return;const u=d=>{d.key==="Escape"&&e&&t()};return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)},[e,t,o]),p.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),!e)return null;const l=n.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:i?t:void 0}),n.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:n.jsxs("div",{className:Pe("relative w-full bg-white rounded-lg shadow-xl transform transition-all",R2[a],c),onClick:u=>u.stopPropagation(),children:[s&&n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsx("div",{className:"p-6",children:r})]})})]});return zu.createPortal(l,document.body)},tn=e=>({id:e.id,name:e.name??e.title??"",filename:e.file_name??e.filename??"",original_filename:e.original_name??e.original_filename??e.name??"",mime_type:e.mime_type??e.file_type??"",size:e.file_size??e.size??0,path:e.file_path??e.path??"",url:e.url??e.path??"",project_id:e.project_id??e.project?.id,project_name:e.project?.name,uploaded_by:e.uploaded_by??e.uploader?.id,uploaded_by_name:e.uploader?.name??e.uploaded_by_name??"",uploaded_at:e.created_at??e.uploaded_at??"",updated_at:e.updated_at??"",tags:e.tags??[],description:e.description??"",version:e.version??e.currentVersion?.version_number??1,is_public:!!e.is_public,download_count:e.download_count??0,last_accessed_at:e.last_accessed_at}),Fi=e=>({id:Number(e.id),version:e.version??e.version_number??1,filename:e.filename??e.file_name??"",size:e.size??e.file_size??0,mime_type:e.mime_type??e.file_type??"",checksum:e.checksum??e.file_hash,uploaded_at:e.created_at??e.uploaded_at??"",uploaded_by:e.created_by??e.uploaded_by??e.user_id??0,uploaded_by_name:e.uploader?.name??e.uploaded_by_name??e.user_name??e.user?.name??"",change_description:e.change_description??e.comment,reverted_from_version:e.reverted_from_version??e.reverted_from_version_number}),Eu=e=>({id:String(e.id??e.event_id??`${Date.now()}`),action:e.action??e.event??"upload",actor_id:e.actor_id??e.user_id??0,actor_name:e.actor_name??e.user_name??"",metadata:e.metadata??e.payload??void 0,created_at:e.created_at??e.timestamp??new Date().toISOString()}),Ht={getDocuments:async(e={})=>{const t=new URLSearchParams;e.search&&t.append("search",e.search),e.project_id&&t.append("project_id",e.project_id.toString()),e.mime_type&&t.append("mime_type",e.mime_type),e.tags&&e.tags.length>0&&e.tags.forEach(l=>t.append("tags[]",l)),e.uploaded_by&&t.append("uploaded_by",e.uploaded_by.toString()),e.is_public!==void 0&&t.append("is_public",e.is_public.toString()),e.page&&t.append("page",e.page.toString()),e.per_page&&t.append("per_page",e.per_page.toString()),e.sort_by&&t.append("sort_by",e.sort_by),e.sort_order&&t.append("sort_order",e.sort_order);const r=(await $.get(`/api/v1/documents?${t.toString()}`)).data??{},a=Array.isArray(r.data?.documents)?r.data.documents:Array.isArray(r.data)?r.data:[],i=r.data?.pagination??{},o=i.current_page??1,c=i.last_page??o;return{data:a.map(tn),meta:{current_page:o,last_page:c,per_page:i.per_page??e.per_page??12,total:i.total??a.length},links:{first:i.first_page_url??"",last:i.last_page_url??"",prev:o>1?String(o-1):void 0,next:o<c?String(o+1):void 0}}},getDocument:async e=>{const t=await $.get(`/api/v1/documents/${e}`),s=t.data?.data??t.data??{};return{data:{...tn(s),versions:Array.isArray(s.versions)?s.versions.map(Fi):void 0,activity:Array.isArray(s.activity)?s.activity.map(Eu):void 0}}},uploadDocument:async e=>{const t=new FormData;t.append("file",e.file),e.project_id&&t.append("project_id",e.project_id.toString()),e.description&&t.append("description",e.description),e.tags&&e.tags.forEach(r=>t.append("tags[]",r)),e.is_public!==void 0&&t.append("is_public",e.is_public.toString());const s=await $.post("/api/v1/documents",t,{headers:{"Content-Type":"multipart/form-data"}});return{data:tn(s.data.data??s.data)}},updateDocument:async(e,t)=>{const s=await $.put(`/api/v1/documents/${e}`,t);return{data:tn(s.data.data??s.data)}},deleteDocument:async e=>{await $.delete(`/api/v1/documents/${e}`)},downloadDocument:async e=>(await $.get(`/api/v1/documents/${e}/download`,{responseType:"blob"})).data,downloadVersion:async(e,t)=>(await $.get(`/api/v1/documents/${e}/versions/${t}/download`,{responseType:"blob"})).data,getDocumentStats:async()=>{const e=await $.get("/api/v1/documents/stats");return{data:e.data.data??e.data}},getDocumentVersions:async e=>{const t=await $.get(`/api/v1/documents/${e}/versions`);return{data:(t.data?.data??t.data??[]).map(Fi)}},uploadNewVersion:async(e,t,s)=>{const r=new FormData;r.append("file",t),s&&r.append("change_description",s);const a=await $.post(`/api/v1/documents/${e}/versions`,r,{headers:{"Content-Type":"multipart/form-data"}});return{data:Fi(a.data?.data??a.data)}},getDocumentActivity:async e=>{const t=await $.get(`/api/v1/documents/${e}/activity`);return{data:(t.data?.data??t.data??[]).map(Eu)}},revertVersion:async(e,t,s)=>{const r=await $.post(`/api/v1/documents/${e}/revert`,{version_id:t,comment:s});return{data:tn(r.data.data??r.data)}},bulkDelete:async e=>{await $.post("/api/v1/documents/bulk-delete",{document_ids:e})},bulkUpdateTags:async(e,t)=>{await $.post("/api/v1/documents/bulk-update-tags",{document_ids:e,tags:t})},bulkUpdateVisibility:async(e,t)=>{await $.post("/api/v1/documents/bulk-update-visibility",{document_ids:e,is_public:t})}},qe={all:["documents"],lists:()=>[...qe.all,"list"],list:e=>[...qe.lists(),e],details:()=>[...qe.all,"detail"],detail:e=>[...qe.details(),e],stats:()=>[...qe.all,"stats"],versions:e=>[...qe.detail(e),"versions"]},D2=(e={})=>Ce({queryKey:qe.list(e),queryFn:()=>Ht.getDocuments(e),staleTime:3e4,retry:1}),M2=(e,t=!0)=>Ce({queryKey:qe.detail(e),queryFn:()=>Ht.getDocument(e),enabled:t&&!!e,staleTime:6e4,retry:1}),O2=(e,t=!0)=>Ce({queryKey:qe.versions(e),queryFn:()=>Ht.getDocumentVersions(e),enabled:t&&!!e,staleTime:6e4,retry:1}),F2=(e,t=!0)=>Ce({queryKey:[...qe.detail(e),"activity"],queryFn:()=>Ht.getDocumentActivity(e),enabled:t&&!!e,staleTime:6e4,retry:1}),L2=()=>{const e=fe();return ke({mutationFn:t=>Ht.uploadDocument(t),onSuccess:()=>{e.invalidateQueries({queryKey:qe.lists()}),e.invalidateQueries({queryKey:qe.stats()})}})},V2=()=>{const e=fe();return ke({mutationFn:t=>Ht.deleteDocument(t),onSuccess:()=>{e.invalidateQueries({queryKey:qe.lists()}),e.invalidateQueries({queryKey:qe.stats()})}})},U2=()=>ke({mutationFn:e=>Ht.downloadDocument(e)}),I2=()=>{const e=fe();return ke({mutationFn:({id:t,file:s,changeDescription:r})=>Ht.uploadNewVersion(t,s,r),onSuccess:(t,{id:s})=>{e.invalidateQueries({queryKey:qe.detail(s)}),e.invalidateQueries({queryKey:qe.versions(s)}),e.invalidateQueries({queryKey:qe.lists()})}})},$2=()=>{const e=fe();return ke({mutationFn:({id:t,versionId:s,comment:r})=>Ht.revertVersion(t,s,r),onSuccess:(t,{id:s})=>{e.invalidateQueries({queryKey:qe.detail(s)}),e.invalidateQueries({queryKey:qe.versions(s)}),e.invalidateQueries({queryKey:qe.lists()})}})};function sp(){const{user:e}=Xo(),t=Array.isArray(e?.roles)?e.roles.map(c=>typeof c=="string"?c:c?.name).filter(c=>!!c):[];return{hasRole:c=>t.includes(c),hasAnyRole:c=>c.some(l=>t.includes(l)),hasPermission:c=>e?.permissions?.includes?.(c)??!1,hasAnyPermission:c=>c.some(l=>e?.permissions?.includes?.(l))??!1,canAccess:(c,l)=>!(!e||c&&c.length>0&&!c.some(d=>t.includes(d))||l&&l.length>0&&!l.some(d=>e.permissions?.includes?.(d)))}}const B2=10*1024*1024,rp=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","image/jpeg","image/png","image/gif","text/plain"],q2=e=>e.size>B2?{valid:!1,error:`File size must be less than 10MB. Current size: ${(e.size/1024/1024).toFixed(2)}MB`}:rp.includes(e.type)?{valid:!0}:{valid:!1,error:"File type not allowed. Allowed types: PDF, Word, Excel, PowerPoint, Images, and Text files"},Ru=e=>e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(2)} KB`:`${(e/(1024*1024)).toFixed(2)} MB`;function W2(){const e=Vs(),{canAccess:t}=sp(),s=p.useRef(null),[r,a]=p.useState({page:1,per_page:12}),[i,o]=p.useState(!1),[c,l]=p.useState(null),[u,d]=p.useState(""),[h,m]=p.useState(""),[g,f]=p.useState(!1),{data:x,isLoading:y,error:v}=D2(r),w=L2(),j=V2(),N=U2(),T=x?.data||[],O=x?.meta,D=t(void 0,["document.create"]),k=t(void 0,["document.delete"]),z=t(void 0,["document.download"]),ne=t(void 0,["document.update"]),ue=R=>{a(Ee=>({...Ee,search:R,page:1}))},te=R=>{a(Ee=>({...Ee,project_id:R==="all"?void 0:parseInt(R),page:1}))},re=R=>{a(Ee=>({...Ee,mime_type:R==="all"?void 0:R,page:1}))},V=R=>{const Ee=R.target.files?.[0];if(!Ee)return;const nt=q2(Ee);if(!nt.valid){W.error(nt.error||"Invalid file");return}l(Ee)},S=async()=>{if(!c){W.error("Please select a file");return}try{const R=h.split(",").map(Ee=>Ee.trim()).filter(Boolean);await w.mutateAsync({file:c,description:u||void 0,tags:R,is_public:g}),W.success("Document uploaded successfully"),o(!1),l(null),d(""),m(""),f(!1)}catch{W.error("Failed to upload document")}},E=async(R,Ee)=>{if(window.confirm(`Are you sure you want to delete "${Ee}"?`))try{await j.mutateAsync(R),W.success("Document deleted successfully")}catch{W.error("Failed to delete document")}},Q=async R=>{try{const Ee=await N.mutateAsync(R.id),nt=window.URL.createObjectURL(Ee),gt=window.document.createElement("a");gt.href=nt,gt.download=R.filename||R.name,window.document.body.appendChild(gt),gt.click(),window.URL.revokeObjectURL(nt),window.document.body.removeChild(gt),W.success("Document downloaded successfully")}catch{W.error("Failed to download document")}},_e=R=>{e(`/app/documents/${R.id}`)},Ae=R=>R.includes("pdf")?n.jsx(Ts,{className:"h-5 w-5 text-red-500"}):R.includes("word")||R.includes("document")?n.jsx(Ts,{className:"h-5 w-5 text-blue-500"}):R.includes("sheet")||R.includes("excel")?n.jsx(Ts,{className:"h-5 w-5 text-green-500"}):R.includes("presentation")||R.includes("powerpoint")?n.jsx(Ts,{className:"h-5 w-5 text-orange-500"}):R.includes("image")?n.jsx($0,{className:"h-5 w-5 text-purple-500"}):R.includes("video")?n.jsx(Q0,{className:"h-5 w-5 text-indigo-500"}):n.jsx(Ts,{className:"h-5 w-5 text-gray-500"}),rt=[...new Set(T.map(R=>R.project_name).filter(Boolean))];return y?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex justify-between items-center",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Documents"}),n.jsx("p",{className:"text-gray-600",children:"Manage and organize your project documents"})]})}),n.jsx(me,{children:n.jsx(be,{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})})]}):v?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex justify-between items-center",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Documents"}),n.jsx("p",{className:"text-gray-600",children:"Manage and organize your project documents"})]})}),n.jsx(me,{children:n.jsx(be,{className:"text-center py-12",children:n.jsxs("div",{className:"text-red-500",children:[n.jsx("h3",{className:"text-lg font-medium mb-2",children:"Failed to load documents"}),n.jsx("p",{className:"text-gray-600",children:"There was an error loading the documents. Please try again."}),n.jsx(Y,{onClick:()=>window.location.reload(),variant:"outline",className:"mt-4",children:"Retry"})]})})})]}):n.jsxs("div",{className:"space-y-6","aria-live":"polite",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Documents"}),n.jsx("p",{className:"text-gray-600",children:"Manage and organize your project documents"})]}),D&&n.jsxs(Y,{onClick:()=>o(!0),children:[n.jsx(Ur,{className:"h-4 w-4 mr-2"}),"Upload Document"]})]}),n.jsxs(me,{children:[n.jsx(Xe,{children:n.jsx(Ye,{children:"Filters"})}),n.jsx(be,{children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Search"}),n.jsxs("div",{className:"relative",children:[n.jsx(Go,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx(It,{placeholder:"Search documents...",value:r.search||"",onChange:R=>ue(R.target.value),className:"pl-10","aria-label":"Search documents"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-700",children:"File Type"}),n.jsxs("select",{value:r.mime_type||"all",onChange:R=>re(R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Filter by file type",children:[n.jsx("option",{value:"all",children:"All Types"}),n.jsx("option",{value:"application/pdf",children:"PDF"}),n.jsx("option",{value:"application/msword",children:"Word"}),n.jsx("option",{value:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",children:"Word (DOCX)"}),n.jsx("option",{value:"application/vnd.ms-excel",children:"Excel"}),n.jsx("option",{value:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",children:"Excel (XLSX)"}),n.jsx("option",{value:"image/jpeg",children:"JPEG"}),n.jsx("option",{value:"image/png",children:"PNG"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Project"}),n.jsxs("select",{value:r.project_id?.toString()||"all",onChange:R=>te(R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Filter by project",children:[n.jsx("option",{value:"all",children:"All Projects"}),rt.map(R=>n.jsx("option",{value:R,children:R},R))]})]})]})})]}),n.jsxs(me,{children:[n.jsx(Xe,{children:n.jsxs(Ye,{children:["Documents (",O?.total||0,")"]})}),n.jsx(be,{children:T.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(gn,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("h3",{className:"text-lg font-medium mb-2 text-gray-500",children:"No documents found"}),n.jsx("p",{className:"text-gray-600",children:"Try adjusting your filters or upload a new document."})]}):n.jsx("div",{className:"space-y-4",children:T.map(R=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[n.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[Ae(R.mime_type),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium",children:R.name}),n.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[n.jsx("span",{className:"text-sm text-gray-500",children:Ru(R.size)}),n.jsxs("span",{className:"text-sm text-gray-500",children:["by ",R.uploaded_by_name]}),R.project_name&&n.jsx(wt,{variant:"outline",className:"text-xs",children:R.project_name})]})]})]}),n.jsxs("div",{className:"flex space-x-2",children:[z&&n.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>_e(R),"aria-label":`View ${R.name}`,children:n.jsx(Yo,{className:"h-4 w-4"})}),z&&n.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>Q(R),disabled:N.isPending,"aria-label":`Download ${R.name}`,children:n.jsx(Bh,{className:"h-4 w-4"})}),ne&&n.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>e(`/app/documents/${R.id}/edit`),"aria-label":`Edit ${R.name}`,children:n.jsx(En,{className:"h-4 w-4"})}),k&&n.jsx(Y,{variant:"ghost",size:"sm",className:"text-red-600",onClick:()=>E(R.id,R.name),disabled:j.isPending,"aria-label":`Delete ${R.name}`,children:n.jsx(Rn,{className:"h-4 w-4"})})]})]},R.id))})})]}),i&&n.jsx(Do,{isOpen:i,onClose:()=>o(!1),title:"Upload Document",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select File *"}),n.jsx("input",{ref:s,type:"file",onChange:V,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",accept:rp.join(",")}),c&&n.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-gray-700",children:c.name}),n.jsx("button",{onClick:()=>{l(null),s.current&&(s.current.value="")},className:"text-gray-400 hover:text-gray-600",children:n.jsx(Y0,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Size: ",Ru(c.size)," | Type: ",c.type]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),n.jsx(Tn,{value:u,onChange:R=>d(R.target.value),placeholder:"Optional description for this document...",rows:3})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (comma-separated)"}),n.jsx(It,{value:h,onChange:R=>m(R.target.value),placeholder:"e.g., project, milestone, important"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"is-public",checked:g,onChange:R=>f(R.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"is-public",className:"ml-2 text-sm text-gray-700",children:"Make this document public"})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[n.jsx(Y,{onClick:()=>o(!1),variant:"outline",disabled:w.isPending,children:"Cancel"}),n.jsx(Y,{onClick:S,disabled:!c||w.isPending,children:w.isPending?"Uploading...":"Upload"})]})]})})]})}const z2={sm:"text-xs",md:"text-sm",lg:"text-base"},na={sm:"px-2 py-1",md:"px-4 py-2",lg:"px-6 py-3"};function K2({columns:e,data:t,loading:s=!1,pagination:r,rowSelection:a,onRow:i,className:o,size:c="md",bordered:l=!0,striped:u=!0}){const d=f=>{if(a)if(f){const x=t.map((y,v)=>v);a.onChange(x,t)}else a.onChange([],[])},h=(f,x,y)=>{if(!a)return;const{selectedRowKeys:v}=a;let w,j;y?(w=[...v,x],j=t.filter((N,T)=>w.includes(T))):(w=v.filter(N=>N!==x),j=t.filter((N,T)=>w.includes(T))),a.onChange(w,j)},m=a&&a.selectedRowKeys.length===t.length&&t.length>0,g=a&&a.selectedRowKeys.length>0&&a.selectedRowKeys.length<t.length;return n.jsxs("div",{className:Pe("overflow-hidden",o),children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:Pe("min-w-full divide-y divide-gray-200",z2[c],l&&"border border-gray-200"),children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[a&&n.jsx("th",{className:Pe("relative",na[c]),children:n.jsx("input",{type:"checkbox",className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",checked:m,ref:f=>{f&&(f.indeterminate=g||!1)},onChange:f=>d(f.target.checked)})}),e.map((f,x)=>n.jsx("th",{className:Pe("font-medium text-gray-900 tracking-wider uppercase",na[c],f.align==="center"&&"text-center",f.align==="right"&&"text-right",f.sortable&&"cursor-pointer hover:bg-gray-100"),style:{width:f.width},children:f.title},String(f.key)+x))]})}),n.jsx("tbody",{className:Pe("bg-white divide-y divide-gray-200",u&&"divide-y divide-gray-200"),children:s?n.jsx("tr",{children:n.jsx("td",{colSpan:e.length+(a?1:0),className:"px-6 py-12 text-center text-gray-500",children:n.jsxs("div",{className:"flex items-center justify-center",children:[n.jsxs("svg",{className:"animate-spin h-5 w-5 mr-2",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Đang tải..."]})})}):t.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:e.length+(a?1:0),className:"px-6 py-12 text-center text-gray-500",children:"Không có dữ liệu"})}):t.map((f,x)=>{const y=i?.(f,x)||{},v=a?.selectedRowKeys.includes(x)||!1,w=a?.getCheckboxProps?.(f)||{};return n.jsxs("tr",{className:Pe("hover:bg-gray-50 transition-colors duration-150",u&&x%2===0&&"bg-gray-50",v&&"bg-blue-50",y.className),onClick:y.onClick,onDoubleClick:y.onDoubleClick,children:[a&&n.jsx("td",{className:na[c],children:n.jsx("input",{type:"checkbox",className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",checked:v,disabled:w.disabled,onChange:j=>h(f,x,j.target.checked)})}),e.map((j,N)=>{const T=f[j.key],O=j.render?j.render(T,f,x):String(T||"");return n.jsx("td",{className:Pe("text-gray-900",na[c],j.align==="center"&&"text-center",j.align==="right"&&"text-right"),children:O},String(j.key)+N)})]},x)})})]})}),r&&n.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-white border-t border-gray-200",children:[n.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:["Hiển thị ",Math.min((r.current-1)*r.pageSize+1,r.total)," đến"," ",Math.min(r.current*r.pageSize,r.total)," trong tổng số"," ",r.total," kết quả"]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>r.onChange(r.current-1,r.pageSize),disabled:r.current<=1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Trước"}),n.jsxs("span",{className:"px-3 py-1 text-sm",children:["Trang ",r.current," / ",Math.ceil(r.total/r.pageSize)]}),n.jsx("button",{onClick:()=>r.onChange(r.current+1,r.pageSize),disabled:r.current>=Math.ceil(r.total/r.pageSize),className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Sau"})]})]})]})}const H2=10*1024*1024,np=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","image/jpeg","image/png","image/gif","text/plain"],Du=e=>e.size>H2?{valid:!1,error:`File size must be less than 10MB. Current size: ${(e.size/1024/1024).toFixed(2)}MB`}:np.includes(e.type)?{valid:!0}:{valid:!1,error:"File type not allowed. Allowed types: PDF, Word, Excel, PowerPoint, Images, and Text files"},Q2=()=>{const{id:e}=Ku(),t=Vs(),{canAccess:s}=sp(),r=Number(e),[a,i]=p.useState(!1),[o,c]=p.useState(!1),[l,u]=p.useState(null),[d,h]=p.useState(null),[m,g]=p.useState(""),[f,x]=p.useState(""),y=M2(r,!!r),v=O2(r,!!r),w=F2(r,!!r),j=I2(),N=$2(),T=p.useMemo(()=>s(void 0,["document.update","document.approve"]),[s]),O=p.useMemo(()=>s(void 0,["document.download"]),[s]),D=y.isLoading||v.isLoading,k=y.data?.data,z=p.useMemo(()=>v.data?.data??[],[v.data]),ne=w.data?.data??[],ue=async()=>{if(!d||!m.trim()){W.error("Please select a file and enter a comment");return}const E=Du(d);if(!E.valid){W.error(E.error||"Invalid file");return}try{await j.mutateAsync({id:r,file:d,changeDescription:m}),W.success("New version uploaded successfully"),i(!1),h(null),g("")}catch{W.error("Failed to upload new version")}},te=E=>{const Q=E.target.files?.[0];if(!Q)return;const _e=Du(Q);if(!_e.valid){W.error(_e.error||"Invalid file");return}h(Q)},re=async()=>{if(!l||!f.trim()){W.error("Please enter a comment for reverting");return}try{await N.mutateAsync({id:r,versionId:Number(l.id),comment:f}),W.success(`Reverted to version ${l.version}`),c(!1),u(null),x("")}catch{W.error("Failed to revert version")}},V=async(E=null)=>{try{const Q=E&&E.id?await Ht.downloadVersion(r,Number(E.id)):await Ht.downloadDocument(r),_e=window.URL.createObjectURL(Q),Ae=window.document.createElement("a");Ae.href=_e,Ae.download=E?.filename||k?.filename||k?.name||"document",window.document.body.appendChild(Ae),Ae.click(),window.URL.revokeObjectURL(_e),window.document.body.removeChild(Ae),W.success("Document downloaded successfully")}catch{W.error("Failed to download document")}};if(D)return n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!k)return n.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[n.jsx(Ts,{className:"h-16 w-16 text-gray-400 mb-4"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Document not found"}),n.jsx(Y,{onClick:()=>t("/app/documents"),variant:"outline",children:"Back to Documents"})]});const S=[{key:"version",title:"Version",render:E=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("span",{className:"font-mono font-medium",children:["v",E.version]}),E.version===k.version&&n.jsx(wt,{variant:"default",children:"Current"}),E.reverted_from_version&&n.jsxs(wt,{variant:"secondary",children:["Revert from v",E.reverted_from_version]})]})},{key:"file_info",title:"File Info",render:E=>n.jsxs("div",{className:"text-sm",children:[n.jsx("div",{className:"font-medium text-gray-900",children:E.filename}),n.jsx("div",{className:"text-gray-500",children:fi(E.size)})]})},{key:"change",title:"Change Description",render:E=>n.jsx("div",{className:"text-sm text-gray-700 max-w-xs truncate",title:E.change_description,children:E.change_description||"No description"})},{key:"created_by",title:"Created By",render:E=>n.jsxs("div",{className:"text-sm",children:[n.jsx("div",{className:"font-medium text-gray-900",children:E.uploaded_by_name}),n.jsx("div",{className:"text-gray-500",children:mr(E.uploaded_at)})]})},{key:"actions",title:"Actions",render:E=>n.jsxs("div",{className:"flex items-center space-x-2",children:[O&&n.jsx(Y,{onClick:()=>V(E),variant:"outline",size:"sm",children:n.jsx(da,{className:"h-4 w-4"})}),E.version!==k.version&&T&&n.jsx(Y,{onClick:()=>{u(E),c(!0)},variant:"outline",size:"sm",children:n.jsx(El,{className:"h-4 w-4"})})]})}];return n.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs(Y,{onClick:()=>t("/app/documents"),variant:"outline",size:"sm",children:[n.jsx(f0,{className:"h-4 w-4 mr-2"}),"Back"]}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:k.name}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:k.project_name&&`Project: ${k.project_name}`})]})]}),T&&n.jsx("div",{className:"flex items-center space-x-3",children:n.jsxs(Y,{onClick:()=>i(!0),variant:"default",children:[n.jsx(g0,{className:"h-4 w-4 mr-2"}),"Upload New Version"]})})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.jsx(me,{children:n.jsxs("div",{className:"p-6",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[n.jsx(Ts,{className:"h-5 w-5 mr-2"}),"Current Version (v",k.version,")"]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"File Type:"}),n.jsx("p",{className:"text-sm text-gray-900",children:k.mime_type})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Size:"}),n.jsx("p",{className:"text-sm text-gray-900",children:fi(k.size)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Uploaded By:"}),n.jsx("p",{className:"text-sm text-gray-900",children:k.uploaded_by_name})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Upload Date:"}),n.jsx("p",{className:"text-sm text-gray-900",children:mr(k.uploaded_at)})]})]}),k.description&&n.jsxs("div",{className:"mb-4",children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Description:"}),n.jsx("p",{className:"text-sm text-gray-900 mt-1",children:k.description})]}),O&&n.jsxs(Y,{onClick:()=>V(null),variant:"default",size:"sm",children:[n.jsx(da,{className:"h-4 w-4 mr-2"}),"Download"]})]})]})}),n.jsx(me,{children:n.jsxs("div",{className:"p-6",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[n.jsx(Dl,{className:"h-5 w-5 mr-2"}),"Version History (",z.length,")"]}),n.jsx(K2,{data:z,columns:S})]})}),ne.length>0&&n.jsx(me,{children:n.jsxs("div",{className:"p-6",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[n.jsx(Dl,{className:"h-5 w-5 mr-2"}),"Activity Log"]}),n.jsx("div",{className:"space-y-3",children:ne.slice(0,10).map(E=>n.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 rounded",children:[n.jsxs("div",{className:"flex-shrink-0",children:[E.action==="upload"&&n.jsx(Ur,{className:"h-5 w-5 text-blue-500"}),E.action==="download"&&n.jsx(da,{className:"h-5 w-5 text-green-500"}),E.action==="approve"&&n.jsx(L0,{className:"h-5 w-5 text-purple-500"}),E.action==="revert"&&n.jsx(El,{className:"h-5 w-5 text-yellow-500"})]}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[E.actor_name," ",E.action,"d this document"]}),n.jsx("div",{className:"text-xs text-gray-500",children:mr(E.created_at)})]})]},E.id))})]})})]}),n.jsx("div",{className:"space-y-6",children:n.jsx(me,{children:n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Document Information"}),n.jsxs("dl",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Name"}),n.jsx("dd",{className:"text-sm text-gray-900",children:k.name})]}),n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Filename"}),n.jsx("dd",{className:"text-sm text-gray-900",children:k.filename})]}),k.project_name&&n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Project"}),n.jsx("dd",{className:"text-sm text-gray-900",children:k.project_name})]}),n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Total Versions"}),n.jsx("dd",{className:"text-sm text-gray-900",children:z.length})]}),n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Created"}),n.jsx("dd",{className:"text-sm text-gray-900",children:mr(k.uploaded_at)})]}),n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Updated"}),n.jsx("dd",{className:"text-sm text-gray-900",children:mr(k.updated_at)})]}),n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Download Count"}),n.jsx("dd",{className:"text-sm text-gray-900",children:k.download_count})]})]})]})})})]}),a&&n.jsx(Do,{isOpen:a,onClose:()=>i(!1),title:"Upload New Version",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select File *"}),n.jsx("input",{type:"file",onChange:te,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",accept:np.join(",")}),d&&n.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm text-gray-700",children:[d.name," (",fi(d.size),")"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Change Description *"}),n.jsx(Tn,{value:m,onChange:E=>g(E.target.value),placeholder:"Describe the changes in this version...",rows:3})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[n.jsx(Y,{onClick:()=>i(!1),variant:"outline",disabled:j.isPending,children:"Cancel"}),n.jsx(Y,{onClick:ue,disabled:!d||!m.trim()||j.isPending,children:j.isPending?"Uploading...":"Upload"})]})]})}),o&&l&&n.jsx(Do,{isOpen:o,onClose:()=>c(!1),title:"Revert to Previous Version",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded",children:n.jsxs("p",{className:"text-sm text-yellow-800",children:["You are about to revert to version ",l.version,". This action will create a new version based on the selected one."]})}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for Revert *"}),n.jsx(Tn,{value:f,onChange:E=>x(E.target.value),placeholder:"Explain why you are reverting to this version...",rows:3})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[n.jsx(Y,{onClick:()=>c(!1),variant:"outline",children:"Cancel"}),n.jsx(Y,{onClick:re,disabled:!f.trim(),variant:"default",children:"Revert"})]})]})})]})};function Z2(){const[e,t]=p.useState(!1);return p.useEffect(()=>{t(!0)},[]),n.jsxs("div",{children:[n.jsx("h1",{children:"Team"}),n.jsx("p",{children:"This is the team page."}),e&&n.jsx("p",{children:"Client-side rendering enabled!"})]})}function X2(){const[e,t]=p.useState(!1);return p.useEffect(()=>{t(!0)},[]),n.jsxs("div",{children:[n.jsx("h1",{children:"Calendar"}),n.jsx("p",{children:"This is the calendar page."}),e&&n.jsx("p",{children:"Client-side rendering enabled!"})]})}function Y2(){const[e,t]=p.useState(!1);return p.useEffect(()=>{t(!0)},[]),n.jsxs("div",{children:[n.jsx("h1",{children:"Settings"}),n.jsx("p",{children:"This is the settings page."}),e&&n.jsx("p",{children:"Client-side rendering enabled!"})]})}class G2{client;constructor(){this.client=Se.create({baseURL:"/api/v1",timeout:1e4,headers:{"Content-Type":"application/json",Accept:"application/json"}}),this.setupInterceptors()}setupInterceptors(){this.client.interceptors.request.use(t=>{const s=localStorage.getItem("auth_token");return s&&(t.headers.Authorization=`Bearer ${s}`),t},t=>Promise.reject(t)),this.client.interceptors.response.use(t=>t,t=>{if(t.response?.status===401)return localStorage.removeItem("auth_token"),window.location.href="/login",Promise.reject(t);if(t.response?.status===422){const r=t.response.data?.message||"Validation failed";return W.error(r),Promise.reject(t)}if(t.response?.status>=500)return W.error("Server error. Please try again later."),Promise.reject(t);const s=t.response?.data?.message||t.message||"An error occurred";return W.error(s),Promise.reject(t)})}async get(t,s){return(await this.client.get(t,{params:s})).data}async post(t,s){return(await this.client.post(t,s)).data}async put(t,s){return(await this.client.put(t,s)).data}async patch(t,s){return(await this.client.patch(t,s)).data}async delete(t){return(await this.client.delete(t)).data}async healthCheck(){return this.get("/health")}}const Lt=new G2,J2={async getTasks(e={}){const t=await Lt.get("/tasks",e);if(t.status==="success"&&t.data)return t.data;throw new Error(t.message||"Failed to get tasks")},async getTaskById(e){const t=await Lt.get(`/tasks/${e}`);if(t.status==="success"&&t.data)return t.data;throw new Error(t.message||"Failed to get task")},async createTask(e){const t=await Lt.post("/tasks",e);if(t.status==="success"&&t.data)return t.data;throw new Error(t.message||"Failed to create task")},async updateTask(e,t){const s=await Lt.put(`/tasks/${e}`,t);if(s.status==="success"&&s.data)return s.data;throw new Error(s.message||"Failed to update task")},async deleteTask(e){const t=await Lt.delete(`/tasks/${e}`);if(t.status!=="success")throw new Error(t.message||"Failed to delete task")},async getTaskAssignments(e){const t=await Lt.get(`/tasks/${e}/assignments`);if(t.status==="success"&&t.data)return t.data;throw new Error(t.message||"Failed to get task assignments")},async assignUserToTask(e,t,s){const r=await Lt.post(`/tasks/${e}/assignments`,{user_id:t,...s});if(r.status==="success"&&r.data)return r.data;throw new Error(r.message||"Failed to assign user to task")},async updateTaskAssignment(e,t){const s=await Lt.put(`/assignments/${e}`,t);if(s.status==="success"&&s.data)return s.data;throw new Error(s.message||"Failed to update task assignment")},async removeUserFromTask(e){const t=await Lt.delete(`/assignments/${e}`);if(t.status!=="success")throw new Error(t.message||"Failed to remove user from task")},async getUserTasks(e,t={}){const s=await Lt.get(`/users/${e}/assignments`,t);if(s.status==="success"&&s.data)return s.data;throw new Error(s.message||"Failed to get user tasks")},async getUserTaskStats(e){const t=await Lt.get(`/users/${e}/assignments/stats`);if(t.status==="success"&&t.data)return t.data;throw new Error(t.message||"Failed to get user task stats")}};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var eT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tT=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),hs=(e,t)=>{const s=p.forwardRef(({color:r="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:c="",children:l,...u},d)=>p.createElement("svg",{ref:d,...eT,width:a,height:a,stroke:r,strokeWidth:o?Number(i)*24/Number(a):i,className:["lucide",`lucide-${tT(e)}`,c].join(" "),...u},[...t.map(([h,m])=>p.createElement(h,m)),...Array.isArray(l)?l:[l]]));return s.displayName=`${e}`,s};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=hs("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=hs("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=hs("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=hs("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=hs("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=hs("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=hs("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oT=hs("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=hs("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=hs("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Fu({className:e,variant:t="rectangular",width:s,height:r}){const a="skeleton",i={text:"h-4 w-full",rectangular:"h-4 w-full",circular:"rounded-full"},o={...s&&{width:typeof s=="number"?`${s}px`:s},...r&&{height:typeof r=="number"?`${r}px`:r}};return n.jsx("div",{className:Pe(a,i[t],e),style:o})}function lT(){return n.jsx("div",{className:"card",children:n.jsx("div",{className:"card-content p-0",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[n.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:n.jsx("tr",{children:Array.from({length:5}).map((e,t)=>n.jsx("th",{className:"px-6 py-3",children:n.jsx(Fu,{className:"h-4 w-20"})},t))})}),n.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:Array.from({length:3}).map((e,t)=>n.jsx("tr",{children:Array.from({length:5}).map((s,r)=>n.jsx("td",{className:"px-6 py-4",children:n.jsx(Fu,{className:"h-4 w-16"})},r))},t))})]})})})})}function dT({searchValue:e,onSearchChange:t,filters:s,onFilterChange:r,onClearFilters:a,filterOptions:i={},className:o}){const[c,l]=p.useState(!1),[u,d]=p.useState([]),h=(f,x)=>{r(f,x),x&&x!==""?u.includes(f)||d(y=>[...y,f]):d(y=>y.filter(v=>v!==f))},m=()=>{a(),d([])},g=u.length>0||e;return n.jsxs("div",{className:Pe("space-y-4",o),children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(oT,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search...",value:e,onChange:f=>t(f.target.value),className:"input pl-10"})]}),n.jsxs("button",{onClick:()=>l(!c),className:Pe("btn btn-outline flex items-center gap-2",c&&"bg-primary-50 border-primary-300 text-primary-700"),children:[n.jsx(nT,{className:"h-4 w-4"}),"Filters",g&&n.jsx("span",{className:"bg-primary-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:u.length+(e?1:0)}),n.jsx(sT,{className:Pe("h-4 w-4 transition-transform",c&&"rotate-180")})]}),g&&n.jsxs("button",{onClick:m,className:"btn btn-outline text-red-600 hover:text-red-700 hover:border-red-300",children:[n.jsx(Li,{className:"h-4 w-4 mr-1"}),"Clear"]})]}),c&&n.jsx("div",{className:"card animate-slide-down",children:n.jsxs("div",{className:"card-content",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.status&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),n.jsxs("select",{value:s.status||"",onChange:f=>h("status",f.target.value),className:"input",children:[n.jsx("option",{value:"",children:"All Status"}),i.status.map(f=>n.jsxs("option",{value:f.value,children:[f.label," ",f.count&&`(${f.count})`]},f.value))]})]}),i.priority&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Priority"}),n.jsxs("select",{value:s.priority||"",onChange:f=>h("priority",f.target.value),className:"input",children:[n.jsx("option",{value:"",children:"All Priority"}),i.priority.map(f=>n.jsxs("option",{value:f.value,children:[f.label," ",f.count&&`(${f.count})`]},f.value))]})]}),i.assignee&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Assignee"}),n.jsxs("select",{value:s.assignee||"",onChange:f=>h("assignee",f.target.value),className:"input",children:[n.jsx("option",{value:"",children:"All Assignees"}),i.assignee.map(f=>n.jsxs("option",{value:f.value,children:[f.label," ",f.count&&`(${f.count})`]},f.value))]})]}),i.project&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Project"}),n.jsxs("select",{value:s.project||"",onChange:f=>h("project",f.target.value),className:"input",children:[n.jsx("option",{value:"",children:"All Projects"}),i.project.map(f=>n.jsxs("option",{value:f.value,children:[f.label," ",f.count&&`(${f.count})`]},f.value))]})]}),i.dateRange&&n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Date Range"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"date",value:s.start_date||"",onChange:f=>h("start_date",f.target.value),className:"input",placeholder:"Start Date"})}),n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"date",value:s.end_date||"",onChange:f=>h("end_date",f.target.value),className:"input",placeholder:"End Date"})})]})]})]}),g&&n.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:n.jsxs("div",{className:"flex flex-wrap gap-2",children:[e&&n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-primary-100 text-primary-800 dark:bg-primary-900 dark:text-primary-200",children:['Search: "',e,'"',n.jsx("button",{onClick:()=>t(""),className:"ml-2 hover:text-primary-600",children:n.jsx(Li,{className:"h-3 w-3"})})]}),u.map(f=>{const x=s[f];return x?n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200",children:[f,": ",x,n.jsx("button",{onClick:()=>h(f,""),className:"ml-2 hover:text-gray-600",children:n.jsx(Li,{className:"h-3 w-3"})})]},f):null})]})})]})})]})}const ls=Object.create(null);ls.open="0";ls.close="1";ls.ping="2";ls.pong="3";ls.message="4";ls.upgrade="5";ls.noop="6";const pa=Object.create(null);Object.keys(ls).forEach(e=>{pa[ls[e]]=e});const Mo={type:"error",data:"parser error"},ap=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",ip=typeof ArrayBuffer=="function",op=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Bc=({type:e,data:t},s,r)=>ap&&t instanceof Blob?s?r(t):Lu(t,r):ip&&(t instanceof ArrayBuffer||op(t))?s?r(t):Lu(new Blob([t]),r):r(ls[e]+(t||"")),Lu=(e,t)=>{const s=new FileReader;return s.onload=function(){const r=s.result.split(",")[1];t("b"+(r||""))},s.readAsDataURL(e)};function Vu(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Vi;function uT(e,t){if(ap&&e.data instanceof Blob)return e.data.arrayBuffer().then(Vu).then(t);if(ip&&(e.data instanceof ArrayBuffer||op(e.data)))return t(Vu(e.data));Bc(e,!1,s=>{Vi||(Vi=new TextEncoder),t(Vi.encode(s))})}const Uu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",an=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Uu.length;e++)an[Uu.charCodeAt(e)]=e;const hT=e=>{let t=e.length*.75,s=e.length,r,a=0,i,o,c,l;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const u=new ArrayBuffer(t),d=new Uint8Array(u);for(r=0;r<s;r+=4)i=an[e.charCodeAt(r)],o=an[e.charCodeAt(r+1)],c=an[e.charCodeAt(r+2)],l=an[e.charCodeAt(r+3)],d[a++]=i<<2|o>>4,d[a++]=(o&15)<<4|c>>2,d[a++]=(c&3)<<6|l&63;return u},mT=typeof ArrayBuffer=="function",qc=(e,t)=>{if(typeof e!="string")return{type:"message",data:cp(e,t)};const s=e.charAt(0);return s==="b"?{type:"message",data:fT(e.substring(1),t)}:pa[s]?e.length>1?{type:pa[s],data:e.substring(1)}:{type:pa[s]}:Mo},fT=(e,t)=>{if(mT){const s=hT(e);return cp(s,t)}else return{base64:!0,data:e}},cp=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},lp="",pT=(e,t)=>{const s=e.length,r=new Array(s);let a=0;e.forEach((i,o)=>{Bc(i,!1,c=>{r[o]=c,++a===s&&t(r.join(lp))})})},gT=(e,t)=>{const s=e.split(lp),r=[];for(let a=0;a<s.length;a++){const i=qc(s[a],t);if(r.push(i),i.type==="error")break}return r};function xT(){return new TransformStream({transform(e,t){uT(e,s=>{const r=s.length;let a;if(r<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,r);else if(r<65536){a=new Uint8Array(3);const i=new DataView(a.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{a=new Uint8Array(9);const i=new DataView(a.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(a[0]|=128),t.enqueue(a),t.enqueue(s)})}})}let Ui;function aa(e){return e.reduce((t,s)=>t+s.length,0)}function ia(e,t){if(e[0].length===t)return e.shift();const s=new Uint8Array(t);let r=0;for(let a=0;a<t;a++)s[a]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),s}function yT(e,t){Ui||(Ui=new TextDecoder);const s=[];let r=0,a=-1,i=!1;return new TransformStream({transform(o,c){for(s.push(o);;){if(r===0){if(aa(s)<1)break;const l=ia(s,1);i=(l[0]&128)===128,a=l[0]&127,a<126?r=3:a===126?r=1:r=2}else if(r===1){if(aa(s)<2)break;const l=ia(s,2);a=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),r=3}else if(r===2){if(aa(s)<8)break;const l=ia(s,8),u=new DataView(l.buffer,l.byteOffset,l.length),d=u.getUint32(0);if(d>Math.pow(2,21)-1){c.enqueue(Mo);break}a=d*Math.pow(2,32)+u.getUint32(4),r=3}else{if(aa(s)<a)break;const l=ia(s,a);c.enqueue(qc(i?l:Ui.decode(l),t)),r=0}if(a===0||a>e){c.enqueue(Mo);break}}}})}const dp=4;function We(e){if(e)return vT(e)}function vT(e){for(var t in We.prototype)e[t]=We.prototype[t];return e}We.prototype.on=We.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};We.prototype.once=function(e,t){function s(){this.off(e,s),t.apply(this,arguments)}return s.fn=t,this.on(e,s),this};We.prototype.off=We.prototype.removeListener=We.prototype.removeAllListeners=We.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+e];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,a=0;a<s.length;a++)if(r=s[a],r===t||r.fn===t){s.splice(a,1);break}return s.length===0&&delete this._callbacks["$"+e],this};We.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),s=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(s){s=s.slice(0);for(var r=0,a=s.length;r<a;++r)s[r].apply(this,t)}return this};We.prototype.emitReserved=We.prototype.emit;We.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};We.prototype.hasListeners=function(e){return!!this.listeners(e).length};const si=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,s)=>s(t,0),Rt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),bT="arraybuffer";function up(e,...t){return t.reduce((s,r)=>(e.hasOwnProperty(r)&&(s[r]=e[r]),s),{})}const wT=Rt.setTimeout,jT=Rt.clearTimeout;function ri(e,t){t.useNativeTimers?(e.setTimeoutFn=wT.bind(Rt),e.clearTimeoutFn=jT.bind(Rt)):(e.setTimeoutFn=Rt.setTimeout.bind(Rt),e.clearTimeoutFn=Rt.clearTimeout.bind(Rt))}const NT=1.33;function kT(e){return typeof e=="string"?_T(e):Math.ceil((e.byteLength||e.size)*NT)}function _T(e){let t=0,s=0;for(let r=0,a=e.length;r<a;r++)t=e.charCodeAt(r),t<128?s+=1:t<2048?s+=2:t<55296||t>=57344?s+=3:(r++,s+=4);return s}function hp(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function TT(e){let t="";for(let s in e)e.hasOwnProperty(s)&&(t.length&&(t+="&"),t+=encodeURIComponent(s)+"="+encodeURIComponent(e[s]));return t}function ST(e){let t={},s=e.split("&");for(let r=0,a=s.length;r<a;r++){let i=s[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class CT extends Error{constructor(t,s,r){super(t),this.description=s,this.context=r,this.type="TransportError"}}class Wc extends We{constructor(t){super(),this.writable=!1,ri(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,s,r){return super.emitReserved("error",new CT(t,s,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const s=qc(t,this.socket.binaryType);this.onPacket(s)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,s={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(s)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const s=TT(t);return s.length?"?"+s:""}}class AT extends Wc{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const s=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||s()})),this.writable||(r++,this.once("drain",function(){--r||s()}))}else s()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const s=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};gT(t,this.socket.binaryType).forEach(s),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,pT(t,s=>{this.doWrite(s,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",s=this.query||{};return this.opts.timestampRequests!==!1&&(s[this.opts.timestampParam]=hp()),!this.supportsBinary&&!s.sid&&(s.b64=1),this.createUri(t,s)}}let mp=!1;try{mp=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const PT=mp;function ET(){}class RT extends AT{constructor(t){if(super(t),typeof location<"u"){const s=location.protocol==="https:";let r=location.port;r||(r=s?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,s){const r=this.request({method:"POST",data:t});r.on("success",s),r.on("error",(a,i)=>{this.onError("xhr post error",a,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(s,r)=>{this.onError("xhr poll error",s,r)}),this.pollXhr=t}}let Cr=class ga extends We{constructor(t,s,r){super(),this.createRequest=t,ri(this,r),this._opts=r,this._method=r.method||"GET",this._uri=s,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const s=up(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");s.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(s);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&r.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var a;r.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=ga.requestsCount++,ga.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=ET,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete ga.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Cr.requestsCount=0;Cr.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Iu);else if(typeof addEventListener=="function"){const e="onpagehide"in Rt?"pagehide":"unload";addEventListener(e,Iu,!1)}}function Iu(){for(let e in Cr.requests)Cr.requests.hasOwnProperty(e)&&Cr.requests[e].abort()}const DT=(function(){const e=fp({xdomain:!1});return e&&e.responseType!==null})();class MT extends RT{constructor(t){super(t);const s=t&&t.forceBase64;this.supportsBinary=DT&&!s}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Cr(fp,this.uri(),t)}}function fp(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||PT))return new XMLHttpRequest}catch{}if(!t)try{return new Rt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const pp=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class OT extends Wc{get name(){return"websocket"}doOpen(){const t=this.uri(),s=this.opts.protocols,r=pp?{}:up(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,s,r)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let s=0;s<t.length;s++){const r=t[s],a=s===t.length-1;Bc(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}a&&si(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",s=this.query||{};return this.opts.timestampRequests&&(s[this.opts.timestampParam]=hp()),this.supportsBinary||(s.b64=1),this.createUri(t,s)}}const Ii=Rt.WebSocket||Rt.MozWebSocket;class FT extends OT{createSocket(t,s,r){return pp?new Ii(t,s,r):s?new Ii(t,s):new Ii(t)}doWrite(t,s){this.ws.send(s)}}class LT extends Wc{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const s=yT(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(s).getReader(),a=xT();a.readable.pipeTo(t.writable),this._writer=a.writable.getWriter();const i=()=>{r.read().then(({done:c,value:l})=>{c||(this.onPacket(l),i())}).catch(c=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let s=0;s<t.length;s++){const r=t[s],a=s===t.length-1;this._writer.write(r).then(()=>{a&&si(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const VT={websocket:FT,webtransport:LT,polling:MT},UT=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,IT=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Oo(e){if(e.length>8e3)throw"URI too long";const t=e,s=e.indexOf("["),r=e.indexOf("]");s!=-1&&r!=-1&&(e=e.substring(0,s)+e.substring(s,r).replace(/:/g,";")+e.substring(r,e.length));let a=UT.exec(e||""),i={},o=14;for(;o--;)i[IT[o]]=a[o]||"";return s!=-1&&r!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=$T(i,i.path),i.queryKey=BT(i,i.query),i}function $T(e,t){const s=/\/{2,9}/g,r=t.replace(s,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function BT(e,t){const s={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,a,i){a&&(s[a]=i)}),s}const Fo=typeof addEventListener=="function"&&typeof removeEventListener=="function",xa=[];Fo&&addEventListener("offline",()=>{xa.forEach(e=>e())},!1);class Rs extends We{constructor(t,s){if(super(),this.binaryType=bT,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(s=t,t=null),t){const r=Oo(t);s.hostname=r.host,s.secure=r.protocol==="https"||r.protocol==="wss",s.port=r.port,r.query&&(s.query=r.query)}else s.host&&(s.hostname=Oo(s.host).host);ri(this,s),this.secure=s.secure!=null?s.secure:typeof location<"u"&&location.protocol==="https:",s.hostname&&!s.port&&(s.port=this.secure?"443":"80"),this.hostname=s.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=s.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},s.transports.forEach(r=>{const a=r.prototype.name;this.transports.push(a),this._transportsByName[a]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},s),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=ST(this.opts.query)),Fo&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},xa.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const s=Object.assign({},this.opts.query);s.EIO=dp,s.transport=t,this.id&&(s.sid=this.id);const r=Object.assign({},this.opts,{query:s,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Rs.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const s=this.createTransport(t);s.open(),this.setTransport(s)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",s=>this._onClose("transport close",s))}onOpen(){this.readyState="open",Rs.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const s=new Error("server error");s.code=t.data,this._onError(s);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let s=1;for(let r=0;r<this.writeBuffer.length;r++){const a=this.writeBuffer[r].data;if(a&&(s+=kT(a)),r>0&&s>this._maxPayload)return this.writeBuffer.slice(0,r);s+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,si(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,s,r){return this._sendPacket("message",t,s,r),this}send(t,s,r){return this._sendPacket("message",t,s,r),this}_sendPacket(t,s,r,a){if(typeof s=="function"&&(a=s,s=void 0),typeof r=="function"&&(a=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:t,data:s,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},s=()=>{this.off("upgrade",s),this.off("upgradeError",s),t()},r=()=>{this.once("upgrade",s),this.once("upgradeError",s)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(Rs.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Fo&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=xa.indexOf(this._offlineEventListener);r!==-1&&xa.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,s),this.writeBuffer=[],this._prevBufferLen=0}}}Rs.protocol=dp;class qT extends Rs{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let s=this.createTransport(t),r=!1;Rs.priorWebsocketSuccess=!1;const a=()=>{r||(s.send([{type:"ping",data:"probe"}]),s.once("packet",h=>{if(!r)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",s),!s)return;Rs.priorWebsocketSuccess=s.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(d(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())})}else{const m=new Error("probe error");m.transport=s.name,this.emitReserved("upgradeError",m)}}))};function i(){r||(r=!0,d(),s.close(),s=null)}const o=h=>{const m=new Error("probe error: "+h);m.transport=s.name,i(),this.emitReserved("upgradeError",m)};function c(){o("transport closed")}function l(){o("socket closed")}function u(h){s&&h.name!==s.name&&i()}const d=()=>{s.removeListener("open",a),s.removeListener("error",o),s.removeListener("close",c),this.off("close",l),this.off("upgrading",u)};s.once("open",a),s.once("error",o),s.once("close",c),this.once("close",l),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||s.open()},200):s.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const s=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&s.push(t[r]);return s}}let WT=class extends qT{constructor(t,s={}){const r=typeof t=="object"?t:s;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(a=>VT[a]).filter(a=>!!a)),super(t,r)}};function zT(e,t="",s){let r=e;s=s||typeof location<"u"&&location,e==null&&(e=s.protocol+"//"+s.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=s.protocol+e:e=s.host+e),/^(https?|wss?):\/\//.test(e)||(typeof s<"u"?e=s.protocol+"//"+e:e="https://"+e),r=Oo(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(s&&s.port===r.port?"":":"+r.port),r}const KT=typeof ArrayBuffer=="function",HT=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,gp=Object.prototype.toString,QT=typeof Blob=="function"||typeof Blob<"u"&&gp.call(Blob)==="[object BlobConstructor]",ZT=typeof File=="function"||typeof File<"u"&&gp.call(File)==="[object FileConstructor]";function zc(e){return KT&&(e instanceof ArrayBuffer||HT(e))||QT&&e instanceof Blob||ZT&&e instanceof File}function ya(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let s=0,r=e.length;s<r;s++)if(ya(e[s]))return!0;return!1}if(zc(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return ya(e.toJSON(),!0);for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&ya(e[s]))return!0;return!1}function XT(e){const t=[],s=e.data,r=e;return r.data=Lo(s,t),r.attachments=t.length,{packet:r,buffers:t}}function Lo(e,t){if(!e)return e;if(zc(e)){const s={_placeholder:!0,num:t.length};return t.push(e),s}else if(Array.isArray(e)){const s=new Array(e.length);for(let r=0;r<e.length;r++)s[r]=Lo(e[r],t);return s}else if(typeof e=="object"&&!(e instanceof Date)){const s={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=Lo(e[r],t));return s}return e}function YT(e,t){return e.data=Vo(e.data,t),delete e.attachments,e}function Vo(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let s=0;s<e.length;s++)e[s]=Vo(e[s],t);else if(typeof e=="object")for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(e[s]=Vo(e[s],t));return e}const GT=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],JT=5;var he;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(he||(he={}));class eS{constructor(t){this.replacer=t}encode(t){return(t.type===he.EVENT||t.type===he.ACK)&&ya(t)?this.encodeAsBinary({type:t.type===he.EVENT?he.BINARY_EVENT:he.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let s=""+t.type;return(t.type===he.BINARY_EVENT||t.type===he.BINARY_ACK)&&(s+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(s+=t.nsp+","),t.id!=null&&(s+=t.id),t.data!=null&&(s+=JSON.stringify(t.data,this.replacer)),s}encodeAsBinary(t){const s=XT(t),r=this.encodeAsString(s.packet),a=s.buffers;return a.unshift(r),a}}function $u(e){return Object.prototype.toString.call(e)==="[object Object]"}class Kc extends We{constructor(t){super(),this.reviver=t}add(t){let s;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");s=this.decodeString(t);const r=s.type===he.BINARY_EVENT;r||s.type===he.BINARY_ACK?(s.type=r?he.EVENT:he.ACK,this.reconstructor=new tS(s),s.attachments===0&&super.emitReserved("decoded",s)):super.emitReserved("decoded",s)}else if(zc(t)||t.base64)if(this.reconstructor)s=this.reconstructor.takeBinaryData(t),s&&(this.reconstructor=null,super.emitReserved("decoded",s));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let s=0;const r={type:Number(t.charAt(0))};if(he[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===he.BINARY_EVENT||r.type===he.BINARY_ACK){const i=s+1;for(;t.charAt(++s)!=="-"&&s!=t.length;);const o=t.substring(i,s);if(o!=Number(o)||t.charAt(s)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(t.charAt(s+1)==="/"){const i=s+1;for(;++s&&!(t.charAt(s)===","||s===t.length););r.nsp=t.substring(i,s)}else r.nsp="/";const a=t.charAt(s+1);if(a!==""&&Number(a)==a){const i=s+1;for(;++s;){const o=t.charAt(s);if(o==null||Number(o)!=o){--s;break}if(s===t.length)break}r.id=Number(t.substring(i,s+1))}if(t.charAt(++s)){const i=this.tryParse(t.substr(s));if(Kc.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,s){switch(t){case he.CONNECT:return $u(s);case he.DISCONNECT:return s===void 0;case he.CONNECT_ERROR:return typeof s=="string"||$u(s);case he.EVENT:case he.BINARY_EVENT:return Array.isArray(s)&&(typeof s[0]=="number"||typeof s[0]=="string"&&GT.indexOf(s[0])===-1);case he.ACK:case he.BINARY_ACK:return Array.isArray(s)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class tS{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const s=YT(this.reconPack,this.buffers);return this.finishedReconstruction(),s}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const sS=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Kc,Encoder:eS,get PacketType(){return he},protocol:JT},Symbol.toStringTag,{value:"Module"}));function $t(e,t,s){return e.on(t,s),function(){e.off(t,s)}}const rS=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class xp extends We{constructor(t,s,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=s,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[$t(t,"open",this.onopen.bind(this)),$t(t,"packet",this.onpacket.bind(this)),$t(t,"error",this.onerror.bind(this)),$t(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...s){var r,a,i;if(rS.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(s.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(s),this;const o={type:he.EVENT,data:s};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof s[s.length-1]=="function"){const d=this.ids++,h=s.pop();this._registerAckCallback(d,h),o.id=d}const c=(a=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||a===void 0?void 0:a.writable,l=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!c||(l?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,s){var r;const a=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(a===void 0){this.acks[t]=s;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===t&&this.sendBuffer.splice(c,1);s.call(this,new Error("operation has timed out"))},a),o=(...c)=>{this.io.clearTimeoutFn(i),s.apply(this,c)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...s){return new Promise((r,a)=>{const i=(o,c)=>o?a(o):r(c);i.withError=!0,s.push(i),this.emit(t,...s)})}_addToQueue(t){let s;typeof t[t.length-1]=="function"&&(s=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...i)=>r!==this._queue[0]?void 0:(a!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),s&&s(a)):(this._queue.shift(),s&&s(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const s=this._queue[0];s.pending&&!t||(s.pending=!0,s.tryCount++,this.flags=s.flags,this.emit.apply(this,s.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:he.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,s){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,s),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case he.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case he.EVENT:case he.BINARY_EVENT:this.onevent(t);break;case he.ACK:case he.BINARY_ACK:this.onack(t);break;case he.DISCONNECT:this.ondisconnect();break;case he.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const s=t.data||[];t.id!=null&&s.push(this.ack(t.id)),this.connected?this.emitEvent(s):this.receiveBuffer.push(Object.freeze(s))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const s=this._anyListeners.slice();for(const r of s)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const s=this;let r=!1;return function(...a){r||(r=!0,s.packet({type:he.ACK,id:t,data:a}))}}onack(t){const s=this.acks[t.id];typeof s=="function"&&(delete this.acks[t.id],s.withError&&t.data.unshift(null),s.apply(this,t.data))}onconnect(t,s){this.id=t,this.recovered=s&&this._pid===s,this._pid=s,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:he.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const s=this._anyListeners;for(let r=0;r<s.length;r++)if(t===s[r])return s.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const s=this._anyOutgoingListeners;for(let r=0;r<s.length;r++)if(t===s[r])return s.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const s=this._anyOutgoingListeners.slice();for(const r of s)r.apply(this,t.data)}}}function qr(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}qr.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),s=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-s:e+s}return Math.min(e,this.max)|0};qr.prototype.reset=function(){this.attempts=0};qr.prototype.setMin=function(e){this.ms=e};qr.prototype.setMax=function(e){this.max=e};qr.prototype.setJitter=function(e){this.jitter=e};class Uo extends We{constructor(t,s){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(s=t,t=void 0),s=s||{},s.path=s.path||"/socket.io",this.opts=s,ri(this,s),this.reconnection(s.reconnection!==!1),this.reconnectionAttempts(s.reconnectionAttempts||1/0),this.reconnectionDelay(s.reconnectionDelay||1e3),this.reconnectionDelayMax(s.reconnectionDelayMax||5e3),this.randomizationFactor((r=s.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new qr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(s.timeout==null?2e4:s.timeout),this._readyState="closed",this.uri=t;const a=s.parser||sS;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=s.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var s;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(s=this.backoff)===null||s===void 0||s.setMin(t),this)}randomizationFactor(t){var s;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(s=this.backoff)===null||s===void 0||s.setJitter(t),this)}reconnectionDelayMax(t){var s;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(s=this.backoff)===null||s===void 0||s.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new WT(this.uri,this.opts);const s=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const a=$t(s,"open",function(){r.onopen(),t&&t()}),i=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),t?t(c):this.maybeReconnectOnOpen()},o=$t(s,"error",i);if(this._timeout!==!1){const c=this._timeout,l=this.setTimeoutFn(()=>{a(),i(new Error("timeout")),s.close()},c);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(a),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push($t(t,"ping",this.onping.bind(this)),$t(t,"data",this.ondata.bind(this)),$t(t,"error",this.onerror.bind(this)),$t(t,"close",this.onclose.bind(this)),$t(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(s){this.onclose("parse error",s)}}ondecoded(t){si(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,s){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new xp(this,t,s),this.nsps[t]=r),r}_destroy(t){const s=Object.keys(this.nsps);for(const r of s)if(this.nsps[r].active)return;this._close()}_packet(t){const s=this.encoder.encode(t);for(let r=0;r<s.length;r++)this.engine.write(s[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,s){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,s),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const s=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},s);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const sn={};function $i(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const s=zT(e,t.path||"/socket.io"),r=s.source,a=s.id,i=s.path,o=sn[a]&&i in sn[a].nsps,c=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let l;return c?l=new Uo(r,t):(sn[a]||(sn[a]=new Uo(r,t)),l=sn[a]),s.query&&!t.query&&(t.query=s.queryKey),l.socket(s.path,t)}Object.assign($i,{Manager:Uo,Socket:xp,io:$i,connect:$i});class nS{socket=null;reconnectAttempts=0;maxReconnectAttempts=5;reconnectDelay=1e3;eventListeners=new Map;constructor(){this.connect()}connect(){localStorage.getItem("auth_token")}setupEventListeners(){this.socket&&(this.socket.on("connect",()=>{this.reconnectAttempts=0,W.success("Connected to real-time updates")}),this.socket.on("disconnect",t=>{W.error("Disconnected from real-time updates"),this.handleReconnect()}),this.socket.on("connect_error",t=>{this.handleReconnect()}),this.socket.on("project_created",t=>{this.handleEvent("project_created",t),W.success(`New project: ${t.name}`)}),this.socket.on("project_updated",t=>{this.handleEvent("project_updated",t),W.success(`Project updated: ${t.name}`)}),this.socket.on("project_deleted",t=>{this.handleEvent("project_deleted",t),W.success(`Project deleted: ${t.name}`)}),this.socket.on("task_created",t=>{this.handleEvent("task_created",t),W.success(`New task: ${t.name}`)}),this.socket.on("task_updated",t=>{this.handleEvent("task_updated",t),W.success(`Task updated: ${t.name}`)}),this.socket.on("task_deleted",t=>{this.handleEvent("task_deleted",t),W.success(`Task deleted: ${t.name}`)}),this.socket.on("task_assigned",t=>{this.handleEvent("task_assigned",t),W.success(`Task assigned: ${t.task_name}`)}),this.socket.on("user_online",t=>{this.handleEvent("user_online",t)}),this.socket.on("user_offline",t=>{this.handleEvent("user_offline",t)}),this.socket.on("notification",t=>{this.handleEvent("notification",t),W(t.message,{icon:t.type==="success"?"✅":t.type==="error"?"❌":"ℹ️",duration:4e3})}))}handleReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts)return;this.reconnectAttempts++;const t=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);setTimeout(()=>{this.connect()},t)}handleEvent(t,s){(this.eventListeners.get(t)||[]).forEach(a=>{try{a(s)}catch{}})}subscribe(t,s){return this.eventListeners.has(t)||this.eventListeners.set(t,[]),this.eventListeners.get(t).push(s),()=>{const r=this.eventListeners.get(t)||[],a=r.indexOf(s);a>-1&&r.splice(a,1)}}emit(t,s){this.socket&&this.socket.connected&&this.socket.emit(t,s)}joinRoom(t){this.socket&&this.socket.connected&&this.socket.emit("join_room",t)}leaveRoom(t){this.socket&&this.socket.connected&&this.socket.emit("leave_room",t)}isConnected(){return this.socket?this.socket.connected:!1}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null)}reconnect(){this.disconnect(),this.reconnectAttempts=0,this.connect()}}const Ct=new nS;function aS(){return{subscribe:Ct.subscribe.bind(Ct),emit:Ct.emit.bind(Ct),joinRoom:Ct.joinRoom.bind(Ct),leaveRoom:Ct.leaveRoom.bind(Ct),isConnected:Ct.isConnected.bind(Ct),reconnect:Ct.reconnect.bind(Ct)}}function iS({queryKey:e,enabled:t=!0}){const s=fe(),{subscribe:r,joinRoom:a,leaveRoom:i}=aS(),o=p.useCallback(()=>{s.invalidateQueries({queryKey:e})},[s,e]),c=p.useCallback(()=>{s.refetchQueries({queryKey:e})},[s,e]);return p.useEffect(()=>{if(!t)return;const l=e.join(":");a(l);const u=r("project_created",j=>{s.setQueryData(["projects"],N=>N&&{...N,data:[j,...N.data]}),o()}),d=r("project_updated",j=>{s.setQueryData(["projects"],N=>N&&{...N,data:N.data.map(T=>T.id===j.id?{...T,...j}:T)}),o()}),h=r("project_deleted",j=>{s.setQueryData(["projects"],N=>N&&{...N,data:N.data.filter(T=>T.id!==j.id)}),o()}),m=r("task_created",j=>{s.setQueryData(["tasks"],N=>N&&{...N,data:[j,...N.data]}),o()}),g=r("task_updated",j=>{s.setQueryData(["tasks"],N=>N&&{...N,data:N.data.map(T=>T.id===j.id?{...T,...j}:T)}),o()}),f=r("task_deleted",j=>{s.setQueryData(["tasks"],N=>N&&{...N,data:N.data.filter(T=>T.id!==j.id)}),o()}),x=r("task_assigned",j=>{s.setQueryData(["tasks"],N=>N&&{...N,data:N.data.map(T=>T.id===j.task_id?{...T,user:j.user}:T)}),o()}),y=r("user_created",j=>{s.setQueryData(["users"],N=>N&&{...N,data:[j,...N.data]}),o()}),v=r("user_updated",j=>{s.setQueryData(["users"],N=>N&&{...N,data:N.data.map(T=>T.id===j.id?{...T,...j}:T)}),o()}),w=r("user_deleted",j=>{s.setQueryData(["users"],N=>N&&{...N,data:N.data.filter(T=>T.id!==j.id)}),o()});return()=>{i(l),u(),d(),h(),m(),g(),f(),x(),y(),v(),w()}},[t,e,r,a,i,s,o]),{invalidateQueries:o,refetchQueries:c}}function oS(){return iS({queryKey:["tasks"]})}function cS(){const[e,t]=p.useState({search:"",page:1,per_page:10}),{data:s,isLoading:r,error:a}=Ce({queryKey:["tasks",e],queryFn:()=>J2.getTasks(e)});oS();const i=m=>{t(g=>({...g,search:m,page:1}))},o=(m,g)=>{t(f=>({...f,[m]:g,page:1}))},c=()=>{t({search:"",page:1,per_page:10})},l=m=>{t(g=>({...g,page:m}))},u=m=>{switch(m){case"completed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"in_progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"cancelled":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}},d=m=>{switch(m){case"urgent":return"text-red-600 dark:text-red-400";case"high":return"text-orange-600 dark:text-orange-400";case"medium":return"text-yellow-600 dark:text-yellow-400";case"low":return"text-green-600 dark:text-green-400";default:return"text-gray-600 dark:text-gray-400"}},h={status:[{value:"pending",label:"Pending"},{value:"in_progress",label:"In Progress"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}],priority:[{value:"urgent",label:"Urgent"},{value:"high",label:"High"},{value:"medium",label:"Medium"},{value:"low",label:"Low"}],dateRange:{start:e.start_date,end:e.end_date}};return r?n.jsxs("div",{className:"space-y-6 animate-fade-in",children:[n.jsxs("div",{className:"animate-slide-up",children:[n.jsx("div",{className:"skeleton h-8 w-48 mb-2"}),n.jsx("div",{className:"skeleton h-4 w-96"})]}),n.jsx("div",{className:"card animate-slide-up",style:{animationDelay:"100ms"},children:n.jsx("div",{className:"card-content",children:n.jsx("div",{className:"skeleton h-10 w-full"})})}),n.jsx(lT,{})]}):a?n.jsx("div",{className:"text-center py-12",children:n.jsxs("p",{className:"text-red-600",children:["Error loading tasks: ",a.message]})}):n.jsxs("div",{className:"space-y-6 animate-fade-in",children:[n.jsxs("div",{className:"flex items-center justify-between animate-slide-up",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Tasks"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Manage your tasks and track their progress."})]}),n.jsxs(Kt,{to:"/tasks/new",className:"btn btn-primary hover-lift",children:[n.jsx(Ou,{className:"h-4 w-4 mr-2"}),"New Task"]})]}),n.jsx(dT,{searchValue:e.search||"",onSearchChange:i,filters:e,onFilterChange:o,onClearFilters:c,filterOptions:h,className:"animate-slide-up",style:{animationDelay:"100ms"}}),n.jsx("div",{className:"card animate-slide-up",style:{animationDelay:"200ms"},children:n.jsx("div",{className:"card-content p-0",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[n.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Task"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Project"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Assignee"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Priority"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Due Date"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:s?.data.map((m,g)=>n.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800 animate-slide-up",style:{animationDelay:`${g*50}ms`},children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:m.status==="completed"?n.jsx(Mu,{className:"h-5 w-5 text-green-500"}):n.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-gray-300 dark:border-gray-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:m.name}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 line-clamp-1",children:m.description||"No description"})]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:m.project?.name||"No project"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"h-8 w-8 rounded-full bg-primary-600 flex items-center justify-center",children:n.jsx("span",{className:"text-sm font-medium text-white",children:m.user?.name?.charAt(0).toUpperCase()||"?"})}),n.jsx("div",{className:"ml-3",children:n.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:m.user?.name||"Unassigned"})})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${u(m.status)}`,children:m.status.replace("_"," ").toUpperCase()})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(aT,{className:`h-4 w-4 mr-1 ${d(m.priority)}`}),n.jsx("span",{className:`text-sm font-medium ${d(m.priority)}`,children:m.priority.toUpperCase()})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:m.end_date?mr(m.end_date):"No due date"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[n.jsx(Kt,{to:`/tasks/${m.id}`,className:"text-primary-600 hover:text-primary-900 dark:text-primary-400 dark:hover:text-primary-300",children:n.jsx(rT,{className:"h-4 w-4"})}),n.jsx("button",{className:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-200",children:n.jsx(iT,{className:"h-4 w-4"})}),n.jsx("button",{className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:n.jsx(cT,{className:"h-4 w-4"})})]})})]},m.id))})]})})})}),s?.data.length===0&&n.jsx("div",{className:"card",children:n.jsxs("div",{className:"card-content text-center py-12",children:[n.jsx("div",{className:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-500",children:n.jsx(Mu,{className:"h-full w-full"})}),n.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-gray-100",children:"No tasks"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Get started by creating a new task."}),n.jsx("div",{className:"mt-6",children:n.jsxs(Kt,{to:"/tasks/new",className:"btn btn-primary",children:[n.jsx(Ou,{className:"h-4 w-4 mr-2"}),"New Task"]})})]})}),s?.pagination&&s.pagination.last_page>1&&n.jsxs("div",{className:"flex items-center justify-between animate-slide-up",style:{animationDelay:"300ms"},children:[n.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Showing ",(s.pagination.current_page-1)*s.pagination.per_page+1," to"," ",Math.min(s.pagination.current_page*s.pagination.per_page,s.pagination.total)," of"," ",s.pagination.total," results"]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>l(s.pagination.current_page-1),disabled:s.pagination.current_page===1,className:"btn btn-outline btn-sm",children:"Previous"}),n.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Page ",s.pagination.current_page," of ",s.pagination.last_page]}),n.jsx("button",{onClick:()=>l(s.pagination.current_page+1),disabled:s.pagination.current_page===s.pagination.last_page,className:"btn btn-outline btn-sm",children:"Next"})]})]})]})}const lS=({children:e})=>{const{isAuthenticated:t,isLoading:s,checkAuth:r}=Ve(),a=$o();return Z.useEffect(()=>{r()},[r]),s?n.jsx("div",{className:"flex min-h-screen items-center justify-center bg-[var(--color-surface-base)] text-[var(--color-text-secondary)]",children:"Đang xác thực phiên đăng nhập..."}):t?e:n.jsx(Nr,{to:"/login",state:{from:a},replace:!0})},dS=vp([{path:"/app",element:n.jsx(lS,{children:n.jsx(eb,{})}),children:[{index:!0,element:n.jsx(Nr,{to:"/app/dashboard",replace:!0})},{path:"dashboard",element:n.jsx(Pb,{})},{path:"alerts",element:n.jsx(Eb,{})},{path:"preferences",element:n.jsx(Fw,{})},{path:"projects",element:n.jsx(K_,{})},{path:"projects/:id",element:n.jsx(E2,{})},{path:"documents",element:n.jsx(W2,{})},{path:"documents/:id",element:n.jsx(Q2,{})},{path:"tasks",element:n.jsx(cS,{})},{path:"team",element:n.jsx(Z2,{})},{path:"calendar",element:n.jsx(X2,{})},{path:"settings",element:n.jsx(Y2,{})}]},{path:"/admin",element:n.jsx(ab,{children:n.jsx(tb,{})}),children:[{index:!0,element:n.jsx(Nr,{to:"/admin/dashboard",replace:!0})},{path:"dashboard",element:n.jsx(T_,{})},{path:"users",element:n.jsx(P_,{})},{path:"roles",element:n.jsx(M_,{})},{path:"tenants",element:n.jsx(U_,{})}]},{path:"/login",element:n.jsx($w,{})},{path:"/forgot-password",element:n.jsx(qw,{})},{path:"/reset-password",element:n.jsx(zw,{})},{path:"*",element:n.jsx(Nr,{to:"/app/dashboard",replace:!0})}],{future:{}}),uS=p.createContext(void 0);function hS({children:e}){const{user:t,isAuthenticated:s,isLoading:r,login:a,logout:i,setUser:o}=Ve(),d={user:t,setUser:h=>{o(h)},login:async(h,m)=>{await a({email:h,password:m})},logout:async()=>{await i()},isAuthenticated:s,isLoading:r};return n.jsx(uS.Provider,{value:d,children:e})}const mS=()=>{if(typeof window>"u")return"light";const e=window.localStorage.getItem("zenamanage.theme");return e==="light"||e==="dark"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"},fS=()=>{typeof window<"u"&&(window.__e2e_logs||(window.__e2e_logs=[]),window.__e2e_logs.push("[AppShell] component rendered"));const e=p.useRef(!1);p.useEffect(()=>{if(typeof window>"u")return;const i=()=>{try{const o=window;(o.__e2e_logs=o.__e2e_logs??[]).push({scope:"app-shell",event:"force-check-auth"}),Ve.getState().checkAuth().catch(l=>{(o.__e2e_logs=o.__e2e_logs??[]).push({scope:"app-shell",event:"force-check-auth-error",error:String(l)})})}catch(o){const c=window;(c.__e2e_logs=c.__e2e_logs??[]).push({scope:"app-shell",event:"force-check-auth-error",error:String(o)})}};return window.addEventListener("zena:e2e:check-auth",i),()=>{window.removeEventListener("zena:e2e:check-auth",i)}},[]),p.useEffect(()=>{if(e.current)return;e.current=!0,typeof window<"u"&&(window.__e2e_logs||(window.__e2e_logs=[]),window.__e2e_logs.push({scope:"app-shell",event:"mounted",url:window.location.href,ts:Date.now()})),Vw();const o=!!(typeof window<"u"?localStorage.getItem("auth_token"):null);typeof window<"u"&&(window.__e2e_logs.push({scope:"app-shell",event:"boot",tokenPresent:o,url:window.location.href,ts:Date.now()}),window.__e2e_logs.push({scope:"app-shell",event:"calling-check-auth",reason:"boot-after-mount",ts:Date.now()}),window.__e2e_logs.push({scope:"app-shell",event:"me-request-starting",ts:Date.now()}));const{checkAuth:c}=Ve.getState();c().catch(l=>{typeof window<"u"&&window.__e2e_logs.push({scope:"app-shell",event:"check-auth-error",error:String(l),ts:Date.now()})})},[]);const[t,s]=p.useState(()=>mS()),[r]=p.useState(()=>new zp({defaultOptions:{queries:{retry:1,staleTime:6e4,refetchOnWindowFocus:!1}}}));p.useEffect(()=>{Pa(t),typeof window<"u"&&window.localStorage.setItem("zenamanage.theme",t)},[t]),p.useEffect(()=>{if(typeof window>"u")return;const i=window.matchMedia("(prefers-color-scheme: dark)"),o=c=>{window.localStorage.getItem("zenamanage.theme")||s(c.matches?"dark":"light")};return i.addEventListener("change",o),()=>i.removeEventListener("change",o)},[]);const a=p.useMemo(()=>({mode:t,setMode:s,toggleMode:()=>s(i=>iw(i))}),[t]);return n.jsx("div",{"data-testid":"app-shell-root",children:n.jsx(hS,{children:n.jsx(fg,{locale:"en",children:n.jsx(nh.Provider,{value:a,children:n.jsx(Xp,{client:r,children:n.jsxs("div",{className:"min-h-screen bg-[var(--color-surface-base)] text-[var(--color-text-primary)]",children:[n.jsx(bp,{router:dS}),n.jsx(wp,{position:"top-right",toastOptions:{duration:3500,style:{background:"var(--color-surface-card)",color:"var(--color-text-primary)",border:"1px solid var(--color-border-subtle)",boxShadow:"0 12px 24px rgba(15, 23, 42, 0.12)"}}})]})})})})})})};typeof window<"u"&&(window.__e2e_logs||(window.__e2e_logs=[]),window.__e2e_logs.push({scope:"global",event:"entry-loaded",url:window.location.href,ts:Date.now()}),window.addEventListener("error",e=>{try{window.__e2e_logs?.push({scope:"global",type:"error",message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,stack:e.error&&e.error.stack||null,ts:Date.now()})}catch{}}),window.addEventListener("unhandledrejection",e=>{try{window.__e2e_logs?.push({scope:"global",type:"unhandledrejection",reason:String(e.reason??"unknown"),ts:Date.now()})}catch{}}));Cp.createRoot(document.getElementById("root")).render(n.jsx(Z.StrictMode,{children:n.jsx(fS,{})}));
